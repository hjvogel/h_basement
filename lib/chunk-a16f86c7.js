"use strict";(globalThis.webpackChunk_croquet_microverse=globalThis.webpackChunk_croquet_microverse||[]).push([[11],{8011:(a,Y,K)=>{if(Object.defineProperty(Y,"__esModule",{value:!0}),void 0===globalThis.TextEncoder){globalThis.TextEncoder=function(){},TextEncoder.prototype.encode=function(a){for(var Y=a.length,K=-1,P="undefined"==typeof Uint8Array?new Array(1.5*Y):new Uint8Array(3*Y),R=0,v=0,H=0;H!==Y;){if(R=a.charCodeAt(H),H+=1,R>=55296&&R<=56319){if(H===Y){P[K+=1]=239,P[K+=1]=191,P[K+=1]=189;break}if(!((v=a.charCodeAt(H))>=56320&&v<=57343)){P[K+=1]=239,P[K+=1]=191,P[K+=1]=189;continue}if(H+=1,(R=1024*(R-55296)+v-56320+65536)>65535){P[K+=1]=240|R>>>18,P[K+=1]=128|R>>>12&63,P[K+=1]=128|R>>>6&63,P[K+=1]=128|63&R;continue}}R<=127?P[K+=1]=0|R:R<=2047?(P[K+=1]=192|R>>>6,P[K+=1]=128|63&R):(P[K+=1]=224|R>>>12,P[K+=1]=128|R>>>6&63,P[K+=1]=128|63&R)}return"undefined"!=typeof Uint8Array?P.subarray(0,K+1):(P.length=K+1,P)},TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(TextEncoder.prototype,"encoding",{get:function(){if(TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch(P){TextEncoder.prototype.encoding="utf-8"}"undefined"!=typeof Symbol&&(TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}var P="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==K.g?K.g:"undefined"!=typeof self?self:{};!function(a){var Y=function(a){var Y,K=Object.prototype,P=K.hasOwnProperty,R="function"==typeof Symbol?Symbol:{},v=R.iterator||"@@iterator",H=R.asyncIterator||"@@asyncIterator",M=R.toStringTag||"@@toStringTag";function l(a,Y,K){return Object.defineProperty(a,Y,{value:K,enumerable:!0,configurable:!0,writable:!0}),a[Y]}try{l({},"")}catch(a){l=function(a,Y,K){return a[Y]=K}}function c(a,Y,K,P){var R=Y&&Y.prototype instanceof b?Y:b,v=Object.create(R.prototype),H=new W(P||[]);return v._invoke=function(a,Y,K){var P=I;return function(R,v){if(P===F)throw new Error("Generator is already running");if(P===N){if("throw"===R)throw v;return C()}for(K.method=R,K.arg=v;;){var H=K.delegate;if(H){var M=G(H,K);if(M){if(M===Q)continue;return M}}if("next"===K.method)K.sent=K._sent=K.arg;else if("throw"===K.method){if(P===I)throw P=N,K.arg;K.dispatchException(K.arg)}else"return"===K.method&&K.abrupt("return",K.arg);P=F;var j=d(a,Y,K);if("normal"===j.type){if(P=K.done?N:z,j.arg===Q)continue;return{value:j.arg,done:K.done}}"throw"===j.type&&(P=N,K.method="throw",K.arg=j.arg)}}}(a,K,H),v}function d(a,Y,K){try{return{type:"normal",arg:a.call(Y,K)}}catch(a){return{type:"throw",arg:a}}}a.wrap=c;var I="suspendedStart",z="suspendedYield",F="executing",N="completed",Q={};function b(){}function y(){}function g(){}var j={};l(j,v,(function(){return this}));var U=Object.getPrototypeOf,D=U&&U(U(T([])));D&&D!==K&&P.call(D,v)&&(j=D);var E=g.prototype=b.prototype=Object.create(j);function L(a){["next","throw","return"].forEach((function(Y){l(a,Y,(function(a){return this._invoke(Y,a)}))}))}function x(a,Y){function s(K,R,v,H){var M=d(a[K],a,R);if("throw"!==M.type){var I=M.arg,z=I.value;return z&&"object"==typeof z&&P.call(z,"__await")?Y.resolve(z.__await).then((function(a){s("next",a,v,H)}),(function(a){s("throw",a,v,H)})):Y.resolve(z).then((function(a){I.value=a,v(I)}),(function(a){return s("throw",a,v,H)}))}H(M.arg)}var K;this._invoke=function(a,P){function o(){return new Y((function(Y,K){s(a,P,Y,K)}))}return K=K?K.then(o,o):o()}}function G(a,K){var P=a.iterator[K.method];if(P===Y){if(K.delegate=null,"throw"===K.method){if(a.iterator.return&&(K.method="return",K.arg=Y,G(a,K),"throw"===K.method))return Q;K.method="throw",K.arg=new TypeError("The iterator does not provide a 'throw' method")}return Q}var R=d(P,a.iterator,K.arg);if("throw"===R.type)return K.method="throw",K.arg=R.arg,K.delegate=null,Q;var v=R.arg;return v?v.done?(K[a.resultName]=v.value,K.next=a.nextLoc,"return"!==K.method&&(K.method="next",K.arg=Y),K.delegate=null,Q):v:(K.method="throw",K.arg=new TypeError("iterator result is not an object"),K.delegate=null,Q)}function S(a){var Y={tryLoc:a[0]};1 in a&&(Y.catchLoc=a[1]),2 in a&&(Y.finallyLoc=a[2],Y.afterLoc=a[3]),this.tryEntries.push(Y)}function k(a){var Y=a.completion||{};Y.type="normal",delete Y.arg,a.completion=Y}function W(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(S,this),this.reset(!0)}function T(a){if(a){var K=a[v];if(K)return K.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var R=-1,H=function s(){for(;++R<a.length;)if(P.call(a,R))return s.value=a[R],s.done=!1,s;return s.value=Y,s.done=!0,s};return H.next=H}}return{next:C}}function C(){return{value:Y,done:!0}}return y.prototype=g,l(E,"constructor",g),l(g,"constructor",y),y.displayName=l(g,M,"GeneratorFunction"),a.isGeneratorFunction=function(a){var Y="function"==typeof a&&a.constructor;return!!Y&&(Y===y||"GeneratorFunction"===(Y.displayName||Y.name))},a.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,g):(a.__proto__=g,l(a,M,"GeneratorFunction")),a.prototype=Object.create(E),a},a.awrap=function(a){return{__await:a}},L(x.prototype),l(x.prototype,H,(function(){return this})),a.AsyncIterator=x,a.async=function(Y,K,P,R,v){void 0===v&&(v=Promise);var H=new x(c(Y,K,P,R),v);return a.isGeneratorFunction(K)?H:H.next().then((function(a){return a.done?a.value:H.next()}))},L(E),l(E,M,"Generator"),l(E,v,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),a.keys=function(a){var Y=[];for(var K in a)Y.push(K);return Y.reverse(),function s(){for(;Y.length;){var K=Y.pop();if(K in a)return s.value=K,s.done=!1,s}return s.done=!0,s}},a.values=T,W.prototype={constructor:W,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=Y,this.done=!1,this.delegate=null,this.method="next",this.arg=Y,this.tryEntries.forEach(k),!a)for(var K in this)"t"===K.charAt(0)&&P.call(this,K)&&!isNaN(+K.slice(1))&&(this[K]=Y)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var K=this;function n(P,R){return H.type="throw",H.arg=a,K.next=P,R&&(K.method="next",K.arg=Y),!!R}for(var R=this.tryEntries.length-1;R>=0;--R){var v=this.tryEntries[R],H=v.completion;if("root"===v.tryLoc)return n("end");if(v.tryLoc<=this.prev){var M=P.call(v,"catchLoc"),I=P.call(v,"finallyLoc");if(M&&I){if(this.prev<v.catchLoc)return n(v.catchLoc,!0);if(this.prev<v.finallyLoc)return n(v.finallyLoc)}else if(M){if(this.prev<v.catchLoc)return n(v.catchLoc,!0)}else{if(!I)throw new Error("try statement without catch or finally");if(this.prev<v.finallyLoc)return n(v.finallyLoc)}}}},abrupt:function(a,Y){for(var K=this.tryEntries.length-1;K>=0;--K){var R=this.tryEntries[K];if(R.tryLoc<=this.prev&&P.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var v=R;break}}v&&("break"===a||"continue"===a)&&v.tryLoc<=Y&&Y<=v.finallyLoc&&(v=null);var H=v?v.completion:{};return H.type=a,H.arg=Y,v?(this.method="next",this.next=v.finallyLoc,Q):this.complete(H)},complete:function(a,Y){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&Y&&(this.next=Y),Q},finish:function(a){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var K=this.tryEntries[Y];if(K.finallyLoc===a)return this.complete(K.completion,K.afterLoc),k(K),Q}},catch:function(a){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var K=this.tryEntries[Y];if(K.tryLoc===a){var P=K.completion;if("throw"===P.type){var R=P.arg;k(K)}return R}}throw new Error("illegal catch attempt")},delegateYield:function(a,K,P){return this.delegate={iterator:T(a),resultName:K,nextLoc:P},"next"===this.method&&(this.arg=Y),Q}},a}({});try{globalThis.regeneratorRuntime=Y}catch(a){"object"==typeof globalThis?globalThis.regeneratorRuntime=Y:Function("r","regeneratorRuntime = r")(Y)}}();const R={CROQUET_VERSION:"1.1.0-32"},v=window.location.hostname.endsWith("croquet.studio");let H="",M="";function o(a,Y){if(Y)for(const K of Y.split("&")){const Y=K.split("="),P=Y[0];let R=!0;if(Y.length>1&&(R=decodeURIComponent(Y.slice(1).join("=")),R.match(/^(true|false|null|[0-9.]*|["[{].*)$/)))try{R=JSON.parse(R)}catch(a){"["===R[0]&&(R=R.slice(1,-1).split(","))}a[P]=R}}const I=new class{constructor(){this.getSession(),o(this,window.location.search.slice(1)),o(this,v?window.location.hash.slice(1):M),window.location.pathname.indexOf("/ar.html")>=0&&(this.ar=!0)}has(a,Y,K){"boolean"!=typeof K&&(K=this.isHost(K));const P=this[a];if("string"!=typeof P)return K;const R=P.split(",");return!0===K&&(Y=`no${Y}`),Y.endsWith("s")&&(Y=Y.slice(0,-1)),R.includes(Y)||R.includes(`${Y}s`)?!K:K}getSession(){if(v){const a=/^\/([^/]+)\/(.*)$/,Y=window.location.pathname.match(a);if(Y)return H=Y[1],Y[2]}else{const a=/^#([^&]+)&?(.*)$/,Y=window.location.hash.match(a);if(Y)return Y[1].includes("=")?(M=`${Y[1]}&${Y[2]}`,""):(M=Y[2],Y[1])}return"string"==typeof this.session?(M=window.location.hash.slice(1),this.session):""}setSession(a){let Y=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==v&&this.getSession();const{search:K,hash:P}=window.location,R=v?`/${H}/${a}${K}${P}`:`#${a}${M?"&"+M:""}`;Y?window.history.replaceState({},"",R):window.history.pushState({},"",R)}isHost(a){const Y=window.location.hostname;return Y===a||"localhost"===a&&(!!Y.endsWith(".ngrok.io")||(!!Y.endsWith("croquet.dev")||(!("croquet.io"!==Y||!window.location.pathname.match(/^\/(dev|files)\//))||("file:"===window.location.protocol||["127.0.0.1","[::1]"].includes(Y)))))}isLocalhost(){return this.isHost("localhost")}};var z,F,N,Q={exports:{}};F=P,N=function(a){var e=function(a){return new e.lib.init(a)};function s(a,Y){return Y.offset[a]?isNaN(Y.offset[a])?Y.offset[a]:Y.offset[a]+"px":"0px"}function i(a,Y){return!(!a||"string"!=typeof Y||!(a.className&&a.className.trim().split(/\s+/gi).indexOf(Y)>-1))}return e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,style:{background:""}},e.lib=e.prototype={toastify:"1.11.2",constructor:e,init:function(a){return a||(a={}),this.options={},this.toastElement=null,this.options.text=a.text||e.defaults.text,this.options.node=a.node||e.defaults.node,this.options.duration=0===a.duration?0:a.duration||e.defaults.duration,this.options.selector=a.selector||e.defaults.selector,this.options.callback=a.callback||e.defaults.callback,this.options.destination=a.destination||e.defaults.destination,this.options.newWindow=a.newWindow||e.defaults.newWindow,this.options.close=a.close||e.defaults.close,this.options.gravity="bottom"===a.gravity?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=a.positionLeft||e.defaults.positionLeft,this.options.position=a.position||e.defaults.position,this.options.backgroundColor=a.backgroundColor||e.defaults.backgroundColor,this.options.avatar=a.avatar||e.defaults.avatar,this.options.className=a.className||e.defaults.className,this.options.stopOnFocus=void 0===a.stopOnFocus?e.defaults.stopOnFocus:a.stopOnFocus,this.options.onClick=a.onClick||e.defaults.onClick,this.options.offset=a.offset||e.defaults.offset,this.options.escapeMarkup=void 0!==a.escapeMarkup?a.escapeMarkup:e.defaults.escapeMarkup,this.options.style=a.style||e.defaults.style,a.backgroundColor&&(this.options.style.background=a.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var a=document.createElement("div");for(var Y in a.className="toastify on "+this.options.className,this.options.position?a.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(a.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):a.className+=" toastify-right",a.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)a.style[Y]=this.options.style[Y];if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)a.appendChild(this.options.node);else if(this.options.escapeMarkup?a.innerText=this.options.text:a.innerHTML=this.options.text,""!==this.options.avatar){var K=document.createElement("img");K.src=this.options.avatar,K.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?a.appendChild(K):a.insertAdjacentElement("afterbegin",K)}if(!0===this.options.close){var P=document.createElement("span");P.innerHTML="&#10006;",P.className="toast-close",P.addEventListener("click",function(a){a.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var R=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&R>360?a.insertAdjacentElement("afterbegin",P):a.appendChild(P)}if(this.options.stopOnFocus&&this.options.duration>0){var v=this;a.addEventListener("mouseover",(function(Y){window.clearTimeout(a.timeOutValue)})),a.addEventListener("mouseleave",(function(){a.timeOutValue=window.setTimeout((function(){v.removeElement(a)}),v.options.duration)}))}if(void 0!==this.options.destination&&a.addEventListener("click",function(a){a.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&a.addEventListener("click",function(a){a.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var H=s("x",this.options),M=s("y",this.options),I="left"==this.options.position?H:"-"+H,z="toastify-top"==this.options.gravity?M:"-"+M;a.style.transform="translate("+I+","+z+")"}return a},showToast:function(){var a;if(this.toastElement=this.buildToast(),!(a="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var Y=e.defaults.oldestFirst?a.firstChild:a.lastChild;return a.insertBefore(this.toastElement,Y),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(a){a.className=a.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),a.parentNode&&a.parentNode.removeChild(a),this.options.callback.call(a),e.reposition()}.bind(this),400)}},e.reposition=function(){for(var a,Y={top:15,bottom:15},K={top:15,bottom:15},P={top:15,bottom:15},R=document.getElementsByClassName("toastify"),v=0;v<R.length;v++){a=!0===i(R[v],"toastify-top")?"toastify-top":"toastify-bottom";var H=R[v].offsetHeight;a=a.substr(9,a.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(R[v].style[a]=P[a]+"px",P[a]+=H+15):!0===i(R[v],"toastify-left")?(R[v].style[a]=Y[a]+"px",Y[a]+=H+15):(R[v].style[a]=K[a]+"px",K[a]+=H+15)}return this},e.lib.init.prototype=e.lib,e},(z=Q).exports?z.exports=N():F.Toastify=N();var j=Q.exports,U={exports:{}};!function(a){!function(Y,K,P){var R,v=256,H=P.pow(v,6),M=P.pow(2,52),I=2*M,z=255;function d(a,z,F){var N=[],Q=p(m((z=1==z?{entropy:!0}:z||{}).entropy?[a,f(K)]:null==a?function(){try{var a;return R&&(a=R.randomBytes)?a=a(v):(a=new Uint8Array(v),(Y.crypto||Y.msCrypto).getRandomValues(a)),f(a)}catch(a){var P=Y.navigator,H=P&&P.plugins;return[+new Date,Y,H,Y.screen,f(K)]}}():a,3),N),j=new h(N),w=function(){for(var a=j.g(6),Y=H,K=0;a<M;)a=(a+K)*v,Y*=v,K=j.g(1);for(;a>=I;)a/=2,Y/=2,K>>>=1;return(a+K)/Y};return w.int32=function(){return 0|j.g(4)},w.quick=function(){return j.g(4)/4294967296},w.double=w,p(f(j.S),K),(z.pass||F||function(a,Y,K,R){return R&&(R.S&&u(R,j),a.state=function(){return u(j,{})}),K?(P.random=a,Y):a})(w,Q,"global"in z?z.global:this==P,z.state)}function h(a){var Y,K=a.length,P=this,R=0,H=P.i=P.j=0,M=P.S=[];for(K||(a=[K++]);R<v;)M[R]=R++;for(R=0;R<v;R++)M[R]=M[H=z&H+a[R%K]+(Y=M[R])],M[H]=Y;(P.g=function(a){for(var Y,K=0,R=P.i,H=P.j,M=P.S;a--;)Y=M[R=z&R+1],K=K*v+M[z&(M[R]=M[H=z&H+Y])+(M[H]=Y)];return P.i=R,P.j=H,K})(v)}function u(a,Y){return Y.i=a.i,Y.j=a.j,Y.S=a.S.slice(),Y}function m(a,Y){var K,P=[],R=typeof a;if(Y&&"object"==R)for(K in a)try{P.push(m(a[K],Y-1))}catch(a){}return P.length?P:"string"==R?a:a+"\0"}function p(a,Y){for(var K,P=a+"",R=0;R<P.length;)Y[z&R]=z&(K^=19*Y[z&R])+P.charCodeAt(R++);return f(Y)}function f(a){return String.fromCharCode.apply(0,a)}if(p(P.random(),K),a.exports){a.exports=d;try{R=void 0}catch(Y){}}else P.seedrandom=d}("undefined"!=typeof self?self:P,[],Math)}(U);var D,E=U.exports;!function(){function t(Y){this.mode=a.MODE_8BIT_BYTE,this.data=Y,this.parsedData=[];for(var K=0,P=this.data.length;K<P;K++){var R=[],v=this.data.charCodeAt(K);v>65536?(R[0]=240|(1835008&v)>>>18,R[1]=128|(258048&v)>>>12,R[2]=128|(4032&v)>>>6,R[3]=128|63&v):v>2048?(R[0]=224|(61440&v)>>>12,R[1]=128|(4032&v)>>>6,R[2]=128|63&v):v>128?(R[0]=192|(1984&v)>>>6,R[1]=128|63&v):R[0]=v,this.parsedData.push(R)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(a,Y){this.typeNumber=a,this.errorCorrectLevel=Y,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(a){return this.parsedData.length},write:function(a){for(var Y=0,K=this.parsedData.length;Y<K;Y++)a.put(this.parsedData[Y],8)}},e.prototype={addData:function(a){var Y=new t(a);this.dataList.push(Y),this.dataCache=null},isDark:function(a,Y){if(a<0||this.moduleCount<=a||Y<0||this.moduleCount<=Y)throw new Error(a+","+Y);return this.modules[a][Y]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,Y){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var K=0;K<this.moduleCount;K++){this.modules[K]=new Array(this.moduleCount);for(var P=0;P<this.moduleCount;P++)this.modules[K][P]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,Y),this.typeNumber>=7&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,Y)},setupPositionProbePattern:function(a,Y){for(var K=-1;K<=7;K++)if(!(a+K<=-1||this.moduleCount<=a+K))for(var P=-1;P<=7;P++)Y+P<=-1||this.moduleCount<=Y+P||(this.modules[a+K][Y+P]=0<=K&&K<=6&&(0==P||6==P)||0<=P&&P<=6&&(0==K||6==K)||2<=K&&K<=4&&2<=P&&P<=4)},getBestMaskPattern:function(){for(var a=0,Y=0,P=0;P<8;P++){this.makeImpl(!0,P);var R=K.getLostPoint(this);(0==P||a>R)&&(a=R,Y=P)}return Y},createMovieClip:function(a,Y,K){var P=a.createEmptyMovieClip(Y,K);this.make();for(var R=0;R<this.modules.length;R++)for(var v=1*R,H=0;H<this.modules[R].length;H++){var M=1*H;this.modules[R][H]&&(P.beginFill(0,100),P.moveTo(M,v),P.lineTo(M+1,v),P.lineTo(M+1,v+1),P.lineTo(M,v+1),P.endFill())}return P},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=a%2==0);for(var Y=8;Y<this.moduleCount-8;Y++)null==this.modules[6][Y]&&(this.modules[6][Y]=Y%2==0)},setupPositionAdjustPattern:function(){for(var a=K.getPatternPosition(this.typeNumber),Y=0;Y<a.length;Y++)for(var P=0;P<a.length;P++){var R=a[Y],v=a[P];if(null==this.modules[R][v])for(var H=-2;H<=2;H++)for(var M=-2;M<=2;M++)this.modules[R+H][v+M]=-2==H||2==H||-2==M||2==M||0==H&&0==M}},setupTypeNumber:function(a){for(var Y=K.getBCHTypeNumber(this.typeNumber),P=0;P<18;P++){var R=!a&&1==(Y>>P&1);this.modules[Math.floor(P/3)][P%3+this.moduleCount-8-3]=R}for(P=0;P<18;P++)R=!a&&1==(Y>>P&1),this.modules[P%3+this.moduleCount-8-3][Math.floor(P/3)]=R},setupTypeInfo:function(a,Y){for(var P=this.errorCorrectLevel<<3|Y,R=K.getBCHTypeInfo(P),v=0;v<15;v++){var H=!a&&1==(R>>v&1);v<6?this.modules[v][8]=H:v<8?this.modules[v+1][8]=H:this.modules[this.moduleCount-15+v][8]=H}for(v=0;v<15;v++)H=!a&&1==(R>>v&1),v<8?this.modules[8][this.moduleCount-v-1]=H:v<9?this.modules[8][15-v-1+1]=H:this.modules[8][15-v-1]=H;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,Y){for(var P=-1,R=this.moduleCount-1,v=7,H=0,M=this.moduleCount-1;M>0;M-=2)for(6==M&&M--;;){for(var I=0;I<2;I++)if(null==this.modules[R][M-I]){var z=!1;H<a.length&&(z=1==(a[H]>>>v&1)),K.getMask(Y,R,M-I)&&(z=!z),this.modules[R][M-I]=z,-1==--v&&(H++,v=7)}if((R+=P)<0||this.moduleCount<=R){R-=P,P=-P;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(a,Y,P){for(var R=y.getRSBlocks(a,Y),v=new g,H=0;H<P.length;H++){var M=P[H];v.put(M.mode,4),v.put(M.getLength(),K.getLengthInBits(M.mode,a)),M.write(v)}var I=0;for(H=0;H<R.length;H++)I+=R[H].dataCount;if(v.getLengthInBits()>8*I)throw new Error("code length overflow. ("+v.getLengthInBits()+">"+8*I+")");for(v.getLengthInBits()+4<=8*I&&v.put(0,4);v.getLengthInBits()%8!=0;)v.putBit(!1);for(;!(v.getLengthInBits()>=8*I||(v.put(e.PAD0,8),v.getLengthInBits()>=8*I));)v.put(e.PAD1,8);return e.createBytes(v,R)},e.createBytes=function(a,Y){for(var P=0,R=0,v=0,H=new Array(Y.length),M=new Array(Y.length),I=0;I<Y.length;I++){var z=Y[I].dataCount,F=Y[I].totalCount-z;R=Math.max(R,z),v=Math.max(v,F),H[I]=new Array(z);for(var N=0;N<H[I].length;N++)H[I][N]=255&a.buffer[N+P];P+=z;var Q=K.getErrorCorrectPolynomial(F),j=new b(H[I],Q.getLength()-1).mod(Q);for(M[I]=new Array(Q.getLength()-1),N=0;N<M[I].length;N++){var U=N+j.getLength()-M[I].length;M[I][N]=U>=0?j.get(U):0}}var D=0;for(N=0;N<Y.length;N++)D+=Y[N].totalCount;var E=new Array(D),B=0;for(N=0;N<R;N++)for(I=0;I<Y.length;I++)N<H[I].length&&(E[B++]=H[I][N]);for(N=0;N<v;N++)for(I=0;I<Y.length;I++)N<M[I].length&&(E[B++]=M[I][N]);return E};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Y={L:1,M:0,Q:3,H:2},K={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var Y=a<<10;K.getBCHDigit(Y)-K.getBCHDigit(K.G15)>=0;)Y^=K.G15<<K.getBCHDigit(Y)-K.getBCHDigit(K.G15);return(a<<10|Y)^K.G15_MASK},getBCHTypeNumber:function(a){for(var Y=a<<12;K.getBCHDigit(Y)-K.getBCHDigit(K.G18)>=0;)Y^=K.G18<<K.getBCHDigit(Y)-K.getBCHDigit(K.G18);return a<<12|Y},getBCHDigit:function(a){for(var Y=0;0!=a;)Y++,a>>>=1;return Y},getPatternPosition:function(a){return K.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,Y,K){switch(a){case 0:return(Y+K)%2==0;case 1:return Y%2==0;case 2:return K%3==0;case 3:return(Y+K)%3==0;case 4:return(Math.floor(Y/2)+Math.floor(K/3))%2==0;case 5:return Y*K%2+Y*K%3==0;case 6:return(Y*K%2+Y*K%3)%2==0;case 7:return(Y*K%3+(Y+K)%2)%2==0;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var Y=new b([1],0),K=0;K<a;K++)Y=Y.multiply(new b([1,P.gexp(K)],0));return Y},getLengthInBits:function(Y,K){if(1<=K&&K<10)switch(Y){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+Y)}else if(K<27)switch(Y){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+Y)}else{if(!(K<41))throw new Error("type:"+K);switch(Y){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+Y)}}},getLostPoint:function(a){for(var Y=a.getModuleCount(),K=0,P=0;P<Y;P++)for(var R=0;R<Y;R++){for(var v=0,H=a.isDark(P,R),M=-1;M<=1;M++)if(!(P+M<0||Y<=P+M))for(var I=-1;I<=1;I++)R+I<0||Y<=R+I||0==M&&0==I||H==a.isDark(P+M,R+I)&&v++;v>5&&(K+=3+v-5)}for(P=0;P<Y-1;P++)for(R=0;R<Y-1;R++){var z=0;a.isDark(P,R)&&z++,a.isDark(P+1,R)&&z++,a.isDark(P,R+1)&&z++,a.isDark(P+1,R+1)&&z++,0!=z&&4!=z||(K+=3)}for(P=0;P<Y;P++)for(R=0;R<Y-6;R++)a.isDark(P,R)&&!a.isDark(P,R+1)&&a.isDark(P,R+2)&&a.isDark(P,R+3)&&a.isDark(P,R+4)&&!a.isDark(P,R+5)&&a.isDark(P,R+6)&&(K+=40);for(R=0;R<Y;R++)for(P=0;P<Y-6;P++)a.isDark(P,R)&&!a.isDark(P+1,R)&&a.isDark(P+2,R)&&a.isDark(P+3,R)&&a.isDark(P+4,R)&&!a.isDark(P+5,R)&&a.isDark(P+6,R)&&(K+=40);var F=0;for(R=0;R<Y;R++)for(P=0;P<Y;P++)a.isDark(P,R)&&F++;return K+Math.abs(100*F/Y/Y-50)/5*10}},P={glog:function(a){if(a<1)throw new Error("glog("+a+")");return P.LOG_TABLE[a]},gexp:function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return P.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},R=0;R<8;R++)P.EXP_TABLE[R]=1<<R;for(R=8;R<256;R++)P.EXP_TABLE[R]=P.EXP_TABLE[R-4]^P.EXP_TABLE[R-5]^P.EXP_TABLE[R-6]^P.EXP_TABLE[R-8];for(R=0;R<255;R++)P.LOG_TABLE[P.EXP_TABLE[R]]=R;function b(a,Y){if(null==a.length)throw new Error(a.length+"/"+Y);for(var K=0;K<a.length&&0==a[K];)K++;this.num=new Array(a.length-K+Y);for(var P=0;P<a.length-K;P++)this.num[P]=a[P+K]}function y(a,Y){this.totalCount=a,this.dataCount=Y}function g(){this.buffer=[],this.length=0}b.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var Y=new Array(this.getLength()+a.getLength()-1),K=0;K<this.getLength();K++)for(var R=0;R<a.getLength();R++)Y[K+R]^=P.gexp(P.glog(this.get(K))+P.glog(a.get(R)));return new b(Y,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var Y=P.glog(this.get(0))-P.glog(a.get(0)),K=new Array(this.getLength()),R=0;R<this.getLength();R++)K[R]=this.get(R);for(R=0;R<a.getLength();R++)K[R]^=P.gexp(P.glog(a.get(R))+Y);return new b(K,0).mod(a)}},y.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],y.getRSBlocks=function(a,Y){var K=y.getRsBlockTable(a,Y);if(null==K)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+Y);for(var P=K.length/3,R=[],v=0;v<P;v++)for(var H=K[3*v+0],M=K[3*v+1],I=K[3*v+2],z=0;z<H;z++)R.push(new y(M,I));return R},y.getRsBlockTable=function(a,K){switch(K){case Y.L:return y.RS_BLOCK_TABLE[4*(a-1)+0];case Y.M:return y.RS_BLOCK_TABLE[4*(a-1)+1];case Y.Q:return y.RS_BLOCK_TABLE[4*(a-1)+2];case Y.H:return y.RS_BLOCK_TABLE[4*(a-1)+3];default:return}},g.prototype={get:function(a){var Y=Math.floor(a/8);return 1==(this.buffer[Y]>>>7-a%8&1)},put:function(a,Y){for(var K=0;K<Y;K++)this.putBit(1==(a>>>Y-K-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var Y=Math.floor(this.length/8);this.buffer.length<=Y&&this.buffer.push(0),a&&(this.buffer[Y]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],H=function(){var t=function(a,Y){this._bIsPainted=!1,this._htOption=Y,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=Y.width,this._elCanvas.height=Y.height,a.appendChild(this._elCanvas),this._el=a,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return t.prototype.draw=function(a){var Y=this._oContext,K=this._htOption,P=a.getModuleCount(),R=K.width/P,v=K.height/P,H=Math.round(R),M=Math.round(v);this.clear();for(var I=0;I<P;I++)for(var z=0;z<P;z++){var F=a.isDark(I,z),N=z*R,Q=I*v;Y.strokeStyle=F?K.colorDark:K.colorLight,Y.lineWidth=1,Y.fillStyle=F?K.colorDark:K.colorLight,Y.fillRect(N,Q,R,v),Y.strokeRect(Math.floor(N)+.5,Math.floor(Q)+.5,H,M),Y.strokeRect(Math.ceil(N)-.5,Math.ceil(Q)-.5,H,M)}this._bIsPainted=!0},t.prototype.isPainted=function(){return this._bIsPainted},t.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},t.prototype.round=function(a){return a?Math.floor(1e3*a)/1e3:a},t}();D=function(a,K){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:Y.H},"string"==typeof K&&(K={text:K}),K)for(var P in K)this._htOption[P]=K[P];"string"==typeof a&&(a=document.getElementById(a)),this._htOption.useSVG&&(H=svgDrawer),this._el=a,this._oQRCode=null,this._oDrawing=new H(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},D.prototype.makeCode=function(a){this._oQRCode=new e(function X(a,K){for(var P=1,R=function(a){var Y=encodeURI(a).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return Y.length+(Y.length!=a?3:0)}(a),H=0,M=v.length;H<=M;H++){var I=0;switch(K){case Y.L:I=v[H][0];break;case Y.M:I=v[H][1];break;case Y.Q:I=v[H][2];break;case Y.H:I=v[H][3]}if(R<=I)break;P++}if(P>v.length)throw new Error("Too long data");return P}(a,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(a),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode)},D.prototype.clear=function(){this._oDrawing.clear()},D.prototype.getCanvas=function(){for(let a=0;a<this._el.children.length;a++){const Y=this._el.children[a];if("CANVAS"===Y.tagName)return Y}return null},D.CorrectLevel=Y}();var B,O=D,y=function(a,Y){Y||(Y={}),"function"==typeof Y&&(Y={cmp:Y});var K,P="boolean"==typeof Y.cycles&&Y.cycles,R=Y.cmp&&(K=Y.cmp,function(a){return function(Y,P){var R={key:Y,value:a[Y]},v={key:P,value:a[P]};return K(R,v)}}),v=[];return function t(a){if(a&&a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),void 0!==a){if("number"==typeof a)return isFinite(a)?""+a:"null";if("object"!=typeof a)return JSON.stringify(a);var Y,K;if(Array.isArray(a)){for(K="[",Y=0;Y<a.length;Y++)Y&&(K+=","),K+=t(a[Y])||"null";return K+"]"}if(null===a)return"null";if(-1!==v.indexOf(a)){if(P)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var H=v.push(a)-1,M=Object.keys(a).sort(R&&R(a));for(K="",Y=0;Y<M.length;Y++){var I=M[Y],z=t(a[I]);z&&(K&&(K+=","),K+=JSON.stringify(I)+":"+z)}return v.splice(H,1),"{"+K+"}"}}(a)},_={exports:{}};_.exports=(B=B||function(a,Y){var R;if("undefined"!=typeof window&&window.crypto&&(R=window.crypto),"undefined"!=typeof self&&self.crypto&&(R=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(R=globalThis.crypto),!R&&"undefined"!=typeof window&&window.msCrypto&&(R=window.msCrypto),!R&&void 0!==P&&P.crypto&&(R=P.crypto),!R)try{R=K(3700)}catch(a){}var n=function(){if(R){if("function"==typeof R.getRandomValues)try{return R.getRandomValues(new Uint32Array(1))[0]}catch(a){}if("function"==typeof R.randomBytes)try{return R.randomBytes(4).readInt32LE()}catch(a){}}throw new Error("Native crypto module could not be used to get secure random number.")},v=Object.create||function(){function t(){}return function(a){var Y;return t.prototype=a,Y=new t,t.prototype=null,Y}}(),H={},M=H.lib={},I=M.Base={extend:function(a){var Y=v(this);return a&&Y.mixIn(a),Y.hasOwnProperty("init")&&this.init!==Y.init||(Y.init=function(){Y.$super.init.apply(this,arguments)}),Y.init.prototype=Y,Y.$super=this,Y},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var Y in a)a.hasOwnProperty(Y)&&(this[Y]=a[Y]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},z=M.WordArray=I.extend({init:function(a,Y){a=this.words=a||[],this.sigBytes=null!=Y?Y:4*a.length},toString:function(a){return(a||N).stringify(this)},concat:function(a){var Y=this.words,K=a.words,P=this.sigBytes,R=a.sigBytes;if(this.clamp(),P%4)for(var v=0;v<R;v++){var H=K[v>>>2]>>>24-v%4*8&255;Y[P+v>>>2]|=H<<24-(P+v)%4*8}else for(var M=0;M<R;M+=4)Y[P+M>>>2]=K[M>>>2];return this.sigBytes+=R,this},clamp:function(){var Y=this.words,K=this.sigBytes;Y[K>>>2]&=4294967295<<32-K%4*8,Y.length=a.ceil(K/4)},clone:function(){var a=I.clone.call(this);return a.words=this.words.slice(0),a},random:function(a){for(var Y=[],K=0;K<a;K+=4)Y.push(n());return new z.init(Y,a)}}),F=H.enc={},N=F.Hex={stringify:function(a){for(var Y=a.words,K=a.sigBytes,P=[],R=0;R<K;R++){var v=Y[R>>>2]>>>24-R%4*8&255;P.push((v>>>4).toString(16)),P.push((15&v).toString(16))}return P.join("")},parse:function(a){for(var Y=a.length,K=[],P=0;P<Y;P+=2)K[P>>>3]|=parseInt(a.substr(P,2),16)<<24-P%8*4;return new z.init(K,Y/2)}},Q=F.Latin1={stringify:function(a){for(var Y=a.words,K=a.sigBytes,P=[],R=0;R<K;R++){var v=Y[R>>>2]>>>24-R%4*8&255;P.push(String.fromCharCode(v))}return P.join("")},parse:function(a){for(var Y=a.length,K=[],P=0;P<Y;P++)K[P>>>2]|=(255&a.charCodeAt(P))<<24-P%4*8;return new z.init(K,Y)}},j=F.Utf8={stringify:function(a){try{return decodeURIComponent(escape(Q.stringify(a)))}catch(a){throw new Error("Malformed UTF-8 data")}},parse:function(a){return Q.parse(unescape(encodeURIComponent(a)))}},U=M.BufferedBlockAlgorithm=I.extend({reset:function(){this._data=new z.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(Y){var K,P=this._data,R=P.words,v=P.sigBytes,H=this.blockSize,M=v/(4*H),I=(M=Y?a.ceil(M):a.max((0|M)-this._minBufferSize,0))*H,F=a.min(4*I,v);if(I){for(var N=0;N<I;N+=H)this._doProcessBlock(R,N);K=R.splice(0,I),P.sigBytes-=F}return new z.init(K,F)},clone:function(){var a=I.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});M.Hasher=U.extend({cfg:I.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){U.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(Y,K){return new a.init(K).finalize(Y)}},_createHmacHelper:function(a){return function(Y,K){return new D.HMAC.init(a,K).finalize(Y)}}});var D=H.algo={};return H}(Math),B);var A={exports:{}}.exports=function(a){return function(){if("function"==typeof ArrayBuffer){var Y=a.lib.WordArray,K=Y.init,P=Y.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var Y=a.byteLength,P=[],R=0;R<Y;R++)P[R>>>2]|=a[R]<<24-R%4*8;K.call(this,P,Y)}else K.apply(this,arguments)};P.prototype=Y}}(),a.lib.WordArray}(_.exports),st={exports:{}}.exports=function(a){return function(Y){var K=a,P=K.lib,R=P.WordArray,v=P.Hasher,H=K.algo,M=[],I=[];!function(){function t(a){for(var K=Y.sqrt(a),P=2;P<=K;P++)if(!(a%P))return!1;return!0}function s(a){return 4294967296*(a-(0|a))|0}for(var a=2,K=0;K<64;)t(a)&&(K<8&&(M[K]=s(Y.pow(a,.5))),I[K]=s(Y.pow(a,1/3)),K++),a++}();var z=[],F=H.SHA256=v.extend({_doReset:function(){this._hash=new R.init(M.slice(0))},_doProcessBlock:function(a,Y){for(var K=this._hash.words,P=K[0],R=K[1],v=K[2],H=K[3],M=K[4],F=K[5],N=K[6],Q=K[7],j=0;j<64;j++){if(j<16)z[j]=0|a[Y+j];else{var U=z[j-15],D=(U<<25|U>>>7)^(U<<14|U>>>18)^U>>>3,E=z[j-2],B=(E<<15|E>>>17)^(E<<13|E>>>19)^E>>>10;z[j]=D+z[j-7]+B+z[j-16]}var O=P&R^P&v^R&v,_=(P<<30|P>>>2)^(P<<19|P>>>13)^(P<<10|P>>>22),A=Q+((M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25))+(M&F^~M&N)+I[j]+z[j];Q=N,N=F,F=M,M=H+A|0,H=v,v=R,R=P,P=A+(_+O)|0}K[0]=K[0]+P|0,K[1]=K[1]+R|0,K[2]=K[2]+v|0,K[3]=K[3]+H|0,K[4]=K[4]+M|0,K[5]=K[5]+F|0,K[6]=K[6]+N|0,K[7]=K[7]+Q|0},_doFinalize:function(){var a=this._data,K=a.words,P=8*this._nDataBytes,R=8*a.sigBytes;return K[R>>>5]|=128<<24-R%32,K[14+(R+64>>>9<<4)]=Y.floor(P/4294967296),K[15+(R+64>>>9<<4)]=P,a.sigBytes=4*K.length,this._process(),this._hash},clone:function(){var a=v.clone.call(this);return a._hash=this._hash.clone(),a}});K.SHA256=v._createHelper(F),K.HmacSHA256=v._createHmacHelper(F)}(Math),a.SHA256}(_.exports);const it="node"===R.CROQUET_PLATFORM;let nt;function G(a){const Y=a.sigBytes,K=a.words,P=new Uint8Array(Y);let R=0,v=0;for(;R<Y;){const a=K[v++];if(P[R++]=(4278190080&a)>>>24,R===Y)break;if(P[R++]=(16711680&a)>>>16,R===Y)break;if(P[R++]=(65280&a)>>>8,R===Y)break;P[R++]=255&a}return P}function S(a){function e(a){const Y=a.indexOf("{"),K=a.lastIndexOf("}");if(-1===Y||-1===K||K<Y)return a;const P=a.slice(0,Y).replace(/\s+/g," ").replace(/\s\(/,"("),R=a.slice(Y+1,K);return`${P.trim()}{${R.trim()}}`}let Y=e(""+a);if(!Y.startsWith("class")){const K=a.prototype;K&&(Y+=Object.getOwnPropertyNames(K).map((a=>`${a}:${e(""+K[a])}`)).join(""))}return Y}function k(a){return btoa(String.fromCharCode(...new Uint8Array(a))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function W(){return I.has("debug","hashing",!1)}nt=globalThis.crypto&&globalThis.crypto.subtle&&"function"==typeof globalThis.crypto.subtle.digest?globalThis.crypto.subtle.digest.bind(globalThis.crypto.subtle):(a,Y)=>{if("SHA-256"!==a)throw Error("Croquet: only SHA-256 available");const K=A.create(Y);return G(st(K)).buffer};const ot={},lt=new TextEncoder;async function V(a){const Y=lt.encode(a),K=await async function(a){return 0===a.length?"47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU":k(await nt("SHA-256",a))}(Y);return W()&&(ot[K]={string:a,buffer:Y}),K}const rt=[],at={},dt=new Set,ct=Date.now();"undefined"==typeof performance&&(window.performance={now:()=>Date.now()-ct});const ut=["simulate","update","render","snapshot"],mt={total:"black",update:"blue",render:"magenta",simulate:"yellow",snapshot:"green",backlog:"red",network:"lightgray"};let pt,Gt,St=null,wt=null,Vt=null,Yt=0,Ct=null,kt=null;const Pt=[];let Ht=0,Mt=!1,Qt=tt(0);const Jt=1e3/60;function $(a){return 20*(1-a/Jt)+60}function tt(a){return{start:a,total:0,items:{},users:0,backlog:0,network:0,latency:0,activity:1e3,connected:Mt}}function et(a){Qt.total=a-Qt.start;const Y=Math.min(120,window.innerWidth);if(Pt.length>=Y&&Pt.splice(0,Pt.length-Y+1),Pt.push(Qt),Pt.length<=1)return;if(!St)return;if(0===St.offsetHeight)return;const K=Pt.slice(1).filter((a=>a.total)),P=K.map((a=>a.total)).reduce(((a,Y)=>a+Y),0)/K.length,R=Math.max(...K.map((a=>a.total)));Math.max(...K.map((a=>Math.max(a.backlog,a.network)))),Ht=1e3,function(a,Y){kt.globalCompositeOperation="copy",kt.fillStyle="rgb(255, 255, 255, 0)",kt.fillRect(0,0,Ct.width,Ct.height),kt.fillStyle="rgb(0, 0, 0, 1)",kt.globalCompositeOperation="source-over";let K=`${Qt.users} users, ${Math.round(1e3/a)} fps`;Y>70&&(K+=` ${Math.ceil(Y).toLocaleString()}ms`),kt.fillText(K,2,15),K=Qt.backlog<100&&Qt.activity<1e3?`latency: ${Qt.latency} ms`:`backlog: ${Qt.backlog<100?"0.0":(Qt.backlog/1e3).toFixed(1)} s`,kt.fillText(K,2,33)}(P,R),pt||function q(a){pt=function(a){const Y=document.createElement("canvas");return Y.width=a.width,Y.height=a.height,Y.style.width="100%",Y.style.position="absolute",Y.style.left="0px",St.querySelector("#innerDiv").appendChild(Y),Y}(a),Gt=pt.getContext("2d"),Gt.strokeStyle="rgba(255, 255, 255, 0.5)";for(let a=0;a<60;a+=Jt){const Y=$(a);Gt.moveTo(0,Y),Gt.lineTo(pt.width,Y),Gt.stroke()}}(wt),Yt===wt.width?(Vt.globalCompositeOperation="copy",Vt.drawImage(wt,1,0,wt.width-1,wt.height,0,0,wt.width-1,wt.height),Vt.globalCompositeOperation="source-over",Vt.fillStyle="transparent",Vt.fillRect(wt.width-1,0,1,wt.height)):Yt++;const o=a=>$(a/Ht*-2*Jt)+5;{const a=Pt[Pt.length-1],Y=Yt-.5;let K=$(0);Vt.beginPath(),Vt.moveTo(Y,K),Vt.lineTo(Y,$(a.total)),Vt.strokeStyle=mt[a.connected?"total":"network"],Vt.stroke(),Vt.beginPath(),Vt.moveTo(Y,K),K=$(a.total);let P=0;for(const R of ut)a.items[R]&&(P+=a.items[R],K=$(P),Vt.lineTo(Y,K),Vt.strokeStyle=mt[R],Vt.stroke(),Vt.beginPath(),Vt.moveTo(Y,K));a.network&&(Vt.beginPath(),Vt.moveTo(Y,o(0)),Vt.lineTo(Y,o(a.network)),Vt.strokeStyle=mt.network,Vt.stroke())}}const jt=[],Dt={};let Et={};const Bt={frames:Pt,animationFrame(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};et(a),Qt=tt(a);for(const[a,K]of Object.entries(Y))this[a](K)},begin(a){const Y=performance.now();Qt.items[a]=(Qt.items[a]||0)-Y;const K=jt[jt.length-1];return K&&(Qt.items[K]+=Y),jt.push(a),Y},end(a){const Y=performance.now();Qt.items[a]+=Y;const K=jt.pop();if(K!==a)throw Error(`Unmatched stats calls: expected end("${K}"), got end("${a}")`);const P=jt[jt.length-1];return P&&(Qt.items[P]-=Y),Y},backlog(a){Qt.backlog=Math.max(a,Qt.backlog)},network(a){Qt.network=a},starvation(a){Qt.network=a},latency(a){Qt.latency=a},activity(a){Qt.activity=a},users(a){Qt.users=a},connected(a){const Y=Mt;Qt.connected=Mt=a,Y&&!Mt&&pt&&(pt.remove(),Gt=null)},networkTraffic:Dt,addNetworkTraffic(a,Y){Dt[a]=(Dt[a]||0)+Y},perSecondTally(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.logMessageStats)for(const[Y,K]of Object.entries(a))Et[Y]=(Et[Y]||0)+K},stepSession(a){let Y=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const K=Math.floor(Date.now()/1e3);if(!window.logMessageStats)return Et={second:K},null;let P=null;if(K!==Et.second){if(Et.second&&Y&&(Et.requestedMessages||Et.sentMessagesTotal)){P={...Et};const a=K-Et.second;1!==a&&(P.sampleSeconds=a),P.sentBundles&&(P.averageDelay=Math.round(10*P.sendDelay/P.sentMessagesTotal)/10,P.averageBundlePayload=Math.round(P.sentBundlePayload/P.sentBundles)),delete P.second,delete P.sendDelay,delete P.sentBundlePayload}Et={second:K}}return P}};globalThis.CROQUETSTATS=Bt;const Ot="ontouchstart"in document.documentElement,At=window.parent!==window,$t=Ot?20:12,qt=Ot?0:15;let te=!1;let ee,se=!1,ie=!1;function ft(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a&&ce.showMessage(a,{...Y,level:"warning"})}function bt(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a&&ce.showMessage(a,{...Y,level:"status"})}function yt(a,Y){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error";console.error(`Error during ${a}`,Y);const P=(Y.stack||"").split("\n").filter((a=>!a.match(/croquet-.*\.min.js/))).join("\n");ce.showMessage(`Error during ${a}: ${Y.message}\n\n${P}`,{level:K,duration:"error"===K?1e4:void 0,stopOnFocus:!0})}try{if(ee=window.localStorage,ee["croquet-debug-persist-allowed"]="true","true"!==ee["croquet-debug-persist-allowed"])throw Error("localStorage not persisted");delete ee["croquet-debug-persist-allowed"]}catch(Mo){console.warn("localStorage not allowed"),ee={}}const ne={get pinned(){return"true"===ee[window.location.pathname+"/croquet-debug-ui-pinned"]},set pinned(a){ee[window.location.pathname+"/croquet-debug-ui-pinned"]=!!a},get activePage(){return ee[window.location.pathname+"/croquet-debug-ui-activePage"]},set activePage(a){ee[window.location.pathname+"/croquet-debug-ui-activePage"]=a}},Zt=a=>{a.preventDefault(),a.stopPropagation()};function Xt(a,Y,K){const P=document.createElement("canvas"),R=P.width=40*$t/12,v=P.height=60,H=P.getContext("2d");H.font="36px Arial",H.textAlign="center",H.textBaseline="middle",H.fillStyle="black",H.fillText(a,R/2,.55*v);const M=document.createElement("button");M.id=Y,M.className="croquet_dock_button";const l=a=>{a.preventDefault(),a.stopPropagation(),K()};return Ot?(M.ontouchstart=l,M.ontouchend=Zt,M.onpointerdown=Zt,M.onpointerup=Zt):(M.onclick=l,M.onpointerdown=Zt,M.onpointerup=Zt),M.appendChild(P),M}function Lt(a,Y){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(;a.firstChild;)a.removeChild(a.firstChild);return new O(a,{text:Y,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:O.CorrectLevel.L,...K})}function xt(){if(!1===ce.root||!1===ce.qrcode)return;if(I.noqr)return;const a=ce.sessionURL;if(!a)return void console.warn("App.sessionURL is not set");const Y=Tt(ce.qrcode);Y&&(Ot||(Y.onclick=Y=>{Y.preventDefault(),Y.stopPropagation(),Y.shiftKey?function(){const a=document.getElementById("croquet_dock");a&&a.classList.toggle("debug")}():window.open(a)}),Lt(Y,a).getCanvas().style.width="100%")}let oe,le,re=0;function Tt(a,Y){if(!1===a)return!1;if(a instanceof Element)return a;if("string"==typeof a){const Y=document.getElementById(a);if(Y)return Y}return Y?Y():null}const ae=new Set;let de=function(){let a=null;const Y=document.getElementsByTagName("link");for(const K of Y)if("canonical"===K.getAttribute("rel")){a=K.getAttribute("href");break}return a||window.location.href}();const ce={get sessionURL(){return de},set sessionURL(a){de=a,xt()},root:null,sync:!0,messages:!1,badge:!1,stats:!1,qrcode:!1,makeWidgetDock:function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(I.nodock)return;const Y=a.debug||I.debug,K=document.getElementById("croquet_dock");K&&K.parentElement.removeChild(K);const P=Tt(ce.root,(()=>document.body));if(!P)return;!function ht(){if(te)return;te=!0;const a=`\n        #croquet_dock { position: fixed; z-index: 2; border: 3px solid white; bottom: 6px; left: 6px; width: 36px; height: 36px; box-sizing: border-box; background: white; opacity: 0.4; transition: all 0.3s ease; }\n        #croquet_dock.active { opacity: 0.95; border-radius: 12px; }\n        #croquet_dock.debug { width: 84px; }\n        #croquet_dock_bar { position: absolute; border: 3px solid white; width: 100%; height: 30px; box-sizing: border-box; background: white; }\n\n        #croquet_badge { position: absolute; width: 72px; height: 24px; top: 50%; transform: translate(0px, -50%); cursor: none; }\n        #croquet_dock.active #croquet_badge { left: 2%; }\n        #croquet_dock:not(.debug) #croquet_badge { display: none; }\n\n        .croquet_dock_button { position: absolute; width: ${$t}%; height: 90%; top: 50%; transform: translate(0px, -50%); border-radius: 20%; }\n        .croquet_dock_button:focus { outline: 0; }\n        .croquet_dock_button canvas { position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; }\n        #croquet_dock:not(.active) .croquet_dock_button { display: none; }\n        #croquet_dock_left { right: ${2+qt+$t+2}% }\n        #croquet_dock:not(.debug) #croquet_dock_left { display: none; }\n        #croquet_dock_right { right: ${2+qt}%; }\n        #croquet_dock:not(.debug) #croquet_dock_right { display: none; }\n        #croquet_dock_pin { right: 2%; }\n        #croquet_dock_pin.pinned { background: #cce6ff; }\n\n        #croquet_dock_content { position: absolute; left: 2px; top: 2px; right: 2px; bottom: 2px; background: white; overflow: hidden; }\n        #croquet_dock.debug:not(.active) #croquet_dock_content { display: none; }\n        #croquet_dock.debug:not(.active) #croquet_dock_content div { display: none; }\n\n        #croquet_qrcode { position: absolute; width: 100%; height: 100%;box-sizing: border-box; cursor: crosshair; }\n        #croquet_dock.active #croquet_qrcode { border: 6px solid white; }\n        #croquet_dock.debug #croquet_qrcode:not(.active) { display: none; }\n        #croquet_qrcode canvas { image-rendering: pixelated; }\n\n        #croquet_stats { position: absolute; width: 70%; height: 90%; left: 15%; top: 5%; opacity: 0.8; font-family: sans-serif; }\n        #croquet_stats:not(.active) { display: none; }\n`,Y=document.createElement("style");Y.innerHTML=a,document.head.insertBefore(Y,document.head.getElementsByTagName("style")[0])}();const R=document.createElement("div");R.id="croquet_dock",Y&&R.classList.add("debug"),At&&!a.iframe&&(R.style.display="none"),P.appendChild(R);const v=document.createElement("div");let H;v.id="croquet_dock_bar",R.appendChild(v),!1!==a.badge&&(H=document.createElement("div"),H.id="croquet_badge",v.appendChild(H),ce.badge=H);const M=document.createElement("div");M.id="croquet_dock_content",R.appendChild(M);const z=[];let F,N;if(!1!==a.qrcode&&ce.sessionURL&&(F=document.createElement("div"),F.id="croquet_qrcode",M.appendChild(F),z.push(F.id),ce.qrcode=F,Y||(ne.activePage=F.id)),!1!==a.stats&&(N=document.createElement("div"),N.id="croquet_stats",M.appendChild(N),z.push(N.id),ce.stats=N),z.length){function X(a){const Y=z.length;let K,P=0;if(ne.activePage){const a=z.indexOf(ne.activePage);a>=0?(P=a,K=document.getElementById(ne.activePage)):ne.activePage=null}const R=z[(P+Y+a)%Y];let v;R===ne.activePage?v=K:(K&&K.classList.remove("active"),v=document.getElementById(R)),v&&v.classList.add("active"),ne.activePage=R}z.length>1&&(v.appendChild(Xt("<","croquet_dock_left",(()=>X(-1)))),v.appendChild(Xt(">","croquet_dock_right",(()=>X(1))))),X(0)}if(!Ot&&!a.alwaysPinned){const j=Xt("","croquet_dock_pin",(()=>{ne.pinned=!ne.pinned,L()})),L=()=>{ne.pinned?j.classList.add("pinned"):j.classList.remove("pinned")};L(),v.appendChild(j)}const f=a=>{R.style.width=`${a}px`;const Y=1.18*a;R.style.height=`${Y}px`;const K=18*a/100;v.style.height=`${K}px`,M.style.top=`${K+2}px`,H&&(H.style.height=.9*K+"px",H.style.width=.9*K*3+"px"),F&&(F.style.border=8*a/200+"px solid white")};let Q=a.fixedSize||200;const w=()=>{R.classList.add("active"),f(Q),setTimeout((()=>R.style.transition="none"),300)},Z=()=>{R.style.transition="",R.classList.remove("active"),R.style.width=R.style.height="",v.style.height="",M.style.top="",H&&(H.style.height=H.style.width=""),F&&(F.style.border="")};if(Ot)Z(),R.ontouchstart=a=>{a.preventDefault(),a.stopPropagation(),R.classList.contains("active")?Z():w()},R.ontouchend=Zt,R.onpointerdown=Zt,R.onpointerup=Zt;else if(a.alwaysPinned?w():(ne.pinned?w():Z(),R.onmouseenter=w,R.onmouseleave=()=>{ne.pinned||Z()}),!a.fixedSize){let U=0;R.addEventListener("wheel",(a=>{a.stopPropagation();const Y=Date.now();if(Y-U<100)return;U=Y;let{deltaY:K}=a;K=Math.sign(K)*Math.min(5,Math.abs(K));const P=.8*Math.min(window.innerWidth,window.innerHeight);Q=Math.max(166,Math.min(P,R.offsetWidth/1.05**K)),f(Q)}),{passive:!0})}},makeSessionWidgets:function(a){!function(a){if(!a||!1===ce.root)return;const Y=Tt(ce.badge);Y&&function vt(a,Y){if(!1===ce.badge)return;const K=function(a){const Y=new E(a),K=["bcdfghjklmnpqrstvwxyz","aeiou"];let P="";for(let a=0;a<5;a++)P+=K[a%2][Y.quick()*K[a%2].length|0];return P}(Y);for(document.title=document.title.replace(/:.*/,""),document.title+=":"+K;a.firstChild;)a.removeChild(a.firstChild);const P=document.createElement("canvas"),R=P.width=120,v=P.height=40;P.style.width="100%",a.appendChild(P);const H=P.getContext("2d"),M=function(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const K=new E(a),P=[];for(let a=0;a<Y;a++)P.push(`hsl(${360*K.quick()}, 50%, 70%)`);return P}(Y,2);H.fillStyle=M[0],H.beginPath(),H.moveTo(0,0),H.lineTo(0,v),H.lineTo(R,0),H.closePath(),H.fill(),H.fillStyle=M[1],H.beginPath(),H.moveTo(R,v),H.lineTo(R,0),H.lineTo(0,v),H.closePath(),H.fill(),H.font="30px Arial",H.textAlign="center",H.textBaseline="middle",H.fillStyle="black",H.fillText(K,R/2,v/2)}(Y,a)}(a),xt(),function(){if(!1===ce.root)return;if(I.nostats)return;const a=Tt(ce.stats);a&&function J(a){for(St=a;a.firstChild;)a.removeChild(a.firstChild);a.style.background="#faf0dc",Ct=document.createElement("canvas"),kt=Ct.getContext("2d"),Ct.id="text_stats",Ct.width=Math.min(140,window.innerWidth),Ct.height=36,Ct.style.width=Ct.width,Ct.style.height=Ct.height,kt.font="9.5pt sans-serif",a.appendChild(Ct),a.title=Object.entries(mt).map((a=>{let[Y,K]=a;return`${K}: ${Y}`})).join("\n"),wt=document.createElement("canvas"),wt.width=Math.min(125,window.innerWidth),wt.height=125,wt.style.width="100%";const Y=document.createElement("div");Y.id="innerDiv",a.appendChild(Y),Y.appendChild(wt),Vt=wt.getContext("2d")}(a)}()},makeQRCanvas(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ce.sessionURL)return null;const Y=Lt(document.createElement("div"),ce.sessionURL,a);return Y&&Y.getCanvas()},clearSessionMoniker:function(){!1!==ce.badge&&(document.title=document.title.replace(/:.*/,""))},showSyncWait(a){!1===ce.root?a=!1:oe||(oe=function Wt(){!function(){if(se)return;se=!0;const a=`\n        ${At?"body { min-height: 100vh }":""}\n        #croquet_spinnerOverlay {\n            z-index: 1000;\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            background-color:#333;\n            opacity:0.9;\n            display:flex;\n            align-items:center;\n            justify-content:center;\n            transition: opacity 1.0s ease-out;\n        }\n        /* https://github.com/lukehaas/css-loaders */\n        @keyframes croquet_dots {\n            0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em; }\n            40% { box-shadow: 0 2.5em 0 0; }\n        }\n        #croquet_loader,\n        #croquet_loader::before,\n        #croquet_loader::after {\n          border-radius: 50%;\n          width: 2.5em;\n          height: 2.5em;\n          animation: croquet_dots 1.8s infinite ease-in-out;\n        }\n        #croquet_loader {\n          color: #fff;\n          font-size: 10px;\n          margin: 80px auto;\n          position: relative;\n          text-indent: -9999em;\n          animation-delay: -0.16s;\n        }\n        #croquet_loader::before,\n        #croquet_loader::after {\n          content: '';\n          position: absolute;\n          top: 0;\n        }\n        #croquet_loader::before { left: -3.5em; animation-delay: -0.32s; }\n        #croquet_loader::after { left: 3.5em; }\n        #croquet_spinnerOverlay.croquet_error>*,\n        #croquet_spinnerOverlay.croquet_error>*::before,\n        #croquet_spinnerOverlay.croquet_error>*::after {\n            color: #f00;\n        }\n        #croquet_spinnerOverlay.croquet_fatal>*,\n        #croquet_spinnerOverlay.croquet_fatal>*::before,\n        #croquet_spinnerOverlay.croquet_fatal>*::after {\n            color: #f00;\n            box-shadow: 0 2.5em 0 0 !important;\n            animation: none !important;\n        }\n`,Y=document.createElement("style");Y.innerHTML=a,document.head.insertBefore(Y,document.head.getElementsByTagName("style")[0])}();const a=document.createElement("div");a.id="croquet_spinnerOverlay";const Y=document.createElement("div");return Y.id="croquet_loader",Y.innerText="Catching up...",a.appendChild(Y),a}()),function(a){if(le!==a&&("string"!=typeof le||!0!==a))if(!1===ce.sync&&(a=!1),le=a,a)clearTimeout(re),re=setTimeout((()=>{le&&(Tt(ce.root,(()=>document.body)).appendChild(oe),oe.style.opacity=.9,oe.className="error"===le?"croquet_error":"fatal"===le?"croquet_fatal":"")}),500);else{if(!oe)return;clearTimeout(re),oe.style.opacity=0,oe.className="",re=setTimeout((()=>{le||oe.parentElement&&oe.parentElement.removeChild(oe)}),500)}}(a)},messageFunction:function(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const K=Y.level;let P;return"error"===K?(P="orangered,red",console.error(a)):"warning"===K?(P="gold,orange",console.warn(a)):P="silver,gray",function gt(a,Y){const K=Tt(ce.root,(()=>document.body));if(!1===K)return null;!function(){if(ie)return;ie=!0;let a="/*!\n        * Toastify js 1.5.0\n        * https://github.com/apvarun/toastify-js\n        * @license MIT licensed\n        *\n        * Copyright (C) 2018 Varun A P\n        */\n        .toastify {\n            padding: 12px 20px;\n            color: #ffffff;\n            display: inline-block;\n            box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);\n            background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);\n            background: linear-gradient(135deg, #73a5ff, #5477f5);\n            position: fixed;\n            opacity: 0;\n            transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);\n            border-radius: 2px;\n            cursor: pointer;\n            text-decoration: none;\n            max-width: calc(50% - 20px);\n            z-index: 2147483647;\n        }\n        .toastify.on {\n            opacity: 1;\n        }\n        .toast-close {\n            opacity: 0.4;\n            padding: 0 5px;\n        }\n        .toastify-right {\n            right: 15px;\n        }\n        .toastify-left {\n            left: 15px;\n        }\n        .toastify-top {\n            top: -150px;\n        }\n        .toastify-bottom {\n            bottom: -150px;\n        }\n        .toastify-rounded {\n            border-radius: 25px;\n        }\n        .toastify-avatar {\n            width: 1.5em;\n            height: 1.5em;\n            margin: 0 5px;\n            border-radius: 2px;\n        }\n        @media only screen and (max-width: 360px) {\n            .toastify-right, .toastify-left {\n                margin-left: auto;\n                margin-right: auto;\n                left: 0;\n                right: 0;\n                max-width: fit-content;\n            }\n        }\n";a+="\n        .toastify {\n            font-family: sans-serif;\n            border-radius: 8px;\n        }\n\n        .toastify-center {\n            margin-left: auto;\n            margin-right: auto;\n            left: 0;\n            right: 0;\n            max-width: fit-content;\n            max-width: -moz-fit-content;\n        }\n";const Y=document.createElement("style");Y.innerHTML="/*!\n        * Toastify js 1.5.0\n        * https://github.com/apvarun/toastify-js\n        * @license MIT licensed\n        *\n        * Copyright (C) 2018 Varun A P\n        */\n        .toastify {\n            padding: 12px 20px;\n            color: #ffffff;\n            display: inline-block;\n            box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);\n            background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);\n            background: linear-gradient(135deg, #73a5ff, #5477f5);\n            position: fixed;\n            opacity: 0;\n            transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);\n            border-radius: 2px;\n            cursor: pointer;\n            text-decoration: none;\n            max-width: calc(50% - 20px);\n            z-index: 2147483647;\n        }\n        .toastify.on {\n            opacity: 1;\n        }\n        .toast-close {\n            opacity: 0.4;\n            padding: 0 5px;\n        }\n        .toastify-right {\n            right: 15px;\n        }\n        .toastify-left {\n            left: 15px;\n        }\n        .toastify-top {\n            top: -150px;\n        }\n        .toastify-bottom {\n            bottom: -150px;\n        }\n        .toastify-rounded {\n            border-radius: 25px;\n        }\n        .toastify-avatar {\n            width: 1.5em;\n            height: 1.5em;\n            margin: 0 5px;\n            border-radius: 2px;\n        }\n        @media only screen and (max-width: 360px) {\n            .toastify-right, .toastify-left {\n                margin-left: auto;\n                margin-right: auto;\n                left: 0;\n                right: 0;\n                max-width: fit-content;\n            }\n        }\n\n        .toastify {\n            font-family: sans-serif;\n            border-radius: 8px;\n        }\n\n        .toastify-center {\n            margin-left: auto;\n            margin-right: auto;\n            left: 0;\n            right: 0;\n            max-width: fit-content;\n            max-width: -moz-fit-content;\n        }\n",document.head.insertBefore(Y,document.head.getElementsByTagName("style")[0])}();const P={text:a,duration:3e3,gravity:"bottom",position:"right",stopOnFocus:!0,...Y};let R;return K instanceof Element&&K!==document.body?(R=K.id,R||(K.id=R="_croquetToastParent")):"string"==typeof K&&(R=K),R&&(P.selector=R),j(P).showToast()}(a,{style:{background:`linear-gradient(90deg,${P})`},...Y})},showMessage(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("once"===Y.only){if(ae.has(a))return null;ae.add(a)}return"fatal"===Y.level&&(Y.level="error",Y.showSyncWait="fatal"),Y.showSyncWait&&("fatal"!==Y.showSyncWait||Y.duration||(Y.duration=-1),ce.showSyncWait(Y.showSyncWait)),I.nomessages||!1===ce.root||!1===ce.messages||!ce.messageFunction?("warning"===Y.level&&console.warn(a),"error"===Y.level&&console.error(a),null):ce.messageFunction(a,Y)},isCroquetHost:a=>a.endsWith("croquet.io")||["localhost","127.0.0.1","[::1]"].includes(a)||a.endsWith("ngrok.io"),referrerURL(){const a=new URL(ce.sessionURL),Y=this.isCroquetHost(a.hostname);return`${a.protocol}//${a.host}${a.pathname}${Y?a.search:""}`},autoSession(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"q"};"string"==typeof a&&(a={key:a}),a||(a={});const Y=a.key||"q",K=new URL(ce.sessionURL);let P="";const R=K.search.slice(1).split("&"),v=R.find((a=>a.split("=")[0]===Y));if(v?P=v.replace(/[^=]*=/,""):(P=R.find((a=>!a.includes("="))),P||(P=K.hash.slice(1),P&&(K.hash="",K.search?K.searchParams.set(Y,P):K.search=P))),P)try{P=decodeURIComponent(P)}catch(a){}else P=Math.floor(Math.random()*36**10).toString(36),K.searchParams.set(Y,P);const H=K.toString("");window.location.href!==H&&(window.history.replaceState({},"",H),ce.sessionURL=H),I.has("debug","session")&&console.log(`Croquet.App.autoSession: "${P}"`);const M=Promise.resolve(P);return M[Symbol.toPrimitive]=()=>(console.warn("Deprecated: Croquet.App.autoSession() return value used directly. It returns a promise now!"),P),M},autoPassword(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"pw",scrub:!1,keyless:!1};const Y=a.key||"pw",K=a.scrub&&!I.has("debug","password"),P=a.keyless,R=new URL(ce.sessionURL);let v="";const H=R.hash.slice(1);if(H){const a=H.split("&"),M=a.find((a=>a.split("=")[0]===Y));M?(v=M.replace(/[^=]*=/,""),v&&K&&(R.hash=a.filter((a=>a.split("=")[0]!==Y)).join("&"))):P&&(v=a.find((a=>!a.includes("="))),v&&K&&(R.hash=a.filter((a=>a!==v)).join("&")))}if(!v){const a=new Uint8Array(16);window.crypto.getRandomValues(a),v=k(a.buffer),R.hash=H?`${H}&${Y}=${v}`:P?v:`${Y}=${v}`,ce.sessionURL=R.href,K&&(R.hash=H)}if(I.has("debug","session")&&console.log(`Croquet.App.sessionUrl: ${ce.sessionURL}`),window.location.href!==R.href&&window.history.replaceState({},"",R.href),v)try{v=decodeURIComponent(v)}catch(a){}I.has("debug","session")&&console.log(`Croquet.App.autoPassword: "${v}"`);const M=Promise.resolve(v);return M[Symbol.toPrimitive]=()=>(console.warn("Deprecated: Croquet.App.autoPassword() return value used directly. It returns a promise now!"),v),M}};function Rt(a,Y){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,P="none";for(const R of["immediate","queued","oncePerFrame","oncePerFrameWhileSynced"])for(const v of a[R])v.for===Y?null===K||v.unbound===K?a[R].delete(v):P="subscriber":"none"===P&&(P="others");return P}const he=new class{constructor(){this.subscriptions={},this.subscribers=new Map,this.queuedEvents=[],this.perFrameEvents=new Map,this.perSyncedFrameEvents=new Map,this.subscriberIds=0}register(a){return"V"+ ++this.subscriberIds}deregister(a){}addSubscription(a,Y,K,P,R){if("vote"===R)return void this.addSubscription(a,Y+"#__vote",K,P,"immediate");const v=a+":"+Y,H=P;H.for=K;let M=this.subscriptions[v];if(M||(M=this.subscriptions[v]={immediate:new Set,queued:new Set,oncePerFrame:new Set,oncePerFrameWhileSynced:new Set}),!M[R])throw Error(`Unknown subscribe() option: handling="${R}"`);M[R].add(H);let I=this.subscribers.get(K);I||this.subscribers.set(K,I=new Set),I.add(v)}removeSubscription(a,Y,K){let P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const R=a+":"+Y,v=this.subscriptions[R];if(v){const a=Rt(v,K,P);if(a||delete this.subscriptions[R],"subscriber"!==a){const a=this.subscribers.get(K);a.delete(R),0===a.size&&this.subscribers.delete(K)}}Y.endsWith("#__vote")||this.removeSubscription(a,Y+"#__vote",K)}removeAllSubscriptionsFor(a){const Y=this.subscribers.get(a);if(Y){for(const K of Y){const Y=this.subscriptions[K];Y?"none"===Rt(Y,a)&&delete this.subscriptions[K]:console.error(`Croquet: topic ${K} not found in subscriptions table for ${a} during removeAllSubscriptionsFor()`)}this.subscribers.delete(a)}}handleEvent(a,Y){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a=>a();const P=this.subscriptions[a];P&&(P.queued.size>0&&this.queuedEvents.push({topic:a,data:Y}),P.oncePerFrame.size>0&&this.perFrameEvents.set(a,Y),P.oncePerFrameWhileSynced.size>0&&this.perSyncedFrameEvents.set(a,Y),P.immediate.size>0&&K((()=>{for(const K of P.immediate)try{K(Y)}catch(Y){console.error(Y),console.warn(`Croquet: error "${Y.message}" in "immediate" subscription ${a}`)}})))}processFrameEvents(a,Y){let K=0;const i=(a,Y,P)=>{const R=this.subscriptions[Y];if(R)for(const v of R[a]){try{v(P)}catch(K){console.error(K),console.warn(`Croquet: error "${K.message}" in "${a}" subscription ${Y}`)}K++}};for(const{topic:a,data:Y}of this.queuedEvents)i("queued",a,Y);if(this.queuedEvents.length=0,a){for(const[a,Y]of this.perFrameEvents)i("oncePerFrame",a,Y);if(this.perFrameEvents.clear(),Y){for(const[a,Y]of this.perSyncedFrameEvents)i("oncePerFrameWhileSynced",a,Y);this.perSyncedFrameEvents.clear()}for(const{topic:a,data:Y}of this.queuedEvents)i("queued",a,Y);this.queuedEvents.length=0}return K}};let ue={get subscribe(){return ue={subscribe:I.has("debug","subscribe",!1)},ue.subscribe}};class It{constructor(a){this.vm=a}register(a){return this.vm.registerModel(a)}deregister(a){this.vm.deregisterModel(a.id)}publish(a,Y,K){this.vm.publishFromModel(K,a,Y)}subscribe(a,Y,K,P){return ue.subscribe&&console.log(`Model.subscribe("${Y}:${K}", ${a} ${(""+P).replace(/\([\s\S]*/,"")})`),this.vm.addSubscription(a,Y,K,P)}unsubscribe(a,Y,K){let P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";ue.subscribe&&console.log(`Model.unsubscribe(${Y}:${K}", ${a} ${(""+P).replace(/\([\s\S]*/,"")})`),this.vm.removeSubscription(a,Y,K,P)}unsubscribeAll(a){ue.subscribe&&console.log(`Model.unsubscribeAll(${a} ${a.id})`),this.vm.removeAllSubscriptionsFor(a)}future(a,Y,K,P){if(me&&me.equal(this))return this.vm.future(a,Y,K,P);throw Error(`Model.future() called from outside: ${a}`)}cancelFuture(a,Y){if(me&&me.equal(this))return this.vm.cancelFuture(a,Y);throw Error(`Model.cancelFuture() called from outside: ${a}`)}random(){return this.vm.random()}now(){return this.vm.time}equal(a){return a instanceof It&&a.vm===this.vm}isViewRealm(){return!1}}class Kt{constructor(a){this.vm=a}register(a){return he.register(a)}deregister(a){he.deregister(a)}publish(a,Y,K){this.vm.publishFromView(K,a,Y)}subscribe(a,Y,K,P){let R=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"queued";ue.subscribe&&console.log(`View.subscribe("${P}:${a}", ${Y} ${K?K.name||(""+K).replace(/\([\s\S]*/,""):""+K} [${R}])`),he.addSubscription(P,a,Y,K,R)}unsubscribe(a,Y){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,P=arguments.length>3?arguments[3]:void 0;ue.subscribe&&console.log(`View.unsubscribe("${P}:${a}", ${Y} ${K?K.name||(""+K).replace(/\([\s\S]*/,""):"*"})`),he.removeSubscription(P,a,Y,K)}unsubscribeAll(a){ue.subscribe&&console.log(`View.unsubscribeAll(${a})`),he.removeAllSubscriptionsFor(a)}future(a,Y){const K=this.vm;return new Proxy(a,{get(P,R){if("function"==typeof a[R])return new Proxy(a[R],{apply(P,v,H){setTimeout((()=>{a.id&&Ft(K,(()=>a[R](...H)),!0)}),Y)}});throw Error("Tried to call "+R+"() on future of "+Object.getPrototypeOf(a).constructor.name+" which is not a function")}})}random(){return Math.random()}now(){return this.vm.time}externalNow(){return this.vm.controller.reflectorTime}extrapolatedNow(){return this.vm.controller.extrapolatedTime}isSynced(){return!!this.vm.controller.synced}equal(a){return a instanceof Kt&&a.vm===this.vm}isViewRealm(){return!0}}let me=null;function zt(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tried to execute code that requires realm outside of realm.";if(!me&&a)throw Error(a);return me}function Nt(a,Y){if(null!==me)throw Error("Can't switch realms from inside realm");try{return me=new It(a),Y()}finally{me=null}}function Ft(a,Y){if(null!==me&&!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))throw Error("Can't switch realms from inside realm");const K=me;try{return me=new Kt(a),Y()}finally{me=K}}var be,_t=function(a){return a!=a},pe=Math.sqrt,ye=.7853981633974483,Ut=function(a){var Y,K,P,R,v;if(_t(a))return NaN;if(a>0?P=a:(Y=!0,P=-a),P>1)return NaN;if(P>.625)R=(K=1-P)*function(a){var Y,K;return 0===a?.08333333333333809:((a<0?-a:a)<=1?(Y=28.536655482610616+a*(a*(6.968710824104713+a*(.002967721961301243*a-.5634242780008963))-25.56901049652825),K=342.43986579130785+a*(a*(147.0656354026815+a*(1*a-21.947795316429207))-383.8770957603691)):(Y=.002967721961301243+(a=1/a)*(a*(6.968710824104713+a*(28.536655482610616*a-25.56901049652825))-.5634242780008963),K=1+a*(a*(147.0656354026815+a*(342.43986579130785*a-383.8770957603691))-21.947795316429207)),Y/K)}(K),K=pe(K+K),v=ye-K,v-=K=K*R-6123233995736766e-32,v+=ye;else{if(P<1e-8)return a;v=P*(v=(K=P*P)*function(a){var Y,K;return 0===a?.16666666666666713:((a<0?-a:a)<=1?(Y=a*(19.562619833175948+a*(a*(5.444622390564711+a*(.004253011369004428*a-.6019598008014124))-16.262479672107002))-8.198089802484825,K=a*(139.51056146574857+a*(a*(70.49610280856842+a*(1*a-14.740913729888538))-147.1791292232726))-49.18853881490881):(Y=.004253011369004428+(a=1/a)*(a*(5.444622390564711+a*(a*(19.562619833175948+-8.198089802484825*a)-16.262479672107002))-.6019598008014124),K=1+a*(a*(70.49610280856842+a*(a*(139.51056146574857+-49.18853881490881*a)-147.1791292232726))-14.740913729888538)),Y/K)}(K))+P}return Y?-v:v},Ze="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Xe=Object.prototype.toString,fe=Object.prototype.hasOwnProperty,Ge="function"==typeof Symbol?Symbol.toStringTag:"",Le=Ze&&"symbol"==typeof Symbol.toStringTag?function(a){var Y,K,P;if(null==a)return Xe.call(a);K=a[Ge],Y=function(a,Y){return null!=a&&fe.call(a,Y)}(a,Ge);try{a[Ge]=void 0}catch(Y){return Xe.call(a)}return P=Xe.call(a),Y?a[Ge]=K:delete a[Ge],P}:function(a){return Xe.call(a)},xe="function"==typeof Uint32Array,We="function"==typeof Uint32Array?Uint32Array:null,Se="function"==typeof Uint32Array?Uint32Array:null,ge=function(){var a,Y;if("function"!=typeof We)return!1;try{a=function(a){return xe&&a instanceof Uint32Array||"[object Uint32Array]"===Le(a)}(Y=new We(Y=[1,3.14,-3.14,4294967296,4294967297]))&&1===Y[0]&&3===Y[1]&&4294967293===Y[2]&&0===Y[3]&&1===Y[4]}catch(Y){a=!1}return a}()?Se:function(){throw new Error("not implemented")},we="function"==typeof Float64Array,Ve="function"==typeof Float64Array?Float64Array:null,Te="function"==typeof Float64Array?Float64Array:null,Ye=function(){var a,Y;if("function"!=typeof Ve)return!1;try{a=function(a){return we&&a instanceof Float64Array||"[object Float64Array]"===Le(a)}(Y=new Ve([1,3.14,-3.14,NaN]))&&1===Y[0]&&3.14===Y[1]&&-3.14===Y[2]&&Y[3]!=Y[3]}catch(Y){a=!1}return a}()?Te:function(){throw new Error("not implemented")},Ce="function"==typeof Uint8Array,ke="function"==typeof Uint8Array?Uint8Array:null,Pe="function"==typeof Uint8Array?Uint8Array:null,Re=function(){var a,Y;if("function"!=typeof ke)return!1;try{a=function(a){return Ce&&a instanceof Uint8Array||"[object Uint8Array]"===Le(a)}(Y=new ke(Y=[1,3.14,-3.14,256,257]))&&1===Y[0]&&3===Y[1]&&253===Y[2]&&0===Y[3]&&1===Y[4]}catch(Y){a=!1}return a}()?Pe:function(){throw new Error("not implemented")},ve="function"==typeof Uint16Array,He="function"==typeof Uint16Array?Uint16Array:null,Me="function"==typeof Uint16Array?Uint16Array:null,Ie={uint16:function(){var a,Y;if("function"!=typeof He)return!1;try{a=function(a){return ve&&a instanceof Uint16Array||"[object Uint16Array]"===Le(a)}(Y=new He(Y=[1,3.14,-3.14,65536,65537]))&&1===Y[0]&&3===Y[1]&&65533===Y[2]&&0===Y[3]&&1===Y[4]}catch(Y){a=!1}return a}()?Me:function(){throw new Error("not implemented")},uint8:Re};(be=new Ie.uint16(1))[0]=4660;var ze,Fe,Ne=52===new Ie.uint8(be.buffer)[0],Qe=!0===Ne?1:0,Je=new Ye(1),je=new ge(Je.buffer),Ke=function(a){return Je[0]=a,je[Qe]},Ue=!0===Ne?1:0,Ee=new Ye(1),Be=new ge(Ee.buffer),_e=function(a,Y){return Ee[0]=a,Be[Ue]=Y>>>0,Ee[0]},Oe=Number.POSITIVE_INFINITY,Ae=Number.NEGATIVE_INFINITY,$e=.6931471803691238,qe=1.9082149292705877e-10,De=function(a){var Y,K,P,R,v,H,M,I,z,F;if(a<-1||_t(a))return NaN;if(-1===a)return Ae;if(a===Oe)return a;if(0===a)return a;if(F=1,(P=a<0?-a:a)<.41421356237309503){if(P<1.862645149230957e-9)return P<5551115123125783e-32?a:a-a*a*.5;a>-.2928932188134525&&(F=0,R=a,K=1)}return 0!==F&&(P<9007199254740992?(v=(F=((K=Ke(z=1+a))>>20)-1023)>0?1-(z-a):a-(z-1),v/=z):(F=((K=Ke(z=a))>>20)-1023,v=0),(K&=1048575)<434334?z=_e(z,1072693248|K):(F+=1,z=_e(z,1071644672|K),K=1048576-K>>2),R=z-1),Y=.5*R*R,0===K?0===R?F*$e+(v+=F*qe):F*$e-((I=Y*(1-.6666666666666666*R))-(F*qe+v)-R):(I=(M=(H=R/(2+R))*H)*function(a){return 0===a?.6666666666666735:.6666666666666735+a*(.3999999999940942+a*(.2857142874366239+a*(.22222198432149784+a*(.1818357216161805+a*(.15313837699209373+.14798198605116586*a)))))}(M),0===F?R-(Y-H*(Y+I)):F*$e-(Y-(H*(Y+I)+(F*qe+v))-R))},es=.6931471805599453,is=.6931471803691238,ns=1.9082149292705877e-10,ts=function(a){var Y,K,P,R,v,H,M,I,z,F,N;return 0===a?Ae:_t(a)||a<0?NaN:(R=0,(K=Ke(a))<1048576&&(R-=54,K=Ke(a*=0x40000000000000)),K>=2146435072?a+a:(R+=(K>>20)-1023|0,R+=(M=614244+(K&=1048575)&1048576|0)>>20|0,H=(a=_e(a,K|1072693248^M))-1,(1048575&2+K)<3?0===H?0===R?0:R*is+R*ns:(v=H*H*(.5-.3333333333333333*H),0===R?H-v:R*is-(v-R*ns-H)):(M=K-398458|0,I=440401-K|0,P=(F=(N=(z=H/(2+H))*z)*N)*function(a){return 0===a?.3999999999940942:.3999999999940942+a*(.22222198432149784+.15313837699209373*a)}(F),v=N*function(a){return 0===a?.6666666666666735:.6666666666666735+a*(.2857142874366239+a*(.1818357216161805+.14798198605116586*a))}(F)+P,(M|=I)>0?(Y=.5*H*H,0===R?H-(Y-z*(Y+v)):R*is-(Y-(z*(Y+v)+R*ns)-H)):0===R?H-z*(H-v):R*is-(z*(H-v)-R*ns-H))))},ss=function(a){return a===Oe||a===Ae},os=1.5707963267948966,as=function(a){var Y,K,P,R;return _t(a)||0===a?a:a===Oe?os:a===Ae?-os:(a<0&&(K=!0,a=-a),Y=0,a>2.414213562373095?(P=os,Y=1,a=-1/a):a<=.66?P=0:(P=ye,Y=2,a=(a-1)/(a+1)),R=a*(R=(R=a*a)*function(a){return 0===a?-64.85021904942025:a*(a*(a*(-.8750608600031904*a-16.157537187333652)-75.00855792314705)-122.88666844901361)-64.85021904942025}(R)/function(a){return 0===a?194.5506571482614:194.5506571482614+a*(485.3903996359137+a*(432.88106049129027+a*(165.02700983169885+a*(24.858464901423062+1*a))))}(R))+a,2===Y?R+=3061616997868383e-32:1===Y&&(R+=6123233995736766e-32),P+=R,K?-P:P)};!0===Ne?(ze=1,Fe=0):(ze=0,Fe=1);var ls,rs,ds={HIGH:ze,LOW:Fe},cs=new Ye(1),hs=new ge(cs.buffer),us=ds.HIGH,ms=ds.LOW,bs=function(a,Y){return cs[0]=Y,a[0]=hs[us],a[1]=hs[ms],a},ws=function(a,Y){return 1===arguments.length?bs([0,0],a):bs(a,Y)};!0===Ne?(ls=1,rs=0):(ls=0,rs=1);var ps={HIGH:ls,LOW:rs},ys=new Ye(1),Zs=new ge(ys.buffer),Xs=ps.HIGH,fs=ps.LOW,Ss=function(a,Y){return Zs[Xs]=a,Zs[fs]=Y,ys[0]},Gs=[0,0],Ws=function(a,Y){var K,P;return ws(Gs,a),K=Gs[0],K&=2147483647,P=Ke(Y),Ss(K|=P&=2147483648,Gs[1])},Ls=3.141592653589793,xs=22250738585072014e-324,Ms=function(a){var Y,K,P,R,v;return _t(a)||ss(a)||0===a?a:(K=-2147483648&(P=Ke(a)),P&=2147483647,v=0,a<xs?(v=0x40000000000000,Y=Ke(v*=a),v=Ss(K|(Y=(2147483647&Y)/3+696219795),0)):v=_e(v,K|(Y=P/3+715094163)),v*=function(a){return 0===a?1.87595182427177:1.87595182427177+a*(a*(1.6214297201053545+a*(.14599619288661245*a-.758397934778766))-1.8849797954337717)}(R=v*v*(v/a)),Y=Ke(v),v=Ss(Y+1,0),v+=v*(R=((R=a/(v*v))-v)/(v+v+R)))},Hs=function(a,Y){var K,P,R,v;return R=(v=a*a)*v,P=v*function(a){return 0===a?.0416666666666666:.0416666666666666+a*(2480158728947673e-20*a-.001388888888887411)}(v),P+=R*R*function(a){return 0===a?-2.7557314351390663e-7:a*(2.087572321298175e-9+-11359647557788195e-27*a)-2.7557314351390663e-7}(v),(R=1-(K=.5*v))+(1-R-K+(v*P-a*Y))},gs=-.16666666666666632,Ns=function(a,Y){var K,P,R;return K=.00833333333332249+(R=a*a)*(27557313707070068e-22*R-.0001984126982985795)+R*(R*R)*(1.58969099521155e-10*R-2.5050760253406863e-8),P=R*a,0===Y?a+P*(gs+R*K):a-(R*(.5*Y-P*K)-Y-P*gs)},Vs=!0===Ne?0:1,Ts=new Ye(1),Ys=new ge(Ts.buffer),Cs=Math.floor,Js=function(a){return a<0?-a:0===a?0:a},Us=function(a,Y){return _t(Y)||ss(Y)?(a[0]=Y,a[1]=0,a):0!==Y&&Js(Y)<xs?(a[0]=4503599627370496*Y,a[1]=-52,a):(a[0]=Y,a[1]=0,a)},Bs=function(a){var Y=Ke(a);return(Y=(2146435072&Y)>>>20)-1023|0},Ks=[0,0],ks=[0,0],ti=function(a,Y){var K,P;return 0===a||_t(a)||ss(a)?a:(function(a,Y){1===arguments.length?Us([0,0],a):Us(a,Y)}(Ks,a),Y+=Ks[1],(Y+=Bs(a=Ks[0]))<-1074?Ws(0,a):Y>1023?a<0?Ae:Oe:(Y<=-1023?(Y+=52,P=2220446049250313e-31):P=1,ws(ks,a),K=ks[0],K&=2148532223,P*Ss(K|=Y+1023<<20,ks[1])))},Ps=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],Rs=[1.570796251296997,7.549789415861596e-8,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],vs=5.960464477539063e-8,Is=li(new Array(20)),zs=li(new Array(20)),Fs=li(new Array(20)),Qs=li(new Array(20));function li(a){var Y,K=a.length;for(Y=0;Y<K;Y++)a[Y]=0;return a}function ci(a,Y,K,P,R,v,H,M,I){var z,F,N,Q,j,U,D,E,B;for(Q=v,B=P[K],E=K,j=0;E>0;j++)F=vs*B|0,Qs[j]=B-16777216*F|0,B=P[E-1]+F,E-=1;if(B=ti(B,R),B-=8*Cs(.125*B),B-=D=0|B,N=0,R>0?(D+=j=Qs[K-1]>>24-R,Qs[K-1]-=j<<24-R,N=Qs[K-1]>>23-R):0===R?N=Qs[K-1]>>23:B>=.5&&(N=2),N>0){for(D+=1,z=0,j=0;j<K;j++)E=Qs[j],0===z?0!==E&&(z=1,Qs[j]=16777216-E):Qs[j]=16777215-E;if(R>0)switch(R){case 1:Qs[K-1]&=8388607;break;case 2:Qs[K-1]&=4194303}2===N&&(B=1-B,0!==z&&(B-=ti(1,R)))}if(0===B){for(E=0,j=K-1;j>=v;j--)E|=Qs[j];if(0===E){for(U=1;0===Qs[v-U];U++);for(j=K+1;j<=K+U;j++){for(I[M+j]=Ps[H+j],F=0,E=0;E<=M;E++)F+=a[E]*I[M+(j-E)];P[j]=F}return ci(a,Y,K+=U,P,R,v,H,M,I)}}if(0===B)for(K-=1,R-=24;0===Qs[K];)K-=1,R-=24;else(B=ti(B,-R))>=16777216?(F=vs*B|0,Qs[K]=B-16777216*F|0,R+=24,Qs[K+=1]=F):Qs[K]=0|B;for(F=ti(1,R),j=K;j>=0;j--)P[j]=F*Qs[j],F*=vs;for(j=K;j>=0;j--){for(F=0,U=0;U<=Q&&U<=K-j;U++)F+=Rs[U]*P[j+U];Fs[K-j]=F}for(F=0,j=K;j>=0;j--)F+=Fs[j];for(Y[0]=0===N?F:-F,F=Fs[0]-F,j=1;j<=K;j++)F+=Fs[j];return Y[1]=0===N?F:-F,7&D}var di=function(a,Y,K,P){var R,v,H,M,I,z,F;for((v=(K-3)/24|0)<0&&(v=0),M=K-24*(v+1),z=v-(H=P-1),F=H+4,I=0;I<=F;I++)Is[I]=z<0?0:Ps[z],z+=1;for(I=0;I<=4;I++){for(R=0,z=0;z<=H;z++)R+=a[z]*Is[H+(I-z)];zs[I]=R}return ci(a,Y,4,zs,M,4,v,H,Is)},js=Math.round,ui=function(a,Y,K){var P,R,v,H,M;return v=a-1.5707963267341256*(P=js(.6366197723675814*a)),H=6077100506506192e-26*P,M=Y>>20|0,K[0]=v-H,M-(Ke(K[0])>>20&2047)>16&&(H=20222662487959506e-37*P-((R=v)-(v=R-(H=6077100506303966e-26*P))-H),K[0]=v-H,M-(Ke(K[0])>>20&2047)>49&&(H=84784276603689e-45*P-((R=v)-(v=R-(H=20222662487111665e-37*P))-H),K[0]=v-H)),K[1]=v-K[0]-H,P},Ds=1.5707963267341256,Es=6077100506506192e-26,Os=2*Es,_s=4*Es,As=new Array(3),$s=new Array(2),Zi=function(a,Y){var K,P,R,v,H,M,I;if((R=2147483647&Ke(a)|0)<=1072243195)return Y[0]=a,Y[1]=0,0;if(R<=1074752122)return 598523==(1048575&R)?ui(a,R,Y):R<=1073928572?a>0?(I=a-Ds,Y[0]=I-Es,Y[1]=I-Y[0]-Es,1):(I=a+Ds,Y[0]=I+Es,Y[1]=I-Y[0]+Es,-1):a>0?(I=a-2*Ds,Y[0]=I-Os,Y[1]=I-Y[0]-Os,2):(I=a+2*Ds,Y[0]=I+Os,Y[1]=I-Y[0]+Os,-2);if(R<=1075594811)return R<=1075183036?1074977148===R?ui(a,R,Y):a>0?(I=a-3*Ds,Y[0]=I-1.8231301519518578e-10,Y[1]=I-Y[0]-1.8231301519518578e-10,3):(I=a+3*Ds,Y[0]=I+1.8231301519518578e-10,Y[1]=I-Y[0]+1.8231301519518578e-10,-3):1075388923===R?ui(a,R,Y):a>0?(I=a-4*Ds,Y[0]=I-_s,Y[1]=I-Y[0]-_s,4):(I=a+4*Ds,Y[0]=I+_s,Y[1]=I-Y[0]+_s,-4);if(R<1094263291)return ui(a,R,Y);if(R>=2146435072)return Y[0]=NaN,Y[1]=NaN,0;for(K=function(a){return Ts[0]=a,Ys[Vs]}(a),I=Ss(R-((P=(R>>20)-1046)<<20|0),K),H=0;H<2;H++)As[H]=0|I,I=16777216*(I-As[H]);for(As[2]=I,v=3;0===As[v-1];)v-=1;return M=di(As,$s,P,v),a<0?(Y[0]=-$s[0],Y[1]=-$s[1],-M):(Y[0]=$s[0],Y[1]=$s[1],M)},qs=[0,0],ei=Math.ceil,ki=function(a){var Y;return _t(a)||a===Oe?a:a===Ae?0:a>709.782712893384?Oe:a<-745.1332191019411?0:a>-3.725290298461914e-9&&a<3.725290298461914e-9?1+a:(Y=function(a){return a<0?ei(a):Cs(a)}(a<0?1.4426950408889634*a-.5:1.4426950408889634*a+.5),function(a,Y,K){var P,R,v;return v=(P=a-Y)-(R=P*P)*function(a){return 0===a?.16666666666666602:.16666666666666602+a*(a*(6613756321437934e-20+a*(4.1381367970572385e-8*a-16533902205465252e-22))-.0027777777777015593)}(R),ti(1-(Y-P*v/(2-v)-a),K)}(a-.6931471803691238*Y,1.9082149292705877e-10*Y,Y))},si=.6931471803691238,ii=1.9082149292705877e-10,ni=!0===Ne?0:1,oi=new Ye(1),ri=new ge(oi.buffer),Ki=function(a,Y){return oi[0]=a,ri[ni]=Y>>>0,oi[0]},ai=[0,0],hi=[0,0],qi=function(a,Y,K){var P,R,v,H,M,I,z,F,N;return(R=2147483647&(P=Ke(a))|0)>=1072010280&&(a<0&&(a=-a,Y=-Y),a=(N=.7853981633974483-a)+(F=3061616997868383e-32-Y),Y=0),H=Y+(N=a*a)*((M=N*a)*((H=function(a){return 0===a?.13333333333320124:.13333333333320124+a*(.021869488294859542+a*(.0035920791075913124+a*(.0005880412408202641+a*(7817944429395571e-20+-18558637485527546e-21*a))))}(F=N*N))+(z=N*function(a){return 0===a?.05396825397622605:.05396825397622605+a*(.0088632398235993+a*(.0014562094543252903+a*(.0002464631348184699+a*(7140724913826082e-20+2590730518636337e-20*a))))}(F)))+Y),F=a+(H+=.3333333333333341*M),R>=1072010280?(1-(P>>30&2))*((z=K)-2*(a-(F*F/(F+z)-H))):1===K?F:(Ki(N=F,0),z=H-(N-a),Ki(I=v=-1/F,0),I+v*((M=1+I*N)+I*z))},mi=[0,0];void 0===globalThis.CroquetMath&&(globalThis.CroquetMath={}),Object.assign(globalThis.CroquetMath,{acos:function(a){var Y;return _t(a)||a<-1||a>1?NaN:a>.5?2*Ut(pe(.5-.5*a)):(Y=ye-Ut(a),Y+=6123233995736766e-32,Y+=ye)},acosh:function(a){var Y;return _t(a)||a<1?NaN:1===a?0:a>=268435456?ts(a)+es:a>2?ts(2*a-1/(a+pe(a*a-1))):De((Y=a-1)+pe(2*Y+Y*Y))},asin:Ut,asinh:function(a){var Y,K,P;return _t(a)||ss(a)?a:(a<0&&(a=-a,Y=!0),P=a<3.725290298461914e-9?a:a>268435456?ts(a)+es:a>2?ts(2*a+1/(pe(a*a+1)+a)):De(a+(K=a*a)/(1+pe(1+K))),Y?-P:P)},atan:as,atanh:function(a){var Y,K;return _t(a)||a<-1||a>1?NaN:1===a?Oe:-1===a?Ae:(a<0&&(Y=!0,a=-a),a<3.725290298461914e-9?Y?-a:a:(K=a<.5?.5*De((K=a+a)+K*a/(1-a)):.5*De((a+a)/(1-a)),Y?-K:K))},atan2:function(a,Y){var K;return _t(Y)||_t(a)?NaN:ss(Y)?Y===Oe?ss(a)?Ws(Ls/4,a):Ws(0,a):ss(a)?Ws(3*Ls/4,a):Ws(Ls,a):ss(a)?Ws(Ls/2,a):0===a?Y>=0&&!function(a){return!!(Ke(a)>>>31)}(Y)?Ws(0,a):Ws(Ls,a):0===Y?Ws(Ls/2,a):(K=as(a/Y),Y<0?K<=0?K+Ls:K-Ls:K)},cbrt:Ms,cos:function(a){var Y;if(Y=Ke(a),(Y&=2147483647)<=1072243195)return Y<1044381696?1:Hs(a,0);if(Y>=2146435072)return NaN;switch(3&Zi(a,qs)){case 0:return Hs(qs[0],qs[1]);case 1:return-Ns(qs[0],qs[1]);case 2:return-Hs(qs[0],qs[1]);default:return Ns(qs[0],qs[1])}},cosh:function(a){return _t(a)?a:(a<0&&(a=-a),a>21?ki(a)/2:(ki(a)+ki(-a))/2)},exp:ki,expm1:function(a){var Y,K,P,R,v,H,M,I,z,F,N,Q;if(a===Oe||_t(a))return a;if(a===Ae)return-1;if(0===a)return a;if(a<0?(K=!0,M=-a):(K=!1,M=a),M>=38.816242111356935){if(K)return-1;if(M>=709.782712893384)return Oe}if(v=0|Ke(M),M>.34657359027997264)M<1.0397207708399179?K?(P=a+si,R=-ii,Q=-1):(P=a-si,R=ii,Q=1):(Q=K?1.4426950408889634*a-.5:1.4426950408889634*a+.5,P=a-(F=Q|=0)*si,R=F*ii),z=P-(a=P-R)-R;else{if(v<1016070144)return a;Q=0}return N=(I=a*(Y=.5*a))*(((H=1+I*function(a){return 0===a?-.03333333333333313:a*(.0015873015872548146+a*(a*(4008217827329362e-21+-2.0109921818362437e-7*a)-793650757867488e-19))-.03333333333333313}(I))-(F=3-H*Y))/(6-a*F)),0===Q?a-(a*N-I):(N=a*(N-z)-z,N-=I,-1===Q?.5*(a-N)-.5:1===Q?a<-.25?-2*(N-(a+.5)):1+2*(a-N):Q<=-2||Q>56?(P=Ke(M=1-(N-a))+(Q<<20)|0,(M=_e(M,P))-1):(F=1,Q<20?M=(F=_e(F,P=1072693248-(2097152>>Q)|0))-(N-a):(M=a-(N+(F=_e(F,P=1023-Q<<20|0))),M+=1),P=Ke(M)+(Q<<20)|0,_e(M,P)))},log:ts,log1p:De,log10:function(a){var Y,K,P,R,v,H,M;return _t(a)||a<0?NaN:0===a?Ae:(v=0,(K=Ke(a))<1048576&&(v-=54,K=Ke(a*=0x40000000000000)),K>=2146435072?a+a:(v+=(K>>20)-1023|0,a=_e(a,(K&=1048575)|1072693248^(R=K+614244&1048576|0)),H=v+=R>>20|0,P=function(a){var Y,K,P,R,v,H,M,I,z,F;return R=a-1,(1048575&2+(P=Ke(a)))<3?0===R?0:R*R*(.3333333333333333*R-.5):(z=(P&=1048575)-398458|0,F=440401-P|0,K=(I=(H=(v=R/(2+R))*v)*H)*function(a){return 0===a?.3999999999940942:.3999999999940942+a*(.22222198432149784+.15313837699209373*a)}(I),M=H*function(a){return 0===a?.6666666666666735:.6666666666666735+a*(.2857142874366239+a*(.1818357216161805+.14798198605116586*a))}(I)+K,(z|=F)>0?v*((Y=.5*R*R)+M)-Y:v*(M-R))}(a),M=3694239077158931e-28*H+25082946711645275e-27*((a-=1)+P),(M+=.4342944818781689*(a-(Y=Ki(a,0))+P)+.4342944818781689*Y)+.30102999566361177*H))},log2:function(a){var Y,K,P,R,v;if(_t(a)||a<0)return NaN;if(ws(ai,a),v=0,(K=ai[0])<1048576){if(0==(2147483647&K|ai[1]))return Ae;v-=54,K=Ke(a*=0x40000000000000)}return K>=2146435072?a+a:(v+=(K>>20)-1023|0,a=_e(a,(K&=1048575)|1072693248^(R=K+614244&1048576|0)),v+=R>>20|0,P=function(a){var Y,K,P,R,v,H,M,I,z,F;return R=a-1,(1048575&2+(P=Ke(a)))<3?0===R?0:R*R*(.3333333333333333*R-.5):(z=(P&=1048575)-398458|0,F=440401-P|0,K=(I=(H=(v=R/(2+R))*v)*H)*function(a){return 0===a?.3999999999940942:.3999999999940942+a*(.22222198432149784+.15313837699209373*a)}(I),M=H*function(a){return 0===a?.6666666666666735:.6666666666666735+a*(.2857142874366239+a*(.1818357216161805+.14798198605116586*a))}(I)+K,(z|=F)>0?v*((Y=.5*R*R)+M)-Y:v*(M-R))}(a),1.6751713164886512e-10*((a-=1)+P)+1.4426950407214463*(a-(Y=Ki(a,0))+P)+1.4426950407214463*Y+v)},sin:function(a){var Y;if(Y=Ke(a),(Y&=2147483647)<=1072243195)return Y<1045430272?a:Ns(a,0);if(Y>=2146435072)return NaN;switch(3&Zi(a,hi)){case 0:return Ns(hi[0],hi[1]);case 1:return Hs(hi[0],hi[1]);case 2:return-Ns(hi[0],hi[1]);default:return-Hs(hi[0],hi[1])}},sinh:function(a){var Y;return 0===a?a:(Y=Js(a),a>710.4758600739439||a<-709.089565712824?a>0?Oe:Ae:Y>1?Y>=709.0895657128241?(Y=ki(.5*Y),Y*=.5*Y,a<0&&(Y=-Y),Y):(Y=.5*(Y=ki(Y))-.5/Y,a<0&&(Y=-Y),Y):a+a*(Y*=Y)*function(a){var Y,K;return 0===a?.16666666666666666:((a<0?-a:a)<=1?(Y=a*(a*(-.789474443963537*a-163.72585752598383)-11561.443576500522)-351754.9648081514,K=a*(36157.827983443196+a*(1*a-277.7110814206028))-2110529.7888489086):(Y=(a=1/a)*(a*(-351754.9648081514*a-11561.443576500522)-163.72585752598383)-.789474443963537,K=1+a*(a*(36157.827983443196+-2110529.7888489086*a)-277.7110814206028)),Y/K)}(Y))},tan:function(a){var Y,K;return Y=Ke(a),(Y&=2147483647)<=1072243195?Y<1044381696?a:qi(a,0,1):Y>=2146435072?NaN:(K=Zi(a,mi),qi(mi[0],mi[1],1-((1&K)<<1)))},tanh:function(a){var Y,K;if((K=Js(a))>44.014845965556525)return a<0?-1:1;if(K>=.625)K=1-2/((Y=ki(2*K))+1),a<0&&(K=-K);else{if(0===a)return a;K=a+a*(Y=a*a)*function(a){var Y,K;return 0===a?-.3333333333333332:((a<0?-a:a)<=1?(Y=a*(a*(0*a-.9643991794250523)-99.28772310019185)-1614.6876844170845,K=4844.063053251255+a*(2235.4883906010045+a*(112.81167849163293+1*a))):(Y=0+(a=1/a)*(a*(-1614.6876844170845*a-99.28772310019185)-.9643991794250523),K=1+a*(112.81167849163293+a*(2235.4883906010045+4844.063053251255*a))),Y/K)}(Y)}return K}});const bi=Math.pow;function rn(a){return a===1/0||a===-1/0}globalThis.CroquetMath.pow=(a,Y)=>{if(isNaN(a)||isNaN(Y))return NaN;if(rn(a)||rn(Y))return bi(a,Y);if(0===a||0===Y)return bi(a,Y);if(a<0&&!function(a){return Number.isInteger(a)}(Y))return NaN;if(1===Y)return a;if(2===Y)return a*a;if(3===Y)return a*a*a;if(4===Y)return a*a*a*a;let K=1;return a<0&&(a*=-1,K=bi(-1,Y)),globalThis.CroquetMath.exp(globalThis.CroquetMath.log(a)*Y)*K};var an=function(a,Y){return a<Y};function ln(a){if(!(this instanceof ln))return new ln(a);this.array=[],this.size=0,this.compare=a||an}ln.prototype.clone=function(){var a=new ln(this.compare);return a.size=this.size,a.array=this.array.slice(0,this.size),a},ln.prototype.add=function(a){var Y,K,P=this.size;for(this.array[this.size]=a,this.size+=1;P>0&&(Y=P-1>>1,K=this.array[Y],this.compare(a,K));)this.array[P]=K,P=Y;this.array[P]=a},ln.prototype.heapify=function(a){var Y;for(this.array=a,this.size=a.length,Y=this.size>>1;Y>=0;Y--)this._percolateDown(Y)},ln.prototype._percolateUp=function(a,Y){for(var K,P,R=this.array[a];a>0&&(K=a-1>>1,P=this.array[K],Y||this.compare(R,P));)this.array[a]=P,a=K;this.array[a]=R},ln.prototype._percolateDown=function(a){for(var Y,K,P,R=this.size,v=this.size>>>1,H=this.array[a];a<v&&(K=1+(Y=1+(a<<1)),P=this.array[Y],K<R&&this.compare(this.array[K],P)&&(Y=K,P=this.array[K]),this.compare(P,H));)this.array[a]=P,a=Y;this.array[a]=H},ln.prototype._removeAt=function(a){if(!(a>this.size-1||a<0))return this._percolateUp(a,!0),this.poll()},ln.prototype.remove=function(a){for(var Y=0;Y<this.size;Y++)if(!this.compare(this.array[Y],a)&&!this.compare(a,this.array[Y]))return this._removeAt(Y),!0;return!1},ln.prototype.removeOne=function(a){if("function"==typeof a)for(var Y=0;Y<this.size;Y++)if(a(this.array[Y]))return this._removeAt(Y)},ln.prototype.removeMany=function(a,Y){if("function"!=typeof a||this.size<1)return[];Y=Y?Math.min(Y,this.size):this.size;for(var K=0,P=new Array(Y),R=0,v=new Array(this.size);K<Y&&!this.isEmpty();){var H=this.poll();a(H)?P[K++]=H:v[R++]=H}P.length=K;for(var M=0;M<R;)this.add(v[M++]);return P},ln.prototype.peek=function(){if(0!=this.size)return this.array[0]},ln.prototype.poll=function(){if(0!=this.size){var a=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,a}},ln.prototype.replaceTop=function(a){if(0!=this.size){var Y=this.array[0];return this.array[0]=a,this._percolateDown(0),Y}},ln.prototype.trim=function(){this.array=this.array.slice(0,this.size)},ln.prototype.isEmpty=function(){return 0===this.size},ln.prototype.forEach=function(a){if(!this.isEmpty()&&"function"==typeof a)for(var Y=0,K=this.clone();!K.isEmpty();)a(K.poll(),Y++)},ln.prototype.kSmallest=function(a){if(0==this.size)return[];a=Math.min(this.size,a);var Y=new ln(this.compare);const K=Math.min((a>0?Math.pow(2,a-1):0)+1,this.size);Y.size=K,Y.array=this.array.slice(0,K);for(var P=new Array(a),R=0;R<a;R++)P[R]=Y.poll();return P};var pi=ln;class dn extends pi{poll(){const a=super.poll();return this.array[this.size]=null,a}asArray(){const a=[];return this.forEach((Y=>a.push(Y))),a}asUnsortedArray(){return this.array.slice(0,this.size)}}var yi={exports:{}}.exports=function(a){return function(){var Y=a,K=Y.lib.WordArray;function i(a,Y,P){for(var R=[],v=0,H=0;H<Y;H++)if(H%4){var M=P[a.charCodeAt(H-1)]<<H%4*2|P[a.charCodeAt(H)]>>>6-H%4*2;R[v>>>2]|=M<<24-v%4*8,v++}return K.create(R,v)}Y.enc.Base64={stringify:function(a){var Y=a.words,K=a.sigBytes,P=this._map;a.clamp();for(var R=[],v=0;v<K;v+=3)for(var H=(Y[v>>>2]>>>24-v%4*8&255)<<16|(Y[v+1>>>2]>>>24-(v+1)%4*8&255)<<8|Y[v+2>>>2]>>>24-(v+2)%4*8&255,M=0;M<4&&v+.75*M<K;M++)R.push(P.charAt(H>>>6*(3-M)&63));var I=P.charAt(64);if(I)for(;R.length%4;)R.push(I);return R.join("")},parse:function(a){var Y=a.length,K=this._map,P=this._reverseMap;if(!P){P=this._reverseMap=[];for(var R=0;R<K.length;R++)P[K.charCodeAt(R)]=R}var v=K.charAt(64);if(v){var H=a.indexOf(v);-1!==H&&(Y=H)}return i(a,Y,P)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),a.enc.Base64}(_.exports),Xi={exports:{}}.exports=function(a){return a.enc.Utf8}(_.exports);!function(a){(function(){var Y=a,K=Y.lib,P=K.WordArray,R=K.Hasher,v=Y.algo,H=[],M=v.SHA1=R.extend({_doReset:function(){this._hash=new P.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,Y){for(var K=this._hash.words,P=K[0],R=K[1],v=K[2],M=K[3],I=K[4],z=0;z<80;z++){if(z<16)H[z]=0|a[Y+z];else{var F=H[z-3]^H[z-8]^H[z-14]^H[z-16];H[z]=F<<1|F>>>31}var N=(P<<5|P>>>27)+I+H[z];N+=z<20?1518500249+(R&v|~R&M):z<40?1859775393+(R^v^M):z<60?(R&v|R&M|v&M)-1894007588:(R^v^M)-899497514,I=M,M=v,v=R<<30|R>>>2,R=P,P=N}K[0]=K[0]+P|0,K[1]=K[1]+R|0,K[2]=K[2]+v|0,K[3]=K[3]+M|0,K[4]=K[4]+I|0},_doFinalize:function(){var a=this._data,Y=a.words,K=8*this._nDataBytes,P=8*a.sigBytes;return Y[P>>>5]|=128<<24-P%32,Y[14+(P+64>>>9<<4)]=Math.floor(K/4294967296),Y[15+(P+64>>>9<<4)]=K,a.sigBytes=4*Y.length,this._process(),this._hash},clone:function(){var a=R.clone.call(this);return a._hash=this._hash.clone(),a}});Y.SHA1=R._createHelper(M),Y.HmacSHA1=R._createHmacHelper(M)})(),a.SHA1}(_.exports);!function(a){!function(){var Y=a,K=Y.lib.Base,P=Y.enc.Utf8;Y.algo.HMAC=K.extend({init:function(a,Y){a=this._hasher=new a.init,"string"==typeof Y&&(Y=P.parse(Y));var K=a.blockSize,R=4*K;Y.sigBytes>R&&(Y=a.finalize(Y)),Y.clamp();for(var v=this._oKey=Y.clone(),H=this._iKey=Y.clone(),M=v.words,I=H.words,z=0;z<K;z++)M[z]^=1549556828,I[z]^=909522486;v.sigBytes=H.sigBytes=R,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var Y=this._hasher,K=Y.finalize(a);return Y.reset(),Y.finalize(this._oKey.clone().concat(K))}})}()}(_.exports);var fi={exports:{}}.exports=function(a){return function(){var Y=a,K=Y.lib,P=K.Base,R=K.WordArray,v=Y.algo,H=v.SHA1,M=v.HMAC,I=v.PBKDF2=P.extend({cfg:P.extend({keySize:4,hasher:H,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,Y){for(var K=this.cfg,P=M.create(K.hasher,a),v=R.create(),H=R.create([1]),I=v.words,z=H.words,F=K.keySize,N=K.iterations;I.length<F;){var Q=P.update(Y).finalize(H);P.reset();for(var j=Q.words,U=j.length,D=Q,E=1;E<N;E++){D=P.finalize(D),P.reset();for(var B=D.words,O=0;O<U;O++)j[O]^=B[O]}v.concat(Q),z[0]++}return v.sigBytes=4*F,v}});Y.PBKDF2=function(a,Y,K){return I.create(K).compute(a,Y)}}(),a.PBKDF2}(_.exports);!function(a){(function(Y){var K=a,P=K.lib,R=P.WordArray,v=P.Hasher,H=K.algo,M=[];!function(){for(var a=0;a<64;a++)M[a]=4294967296*Y.abs(Y.sin(a+1))|0}();var I=H.MD5=v.extend({_doReset:function(){this._hash=new R.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,Y){for(var K=0;K<16;K++){var P=Y+K,R=a[P];a[P]=16711935&(R<<8|R>>>24)|4278255360&(R<<24|R>>>8)}var v=this._hash.words,H=a[Y+0],I=a[Y+1],z=a[Y+2],F=a[Y+3],N=a[Y+4],Q=a[Y+5],j=a[Y+6],U=a[Y+7],D=a[Y+8],E=a[Y+9],B=a[Y+10],O=a[Y+11],_=a[Y+12],A=a[Y+13],st=a[Y+14],it=a[Y+15],nt=v[0],ot=v[1],lt=v[2],rt=v[3];nt=c(nt,ot,lt,rt,H,7,M[0]),rt=c(rt,nt,ot,lt,I,12,M[1]),lt=c(lt,rt,nt,ot,z,17,M[2]),ot=c(ot,lt,rt,nt,F,22,M[3]),nt=c(nt,ot,lt,rt,N,7,M[4]),rt=c(rt,nt,ot,lt,Q,12,M[5]),lt=c(lt,rt,nt,ot,j,17,M[6]),ot=c(ot,lt,rt,nt,U,22,M[7]),nt=c(nt,ot,lt,rt,D,7,M[8]),rt=c(rt,nt,ot,lt,E,12,M[9]),lt=c(lt,rt,nt,ot,B,17,M[10]),ot=c(ot,lt,rt,nt,O,22,M[11]),nt=c(nt,ot,lt,rt,_,7,M[12]),rt=c(rt,nt,ot,lt,A,12,M[13]),lt=c(lt,rt,nt,ot,st,17,M[14]),nt=d(nt,ot=c(ot,lt,rt,nt,it,22,M[15]),lt,rt,I,5,M[16]),rt=d(rt,nt,ot,lt,j,9,M[17]),lt=d(lt,rt,nt,ot,O,14,M[18]),ot=d(ot,lt,rt,nt,H,20,M[19]),nt=d(nt,ot,lt,rt,Q,5,M[20]),rt=d(rt,nt,ot,lt,B,9,M[21]),lt=d(lt,rt,nt,ot,it,14,M[22]),ot=d(ot,lt,rt,nt,N,20,M[23]),nt=d(nt,ot,lt,rt,E,5,M[24]),rt=d(rt,nt,ot,lt,st,9,M[25]),lt=d(lt,rt,nt,ot,F,14,M[26]),ot=d(ot,lt,rt,nt,D,20,M[27]),nt=d(nt,ot,lt,rt,A,5,M[28]),rt=d(rt,nt,ot,lt,z,9,M[29]),lt=d(lt,rt,nt,ot,U,14,M[30]),nt=h(nt,ot=d(ot,lt,rt,nt,_,20,M[31]),lt,rt,Q,4,M[32]),rt=h(rt,nt,ot,lt,D,11,M[33]),lt=h(lt,rt,nt,ot,O,16,M[34]),ot=h(ot,lt,rt,nt,st,23,M[35]),nt=h(nt,ot,lt,rt,I,4,M[36]),rt=h(rt,nt,ot,lt,N,11,M[37]),lt=h(lt,rt,nt,ot,U,16,M[38]),ot=h(ot,lt,rt,nt,B,23,M[39]),nt=h(nt,ot,lt,rt,A,4,M[40]),rt=h(rt,nt,ot,lt,H,11,M[41]),lt=h(lt,rt,nt,ot,F,16,M[42]),ot=h(ot,lt,rt,nt,j,23,M[43]),nt=h(nt,ot,lt,rt,E,4,M[44]),rt=h(rt,nt,ot,lt,_,11,M[45]),lt=h(lt,rt,nt,ot,it,16,M[46]),nt=u(nt,ot=h(ot,lt,rt,nt,z,23,M[47]),lt,rt,H,6,M[48]),rt=u(rt,nt,ot,lt,U,10,M[49]),lt=u(lt,rt,nt,ot,st,15,M[50]),ot=u(ot,lt,rt,nt,Q,21,M[51]),nt=u(nt,ot,lt,rt,_,6,M[52]),rt=u(rt,nt,ot,lt,F,10,M[53]),lt=u(lt,rt,nt,ot,B,15,M[54]),ot=u(ot,lt,rt,nt,I,21,M[55]),nt=u(nt,ot,lt,rt,D,6,M[56]),rt=u(rt,nt,ot,lt,it,10,M[57]),lt=u(lt,rt,nt,ot,j,15,M[58]),ot=u(ot,lt,rt,nt,A,21,M[59]),nt=u(nt,ot,lt,rt,N,6,M[60]),rt=u(rt,nt,ot,lt,O,10,M[61]),lt=u(lt,rt,nt,ot,z,15,M[62]),ot=u(ot,lt,rt,nt,E,21,M[63]),v[0]=v[0]+nt|0,v[1]=v[1]+ot|0,v[2]=v[2]+lt|0,v[3]=v[3]+rt|0},_doFinalize:function(){var a=this._data,K=a.words,P=8*this._nDataBytes,R=8*a.sigBytes;K[R>>>5]|=128<<24-R%32;var v=Y.floor(P/4294967296),H=P;K[15+(R+64>>>9<<4)]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8),K[14+(R+64>>>9<<4)]=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),a.sigBytes=4*(K.length+1),this._process();for(var M=this._hash,I=M.words,z=0;z<4;z++){var F=I[z];I[z]=16711935&(F<<8|F>>>24)|4278255360&(F<<24|F>>>8)}return M},clone:function(){var a=v.clone.call(this);return a._hash=this._hash.clone(),a}});function c(a,Y,K,P,R,v,H){var M=a+(Y&K|~Y&P)+R+H;return(M<<v|M>>>32-v)+Y}function d(a,Y,K,P,R,v,H){var M=a+(Y&P|K&~P)+R+H;return(M<<v|M>>>32-v)+Y}function h(a,Y,K,P,R,v,H){var M=a+(Y^K^P)+R+H;return(M<<v|M>>>32-v)+Y}function u(a,Y,K,P,R,v,H){var M=a+(K^(Y|~P))+R+H;return(M<<v|M>>>32-v)+Y}K.MD5=v._createHelper(I),K.HmacMD5=v._createHmacHelper(I)})(Math),a.MD5}(_.exports);!function(a){(function(){var Y=a,K=Y.lib,P=K.Base,R=K.WordArray,v=Y.algo,H=v.MD5,M=v.EvpKDF=P.extend({cfg:P.extend({keySize:4,hasher:H,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,Y){for(var K,P=this.cfg,v=P.hasher.create(),H=R.create(),M=H.words,I=P.keySize,z=P.iterations;M.length<I;){K&&v.update(K),K=v.update(a).finalize(Y),v.reset();for(var F=1;F<z;F++)K=v.finalize(K),v.reset();H.concat(K)}return H.sigBytes=4*I,H}});Y.EvpKDF=function(a,Y,K){return M.create(K).compute(a,Y)}})(),a.EvpKDF}(_.exports);!function(a){a.lib.Cipher||function(Y){var K=a,P=K.lib,R=P.Base,v=P.WordArray,H=P.BufferedBlockAlgorithm,M=K.enc;M.Utf8;var I=M.Base64,z=K.algo.EvpKDF,F=P.Cipher=H.extend({cfg:R.extend(),createEncryptor:function(a,Y){return this.create(this._ENC_XFORM_MODE,a,Y)},createDecryptor:function(a,Y){return this.create(this._DEC_XFORM_MODE,a,Y)},init:function(a,Y,K){this.cfg=this.cfg.extend(K),this._xformMode=a,this._key=Y,this.reset()},reset:function(){H.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(a){return"string"==typeof a?_:B}return function(a){return{encrypt:function(Y,K,P){return t(K).encrypt(a,Y,K,P)},decrypt:function(Y,K,P){return t(K).decrypt(a,Y,K,P)}}}}()});P.StreamCipher=F.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var N=K.mode={},Q=P.BlockCipherMode=R.extend({createEncryptor:function(a,Y){return this.Encryptor.create(a,Y)},createDecryptor:function(a,Y){return this.Decryptor.create(a,Y)},init:function(a,Y){this._cipher=a,this._iv=Y}}),j=N.CBC=function(){var a=Q.extend();function s(a,Y,K){var P,R=this._iv;R?(P=R,this._iv=undefined):P=this._prevBlock;for(var v=0;v<K;v++)a[Y+v]^=P[v]}return a.Encryptor=a.extend({processBlock:function(a,Y){var K=this._cipher,P=K.blockSize;s.call(this,a,Y,P),K.encryptBlock(a,Y),this._prevBlock=a.slice(Y,Y+P)}}),a.Decryptor=a.extend({processBlock:function(a,Y){var K=this._cipher,P=K.blockSize,R=a.slice(Y,Y+P);K.decryptBlock(a,Y),s.call(this,a,Y,P),this._prevBlock=R}}),a}(),U=(K.pad={}).Pkcs7={pad:function(a,Y){for(var K=4*Y,P=K-a.sigBytes%K,R=P<<24|P<<16|P<<8|P,H=[],M=0;M<P;M+=4)H.push(R);var I=v.create(H,P);a.concat(I)},unpad:function(a){var Y=255&a.words[a.sigBytes-1>>>2];a.sigBytes-=Y}};P.BlockCipher=F.extend({cfg:F.cfg.extend({mode:j,padding:U}),reset:function(){var a;F.reset.call(this);var Y=this.cfg,K=Y.iv,P=Y.mode;this._xformMode==this._ENC_XFORM_MODE?a=P.createEncryptor:(a=P.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==a?this._mode.init(this,K&&K.words):(this._mode=a.call(P,this,K&&K.words),this._mode.__creator=a)},_doProcessBlock:function(a,Y){this._mode.processBlock(a,Y)},_doFinalize:function(){var a,Y=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Y.pad(this._data,this.blockSize),a=this._process(!0)):(a=this._process(!0),Y.unpad(a)),a},blockSize:4});var D=P.CipherParams=R.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),E=(K.format={}).OpenSSL={stringify:function(a){var Y=a.ciphertext,K=a.salt;return(K?v.create([1398893684,1701076831]).concat(K).concat(Y):Y).toString(I)},parse:function(a){var Y,K=I.parse(a),P=K.words;return 1398893684==P[0]&&1701076831==P[1]&&(Y=v.create(P.slice(2,4)),P.splice(0,4),K.sigBytes-=16),D.create({ciphertext:K,salt:Y})}},B=P.SerializableCipher=R.extend({cfg:R.extend({format:E}),encrypt:function(a,Y,K,P){P=this.cfg.extend(P);var R=a.createEncryptor(K,P),v=R.finalize(Y),H=R.cfg;return D.create({ciphertext:v,key:K,iv:H.iv,algorithm:a,mode:H.mode,padding:H.padding,blockSize:a.blockSize,formatter:P.format})},decrypt:function(a,Y,K,P){return P=this.cfg.extend(P),Y=this._parse(Y,P.format),a.createDecryptor(K,P).finalize(Y.ciphertext)},_parse:function(a,Y){return"string"==typeof a?Y.parse(a,this):a}}),O=(K.kdf={}).OpenSSL={execute:function(a,Y,K,P){P||(P=v.random(8));var R=z.create({keySize:Y+K}).compute(a,P),H=v.create(R.words.slice(Y),4*K);return R.sigBytes=4*Y,D.create({key:R,iv:H,salt:P})}},_=P.PasswordBasedCipher=B.extend({cfg:B.cfg.extend({kdf:O}),encrypt:function(a,Y,K,P){var R=(P=this.cfg.extend(P)).kdf.execute(K,a.keySize,a.ivSize);P.iv=R.iv;var v=B.encrypt.call(this,a,Y,R.key,P);return v.mixIn(R),v},decrypt:function(a,Y,K,P){P=this.cfg.extend(P),Y=this._parse(Y,P.format);var R=P.kdf.execute(K,a.keySize,a.ivSize,Y.salt);return P.iv=R.iv,B.decrypt.call(this,a,Y,R.key,P)}})}()}(_.exports);var Gi={exports:{}}.exports=function(a){return function(){var Y=a,K=Y.lib.BlockCipher,P=Y.algo,R=[],v=[],H=[],M=[],I=[],z=[],F=[],N=[],Q=[],j=[];!function(){for(var a=[],Y=0;Y<256;Y++)a[Y]=Y<128?Y<<1:Y<<1^283;var K=0,P=0;for(Y=0;Y<256;Y++){var U=P^P<<1^P<<2^P<<3^P<<4;U=U>>>8^255&U^99,R[K]=U,v[U]=K;var D=a[K],E=a[D],B=a[E],O=257*a[U]^16843008*U;H[K]=O<<24|O>>>8,M[K]=O<<16|O>>>16,I[K]=O<<8|O>>>24,z[K]=O,O=16843009*B^65537*E^257*D^16843008*K,F[U]=O<<24|O>>>8,N[U]=O<<16|O>>>16,Q[U]=O<<8|O>>>24,j[U]=O,K?(K=D^a[a[a[B^D]]],P^=a[a[P]]):K=P=1}}();var U=[0,1,2,4,8,16,32,64,128,27,54],D=P.AES=K.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var a=this._keyPriorReset=this._key,Y=a.words,K=a.sigBytes/4,P=4*((this._nRounds=K+6)+1),v=this._keySchedule=[],H=0;H<P;H++)H<K?v[H]=Y[H]:(z=v[H-1],H%K?K>6&&H%K==4&&(z=R[z>>>24]<<24|R[z>>>16&255]<<16|R[z>>>8&255]<<8|R[255&z]):(z=R[(z=z<<8|z>>>24)>>>24]<<24|R[z>>>16&255]<<16|R[z>>>8&255]<<8|R[255&z],z^=U[H/K|0]<<24),v[H]=v[H-K]^z);for(var M=this._invKeySchedule=[],I=0;I<P;I++){if(H=P-I,I%4)var z=v[H];else z=v[H-4];M[I]=I<4||H<=4?z:F[R[z>>>24]]^N[R[z>>>16&255]]^Q[R[z>>>8&255]]^j[R[255&z]]}}},encryptBlock:function(a,Y){this._doCryptBlock(a,Y,this._keySchedule,H,M,I,z,R)},decryptBlock:function(a,Y){var K=a[Y+1];a[Y+1]=a[Y+3],a[Y+3]=K,this._doCryptBlock(a,Y,this._invKeySchedule,F,N,Q,j,v),K=a[Y+1],a[Y+1]=a[Y+3],a[Y+3]=K},_doCryptBlock:function(a,Y,K,P,R,v,H,M){for(var I=this._nRounds,z=a[Y]^K[0],F=a[Y+1]^K[1],N=a[Y+2]^K[2],Q=a[Y+3]^K[3],j=4,U=1;U<I;U++){var D=P[z>>>24]^R[F>>>16&255]^v[N>>>8&255]^H[255&Q]^K[j++],E=P[F>>>24]^R[N>>>16&255]^v[Q>>>8&255]^H[255&z]^K[j++],B=P[N>>>24]^R[Q>>>16&255]^v[z>>>8&255]^H[255&F]^K[j++],O=P[Q>>>24]^R[z>>>16&255]^v[F>>>8&255]^H[255&N]^K[j++];z=D,F=E,N=B,Q=O}D=(M[z>>>24]<<24|M[F>>>16&255]<<16|M[N>>>8&255]<<8|M[255&Q])^K[j++],E=(M[F>>>24]<<24|M[N>>>16&255]<<16|M[Q>>>8&255]<<8|M[255&z])^K[j++],B=(M[N>>>24]<<24|M[Q>>>16&255]<<16|M[z>>>8&255]<<8|M[255&F])^K[j++],O=(M[Q>>>24]<<24|M[z>>>16&255]<<16|M[F>>>8&255]<<8|M[255&N])^K[j++],a[Y]=D,a[Y+1]=E,a[Y+2]=B,a[Y+3]=O},keySize:8});Y.AES=K._createHelper(D)}(),a.AES}(_.exports),Li={exports:{}}.exports=function(a){return a.HmacSHA256}(_.exports);function Sn(a){let Y=a.length;for(;--Y>=0;)a[Y]=0}const xi=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Wi=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Si=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),gi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wi=new Array(576);Sn(wi);const Vi=new Array(60);Sn(Vi);const Ti=new Array(512);Sn(Ti);const Yi=new Array(256);Sn(Yi);const Ci=new Array(29);Sn(Ci);const Pi=new Array(30);function Kn(a,Y,K,P,R){this.static_tree=a,this.extra_bits=Y,this.extra_base=K,this.elems=P,this.max_length=R,this.has_stree=a&&a.length}let Ri,vi,Hi;function Fn(a,Y){this.dyn_tree=a,this.max_code=0,this.stat_desc=Y}Sn(Pi);const _n=a=>a<256?Ti[a]:Ti[256+(a>>>7)],jn=(a,Y)=>{a.pending_buf[a.pending++]=255&Y,a.pending_buf[a.pending++]=Y>>>8&255},Qn=(a,Y,K)=>{a.bi_valid>16-K?(a.bi_buf|=Y<<a.bi_valid&65535,jn(a,a.bi_buf),a.bi_buf=Y>>16-a.bi_valid,a.bi_valid+=K-16):(a.bi_buf|=Y<<a.bi_valid&65535,a.bi_valid+=K)},En=(a,Y,K)=>{Qn(a,K[2*Y],K[2*Y+1])},Jn=(a,Y)=>{let K=0;do{K|=1&a,a>>>=1,K<<=1}while(--Y>0);return K>>>1},Un=(a,Y,K)=>{const P=new Array(16);let R,v,H=0;for(R=1;R<=15;R++)P[R]=H=H+K[R-1]<<1;for(v=0;v<=Y;v++){let Y=a[2*v+1];0!==Y&&(a[2*v]=Jn(P[Y]++,Y))}},Dn=a=>{let Y;for(Y=0;Y<286;Y++)a.dyn_ltree[2*Y]=0;for(Y=0;Y<30;Y++)a.dyn_dtree[2*Y]=0;for(Y=0;Y<19;Y++)a.bl_tree[2*Y]=0;a.dyn_ltree[512]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},On=a=>{a.bi_valid>8?jn(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Bn=(a,Y,K,P)=>{const R=2*Y,v=2*K;return a[R]<a[v]||a[R]===a[v]&&P[Y]<=P[K]},An=(a,Y,K)=>{const P=a.heap[K];let R=K<<1;for(;R<=a.heap_len&&(R<a.heap_len&&Bn(Y,a.heap[R+1],a.heap[R],a.depth)&&R++,!Bn(Y,P,a.heap[R],a.depth));)a.heap[K]=a.heap[R],K=R,R<<=1;a.heap[K]=P},$n=(a,Y,K)=>{let P,R,v,H,M=0;if(0!==a.last_lit)do{P=a.pending_buf[a.d_buf+2*M]<<8|a.pending_buf[a.d_buf+2*M+1],R=a.pending_buf[a.l_buf+M],M++,0===P?En(a,R,Y):(v=Yi[R],En(a,v+256+1,Y),H=xi[v],0!==H&&(R-=Ci[v],Qn(a,R,H)),P--,v=_n(P),En(a,v,K),H=Wi[v],0!==H&&(P-=Pi[v],Qn(a,P,H)))}while(M<a.last_lit);En(a,256,Y)},qn=(a,Y)=>{const K=Y.dyn_tree,P=Y.stat_desc.static_tree,R=Y.stat_desc.has_stree,v=Y.stat_desc.elems;let H,M,I,z=-1;for(a.heap_len=0,a.heap_max=573,H=0;H<v;H++)0!==K[2*H]?(a.heap[++a.heap_len]=z=H,a.depth[H]=0):K[2*H+1]=0;for(;a.heap_len<2;)I=a.heap[++a.heap_len]=z<2?++z:0,K[2*I]=1,a.depth[I]=0,a.opt_len--,R&&(a.static_len-=P[2*I+1]);for(Y.max_code=z,H=a.heap_len>>1;H>=1;H--)An(a,K,H);I=v;do{H=a.heap[1],a.heap[1]=a.heap[a.heap_len--],An(a,K,1),M=a.heap[1],a.heap[--a.heap_max]=H,a.heap[--a.heap_max]=M,K[2*I]=K[2*H]+K[2*M],a.depth[I]=(a.depth[H]>=a.depth[M]?a.depth[H]:a.depth[M])+1,K[2*H+1]=K[2*M+1]=I,a.heap[1]=I++,An(a,K,1)}while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],((a,Y)=>{const K=Y.dyn_tree,P=Y.max_code,R=Y.stat_desc.static_tree,v=Y.stat_desc.has_stree,H=Y.stat_desc.extra_bits,M=Y.stat_desc.extra_base,I=Y.stat_desc.max_length;let z,F,N,Q,j,U,D=0;for(Q=0;Q<=15;Q++)a.bl_count[Q]=0;for(K[2*a.heap[a.heap_max]+1]=0,z=a.heap_max+1;z<573;z++)F=a.heap[z],Q=K[2*K[2*F+1]+1]+1,Q>I&&(Q=I,D++),K[2*F+1]=Q,F>P||(a.bl_count[Q]++,j=0,F>=M&&(j=H[F-M]),U=K[2*F],a.opt_len+=U*(Q+j),v&&(a.static_len+=U*(R[2*F+1]+j)));if(0!==D){do{for(Q=I-1;0===a.bl_count[Q];)Q--;a.bl_count[Q]--,a.bl_count[Q+1]+=2,a.bl_count[I]--,D-=2}while(D>0);for(Q=I;0!==Q;Q--)for(F=a.bl_count[Q];0!==F;)N=a.heap[--z],N>P||(K[2*N+1]!==Q&&(a.opt_len+=(Q-K[2*N+1])*K[2*N],K[2*N+1]=Q),F--)}})(a,Y),Un(K,z,a.bl_count)},to=(a,Y,K)=>{let P,R,v=-1,H=Y[1],M=0,I=7,z=4;for(0===H&&(I=138,z=3),Y[2*(K+1)+1]=65535,P=0;P<=K;P++)R=H,H=Y[2*(P+1)+1],++M<I&&R===H||(M<z?a.bl_tree[2*R]+=M:0!==R?(R!==v&&a.bl_tree[2*R]++,a.bl_tree[32]++):M<=10?a.bl_tree[34]++:a.bl_tree[36]++,M=0,v=R,0===H?(I=138,z=3):R===H?(I=6,z=3):(I=7,z=4))},eo=(a,Y,K)=>{let P,R,v=-1,H=Y[1],M=0,I=7,z=4;for(0===H&&(I=138,z=3),P=0;P<=K;P++)if(R=H,H=Y[2*(P+1)+1],!(++M<I&&R===H)){if(M<z)do{En(a,R,a.bl_tree)}while(0!=--M);else 0!==R?(R!==v&&(En(a,R,a.bl_tree),M--),En(a,16,a.bl_tree),Qn(a,M-3,2)):M<=10?(En(a,17,a.bl_tree),Qn(a,M-3,3)):(En(a,18,a.bl_tree),Qn(a,M-11,7));M=0,v=R,0===H?(I=138,z=3):R===H?(I=6,z=3):(I=7,z=4)}};let Mi=!1;const io=(a,Y,K,P)=>{Qn(a,0+(P?1:0),3),((a,Y,K,P)=>{On(a),jn(a,K),jn(a,~K),a.pending_buf.set(a.window.subarray(Y,Y+K),a.pending),a.pending+=K})(a,Y,K)};var Ii={_tr_init:a=>{Mi||((()=>{let a,Y,K,P,R;const v=new Array(16);for(K=0,P=0;P<28;P++)for(Ci[P]=K,a=0;a<1<<xi[P];a++)Yi[K++]=P;for(Yi[K-1]=P,R=0,P=0;P<16;P++)for(Pi[P]=R,a=0;a<1<<Wi[P];a++)Ti[R++]=P;for(R>>=7;P<30;P++)for(Pi[P]=R<<7,a=0;a<1<<Wi[P]-7;a++)Ti[256+R++]=P;for(Y=0;Y<=15;Y++)v[Y]=0;for(a=0;a<=143;)wi[2*a+1]=8,a++,v[8]++;for(;a<=255;)wi[2*a+1]=9,a++,v[9]++;for(;a<=279;)wi[2*a+1]=7,a++,v[7]++;for(;a<=287;)wi[2*a+1]=8,a++,v[8]++;for(Un(wi,287,v),a=0;a<30;a++)Vi[2*a+1]=5,Vi[2*a]=Jn(a,5);Ri=new Kn(wi,xi,257,286,15),vi=new Kn(Vi,Wi,0,30,15),Hi=new Kn(new Array(0),Si,0,19,7)})(),Mi=!0),a.l_desc=new Fn(a.dyn_ltree,Ri),a.d_desc=new Fn(a.dyn_dtree,vi),a.bl_desc=new Fn(a.bl_tree,Hi),a.bi_buf=0,a.bi_valid=0,Dn(a)},_tr_stored_block:io,_tr_flush_block:(a,Y,K,P)=>{let R,v,H=0;a.level>0?(2===a.strm.data_type&&(a.strm.data_type=(a=>{let Y,K=4093624447;for(Y=0;Y<=31;Y++,K>>>=1)if(1&K&&0!==a.dyn_ltree[2*Y])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(Y=32;Y<256;Y++)if(0!==a.dyn_ltree[2*Y])return 1;return 0})(a)),qn(a,a.l_desc),qn(a,a.d_desc),H=(a=>{let Y;for(to(a,a.dyn_ltree,a.l_desc.max_code),to(a,a.dyn_dtree,a.d_desc.max_code),qn(a,a.bl_desc),Y=18;Y>=3&&0===a.bl_tree[2*gi[Y]+1];Y--);return a.opt_len+=3*(Y+1)+5+5+4,Y})(a),R=a.opt_len+3+7>>>3,v=a.static_len+3+7>>>3,v<=R&&(R=v)):R=v=K+5,K+4<=R&&-1!==Y?io(a,Y,K,P):4===a.strategy||v===R?(Qn(a,2+(P?1:0),3),$n(a,wi,Vi)):(Qn(a,4+(P?1:0),3),((a,Y,K,P)=>{let R;for(Qn(a,Y-257,5),Qn(a,K-1,5),Qn(a,P-4,4),R=0;R<P;R++)Qn(a,a.bl_tree[2*gi[R]+1],3);eo(a,a.dyn_ltree,Y-1),eo(a,a.dyn_dtree,K-1)})(a,a.l_desc.max_code+1,a.d_desc.max_code+1,H+1),$n(a,a.dyn_ltree,a.dyn_dtree)),Dn(a),P&&On(a)},_tr_tally:(a,Y,K)=>(a.pending_buf[a.d_buf+2*a.last_lit]=Y>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&Y,a.pending_buf[a.l_buf+a.last_lit]=255&K,a.last_lit++,0===Y?a.dyn_ltree[2*K]++:(a.matches++,Y--,a.dyn_ltree[2*(Yi[K]+256+1)]++,a.dyn_dtree[2*_n(Y)]++),a.last_lit===a.lit_bufsize-1),_tr_align:a=>{Qn(a,2,3),En(a,256,wi),(a=>{16===a.bi_valid?(jn(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)})(a)}},ro=(a,Y,K,P)=>{let R=65535&a|0,v=a>>>16&65535|0,H=0;for(;0!==K;){H=K>2e3?2e3:K,K-=H;do{R=R+Y[P++]|0,v=v+R|0}while(--H);R%=65521,v%=65521}return R|v<<16|0};const zi=new Uint32Array((()=>{let a,Y=[];for(var K=0;K<256;K++){a=K;for(var P=0;P<8;P++)a=1&a?3988292384^a>>>1:a>>>1;Y[K]=a}return Y})());var lo=(a,Y,K,P)=>{const R=zi,v=P+K;a^=-1;for(let K=P;K<v;K++)a=a>>>8^R[255&(a^Y[K])];return-1^a},Fi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ni={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Qi,_tr_stored_block:Ji,_tr_flush_block:ji,_tr_tally:Ui,_tr_align:Di}=Ii,{Z_NO_FLUSH:Ei,Z_PARTIAL_FLUSH:Bi,Z_FULL_FLUSH:Oi,Z_FINISH:_i,Z_BLOCK:Ai,Z_OK:$i,Z_STREAM_END:tn,Z_STREAM_ERROR:en,Z_DATA_ERROR:sn,Z_BUF_ERROR:nn,Z_DEFAULT_COMPRESSION:on,Z_FILTERED:cn,Z_HUFFMAN_ONLY:hn,Z_RLE:un,Z_FIXED:mn,Z_DEFAULT_STRATEGY:bn,Z_UNKNOWN:pn,Z_DEFLATED:yn}=Ni,Mo=(a,Y)=>(a.msg=Fi[Y],Y),Io=a=>(a<<1)-(a>4?9:0),Ko=a=>{let Y=a.length;for(;--Y>=0;)a[Y]=0};let Ho=(a,Y,K)=>(Y<<a.hash_shift^K)&a.hash_mask;const zo=a=>{const Y=a.state;let K=Y.pending;K>a.avail_out&&(K=a.avail_out),0!==K&&(a.output.set(Y.pending_buf.subarray(Y.pending_out,Y.pending_out+K),a.next_out),a.next_out+=K,Y.pending_out+=K,a.total_out+=K,a.avail_out-=K,Y.pending-=K,0===Y.pending&&(Y.pending_out=0))},No=(a,Y)=>{ji(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,Y),a.block_start=a.strstart,zo(a.strm)},Fo=(a,Y)=>{a.pending_buf[a.pending++]=Y},_o=(a,Y)=>{a.pending_buf[a.pending++]=Y>>>8&255,a.pending_buf[a.pending++]=255&Y},jo=(a,Y,K,P)=>{let R=a.avail_in;return R>P&&(R=P),0===R?0:(a.avail_in-=R,Y.set(a.input.subarray(a.next_in,a.next_in+R),K),1===a.state.wrap?a.adler=ro(a.adler,Y,R,K):2===a.state.wrap&&(a.adler=lo(a.adler,Y,R,K)),a.next_in+=R,a.total_in+=R,R)},Qo=(a,Y)=>{let K,P,R=a.max_chain_length,v=a.strstart,H=a.prev_length,M=a.nice_match;const I=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,z=a.window,F=a.w_mask,N=a.prev,Q=a.strstart+258;let j=z[v+H-1],U=z[v+H];a.prev_length>=a.good_match&&(R>>=2),M>a.lookahead&&(M=a.lookahead);do{if(K=Y,z[K+H]===U&&z[K+H-1]===j&&z[K]===z[v]&&z[++K]===z[v+1]){v+=2,K++;do{}while(z[++v]===z[++K]&&z[++v]===z[++K]&&z[++v]===z[++K]&&z[++v]===z[++K]&&z[++v]===z[++K]&&z[++v]===z[++K]&&z[++v]===z[++K]&&z[++v]===z[++K]&&v<Q);if(P=258-(Q-v),v=Q-258,P>H){if(a.match_start=Y,H=P,P>=M)break;j=z[v+H-1],U=z[v+H]}}}while((Y=N[Y&F])>I&&0!=--R);return H<=a.lookahead?H:a.lookahead},Eo=a=>{const Y=a.w_size;let K,P,R,v,H;do{if(v=a.window_size-a.lookahead-a.strstart,a.strstart>=Y+(Y-262)){a.window.set(a.window.subarray(Y,Y+Y),0),a.match_start-=Y,a.strstart-=Y,a.block_start-=Y,P=a.hash_size,K=P;do{R=a.head[--K],a.head[K]=R>=Y?R-Y:0}while(--P);P=Y,K=P;do{R=a.prev[--K],a.prev[K]=R>=Y?R-Y:0}while(--P);v+=Y}if(0===a.strm.avail_in)break;if(P=jo(a.strm,a.window,a.strstart+a.lookahead,v),a.lookahead+=P,a.lookahead+a.insert>=3)for(H=a.strstart-a.insert,a.ins_h=a.window[H],a.ins_h=Ho(a,a.ins_h,a.window[H+1]);a.insert&&(a.ins_h=Ho(a,a.ins_h,a.window[H+3-1]),a.prev[H&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=H,H++,a.insert--,!(a.lookahead+a.insert<3)););}while(a.lookahead<262&&0!==a.strm.avail_in)},Jo=(a,Y)=>{let K,P;for(;;){if(a.lookahead<262){if(Eo(a),a.lookahead<262&&Y===Ei)return 1;if(0===a.lookahead)break}if(K=0,a.lookahead>=3&&(a.ins_h=Ho(a,a.ins_h,a.window[a.strstart+3-1]),K=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==K&&a.strstart-K<=a.w_size-262&&(a.match_length=Qo(a,K)),a.match_length>=3)if(P=Ui(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=3){a.match_length--;do{a.strstart++,a.ins_h=Ho(a,a.ins_h,a.window[a.strstart+3-1]),K=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart}while(0!=--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Ho(a,a.ins_h,a.window[a.strstart+1]);else P=Ui(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(P&&(No(a,!1),0===a.strm.avail_out))return 1}return a.insert=a.strstart<2?a.strstart:2,Y===_i?(No(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(No(a,!1),0===a.strm.avail_out)?1:2},Uo=(a,Y)=>{let K,P,R;for(;;){if(a.lookahead<262){if(Eo(a),a.lookahead<262&&Y===Ei)return 1;if(0===a.lookahead)break}if(K=0,a.lookahead>=3&&(a.ins_h=Ho(a,a.ins_h,a.window[a.strstart+3-1]),K=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=2,0!==K&&a.prev_length<a.max_lazy_match&&a.strstart-K<=a.w_size-262&&(a.match_length=Qo(a,K),a.match_length<=5&&(a.strategy===cn||3===a.match_length&&a.strstart-a.match_start>4096)&&(a.match_length=2)),a.prev_length>=3&&a.match_length<=a.prev_length){R=a.strstart+a.lookahead-3,P=Ui(a,a.strstart-1-a.prev_match,a.prev_length-3),a.lookahead-=a.prev_length-1,a.prev_length-=2;do{++a.strstart<=R&&(a.ins_h=Ho(a,a.ins_h,a.window[a.strstart+3-1]),K=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart)}while(0!=--a.prev_length);if(a.match_available=0,a.match_length=2,a.strstart++,P&&(No(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if(P=Ui(a,0,a.window[a.strstart-1]),P&&No(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(P=Ui(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<2?a.strstart:2,Y===_i?(No(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(No(a,!1),0===a.strm.avail_out)?1:2};function Do(a,Y,K,P,R){this.good_length=a,this.max_lazy=Y,this.nice_length=K,this.max_chain=P,this.func=R}const Zn=[new Do(0,0,0,0,((a,Y)=>{let K=65535;for(K>a.pending_buf_size-5&&(K=a.pending_buf_size-5);;){if(a.lookahead<=1){if(Eo(a),0===a.lookahead&&Y===Ei)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;const P=a.block_start+K;if((0===a.strstart||a.strstart>=P)&&(a.lookahead=a.strstart-P,a.strstart=P,No(a,!1),0===a.strm.avail_out))return 1;if(a.strstart-a.block_start>=a.w_size-262&&(No(a,!1),0===a.strm.avail_out))return 1}return a.insert=0,Y===_i?(No(a,!0),0===a.strm.avail_out?3:4):(a.strstart>a.block_start&&(No(a,!1),a.strm.avail_out),1)})),new Do(4,4,8,4,Jo),new Do(4,5,16,8,Jo),new Do(4,6,32,32,Jo),new Do(4,4,16,16,Uo),new Do(8,16,32,32,Uo),new Do(8,16,128,128,Uo),new Do(8,32,128,256,Uo),new Do(32,128,258,1024,Uo),new Do(32,258,258,4096,Uo)];function Bo(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=yn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ko(this.dyn_ltree),Ko(this.dyn_dtree),Ko(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ko(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ko(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ao=a=>{if(!a||!a.state)return Mo(a,en);a.total_in=a.total_out=0,a.data_type=pn;const Y=a.state;return Y.pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?42:113,a.adler=2===Y.wrap?0:1,Y.last_flush=Ei,Qi(Y),$i},$o=a=>{const Y=Ao(a);var K;return Y===$i&&((K=a.state).window_size=2*K.w_size,Ko(K.head),K.max_lazy_match=Zn[K.level].max_lazy,K.good_match=Zn[K.level].good_length,K.nice_match=Zn[K.level].nice_length,K.max_chain_length=Zn[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=2,K.match_available=0,K.ins_h=0),Y},qo=(a,Y,K,P,R,v)=>{if(!a)return en;let H=1;if(Y===on&&(Y=6),P<0?(H=0,P=-P):P>15&&(H=2,P-=16),R<1||R>9||K!==yn||P<8||P>15||Y<0||Y>9||v<0||v>mn)return Mo(a,en);8===P&&(P=9);const M=new Bo;return a.state=M,M.strm=a,M.wrap=H,M.gzhead=null,M.w_bits=P,M.w_size=1<<M.w_bits,M.w_mask=M.w_size-1,M.hash_bits=R+7,M.hash_size=1<<M.hash_bits,M.hash_mask=M.hash_size-1,M.hash_shift=~~((M.hash_bits+3-1)/3),M.window=new Uint8Array(2*M.w_size),M.head=new Uint16Array(M.hash_size),M.prev=new Uint16Array(M.w_size),M.lit_bufsize=1<<R+6,M.pending_buf_size=4*M.lit_bufsize,M.pending_buf=new Uint8Array(M.pending_buf_size),M.d_buf=1*M.lit_bufsize,M.l_buf=3*M.lit_bufsize,M.level=Y,M.strategy=v,M.method=K,$o(a)};var Xn={deflateInit:(a,Y)=>qo(a,Y,yn,15,8,bn),deflateInit2:qo,deflateReset:$o,deflateResetKeep:Ao,deflateSetHeader:(a,Y)=>a&&a.state?2!==a.state.wrap?en:(a.state.gzhead=Y,$i):en,deflate:(a,Y)=>{let K,P;if(!a||!a.state||Y>Ai||Y<0)return a?Mo(a,en):en;const R=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===R.status&&Y!==_i)return Mo(a,0===a.avail_out?nn:en);R.strm=a;const v=R.last_flush;if(R.last_flush=Y,42===R.status)if(2===R.wrap)a.adler=0,Fo(R,31),Fo(R,139),Fo(R,8),R.gzhead?(Fo(R,(R.gzhead.text?1:0)+(R.gzhead.hcrc?2:0)+(R.gzhead.extra?4:0)+(R.gzhead.name?8:0)+(R.gzhead.comment?16:0)),Fo(R,255&R.gzhead.time),Fo(R,R.gzhead.time>>8&255),Fo(R,R.gzhead.time>>16&255),Fo(R,R.gzhead.time>>24&255),Fo(R,9===R.level?2:R.strategy>=hn||R.level<2?4:0),Fo(R,255&R.gzhead.os),R.gzhead.extra&&R.gzhead.extra.length&&(Fo(R,255&R.gzhead.extra.length),Fo(R,R.gzhead.extra.length>>8&255)),R.gzhead.hcrc&&(a.adler=lo(a.adler,R.pending_buf,R.pending,0)),R.gzindex=0,R.status=69):(Fo(R,0),Fo(R,0),Fo(R,0),Fo(R,0),Fo(R,0),Fo(R,9===R.level?2:R.strategy>=hn||R.level<2?4:0),Fo(R,3),R.status=113);else{let Y=yn+(R.w_bits-8<<4)<<8,K=-1;K=R.strategy>=hn||R.level<2?0:R.level<6?1:6===R.level?2:3,Y|=K<<6,0!==R.strstart&&(Y|=32),Y+=31-Y%31,R.status=113,_o(R,Y),0!==R.strstart&&(_o(R,a.adler>>>16),_o(R,65535&a.adler)),a.adler=1}if(69===R.status)if(R.gzhead.extra){for(K=R.pending;R.gzindex<(65535&R.gzhead.extra.length)&&(R.pending!==R.pending_buf_size||(R.gzhead.hcrc&&R.pending>K&&(a.adler=lo(a.adler,R.pending_buf,R.pending-K,K)),zo(a),K=R.pending,R.pending!==R.pending_buf_size));)Fo(R,255&R.gzhead.extra[R.gzindex]),R.gzindex++;R.gzhead.hcrc&&R.pending>K&&(a.adler=lo(a.adler,R.pending_buf,R.pending-K,K)),R.gzindex===R.gzhead.extra.length&&(R.gzindex=0,R.status=73)}else R.status=73;if(73===R.status)if(R.gzhead.name){K=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>K&&(a.adler=lo(a.adler,R.pending_buf,R.pending-K,K)),zo(a),K=R.pending,R.pending===R.pending_buf_size)){P=1;break}P=R.gzindex<R.gzhead.name.length?255&R.gzhead.name.charCodeAt(R.gzindex++):0,Fo(R,P)}while(0!==P);R.gzhead.hcrc&&R.pending>K&&(a.adler=lo(a.adler,R.pending_buf,R.pending-K,K)),0===P&&(R.gzindex=0,R.status=91)}else R.status=91;if(91===R.status)if(R.gzhead.comment){K=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>K&&(a.adler=lo(a.adler,R.pending_buf,R.pending-K,K)),zo(a),K=R.pending,R.pending===R.pending_buf_size)){P=1;break}P=R.gzindex<R.gzhead.comment.length?255&R.gzhead.comment.charCodeAt(R.gzindex++):0,Fo(R,P)}while(0!==P);R.gzhead.hcrc&&R.pending>K&&(a.adler=lo(a.adler,R.pending_buf,R.pending-K,K)),0===P&&(R.status=103)}else R.status=103;if(103===R.status&&(R.gzhead.hcrc?(R.pending+2>R.pending_buf_size&&zo(a),R.pending+2<=R.pending_buf_size&&(Fo(R,255&a.adler),Fo(R,a.adler>>8&255),a.adler=0,R.status=113)):R.status=113),0!==R.pending){if(zo(a),0===a.avail_out)return R.last_flush=-1,$i}else if(0===a.avail_in&&Io(Y)<=Io(v)&&Y!==_i)return Mo(a,nn);if(666===R.status&&0!==a.avail_in)return Mo(a,nn);if(0!==a.avail_in||0!==R.lookahead||Y!==Ei&&666!==R.status){let K=R.strategy===hn?((a,Y)=>{let K;for(;;){if(0===a.lookahead&&(Eo(a),0===a.lookahead)){if(Y===Ei)return 1;break}if(a.match_length=0,K=Ui(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,K&&(No(a,!1),0===a.strm.avail_out))return 1}return a.insert=0,Y===_i?(No(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(No(a,!1),0===a.strm.avail_out)?1:2})(R,Y):R.strategy===un?((a,Y)=>{let K,P,R,v;const H=a.window;for(;;){if(a.lookahead<=258){if(Eo(a),a.lookahead<=258&&Y===Ei)return 1;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(R=a.strstart-1,P=H[R],P===H[++R]&&P===H[++R]&&P===H[++R])){v=a.strstart+258;do{}while(P===H[++R]&&P===H[++R]&&P===H[++R]&&P===H[++R]&&P===H[++R]&&P===H[++R]&&P===H[++R]&&P===H[++R]&&R<v);a.match_length=258-(v-R),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(K=Ui(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(K=Ui(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),K&&(No(a,!1),0===a.strm.avail_out))return 1}return a.insert=0,Y===_i?(No(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(No(a,!1),0===a.strm.avail_out)?1:2})(R,Y):Zn[R.level].func(R,Y);if(3!==K&&4!==K||(R.status=666),1===K||3===K)return 0===a.avail_out&&(R.last_flush=-1),$i;if(2===K&&(Y===Bi?Di(R):Y!==Ai&&(Ji(R,0,0,!1),Y===Oi&&(Ko(R.head),0===R.lookahead&&(R.strstart=0,R.block_start=0,R.insert=0))),zo(a),0===a.avail_out))return R.last_flush=-1,$i}return Y!==_i?$i:R.wrap<=0?tn:(2===R.wrap?(Fo(R,255&a.adler),Fo(R,a.adler>>8&255),Fo(R,a.adler>>16&255),Fo(R,a.adler>>24&255),Fo(R,255&a.total_in),Fo(R,a.total_in>>8&255),Fo(R,a.total_in>>16&255),Fo(R,a.total_in>>24&255)):(_o(R,a.adler>>>16),_o(R,65535&a.adler)),zo(a),R.wrap>0&&(R.wrap=-R.wrap),0!==R.pending?$i:tn)},deflateEnd:a=>{if(!a||!a.state)return en;const Y=a.state.status;return 42!==Y&&69!==Y&&73!==Y&&91!==Y&&103!==Y&&113!==Y&&666!==Y?Mo(a,en):(a.state=null,113===Y?Mo(a,sn):$i)},deflateSetDictionary:(a,Y)=>{let K=Y.length;if(!a||!a.state)return en;const P=a.state,R=P.wrap;if(2===R||1===R&&42!==P.status||P.lookahead)return en;if(1===R&&(a.adler=ro(a.adler,Y,K,0)),P.wrap=0,K>=P.w_size){0===R&&(Ko(P.head),P.strstart=0,P.block_start=0,P.insert=0);let a=new Uint8Array(P.w_size);a.set(Y.subarray(K-P.w_size,K),0),Y=a,K=P.w_size}const v=a.avail_in,H=a.next_in,M=a.input;for(a.avail_in=K,a.next_in=0,a.input=Y,Eo(P);P.lookahead>=3;){let a=P.strstart,Y=P.lookahead-2;do{P.ins_h=Ho(P,P.ins_h,P.window[a+3-1]),P.prev[a&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=a,a++}while(--Y);P.strstart=a,P.lookahead=2,Eo(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=2,P.match_available=0,a.next_in=H,a.input=M,a.avail_in=v,P.wrap=R,$i},deflateInfo:"pako deflate (from Nodeca project)"};const er=(a,Y)=>Object.prototype.hasOwnProperty.call(a,Y);var sr=function(a){const Y=Array.prototype.slice.call(arguments,1);for(;Y.length;){const K=Y.shift();if(K){if("object"!=typeof K)throw new TypeError(K+"must be non-object");for(const Y in K)er(K,Y)&&(a[Y]=K[Y])}}return a},ir=a=>{let Y=0;for(let K=0,P=a.length;K<P;K++)Y+=a[K].length;const K=new Uint8Array(Y);for(let Y=0,P=0,R=a.length;Y<R;Y++){let R=a[Y];K.set(R,P),P+=R.length}return K};let fn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(P){fn=!1}const Gn=new Uint8Array(256);for(let a=0;a<256;a++)Gn[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;Gn[254]=Gn[254]=1;var rr=a=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(a);let Y,K,P,R,v,H=a.length,M=0;for(R=0;R<H;R++)K=a.charCodeAt(R),55296==(64512&K)&&R+1<H&&(P=a.charCodeAt(R+1),56320==(64512&P)&&(K=65536+(K-55296<<10)+(P-56320),R++)),M+=K<128?1:K<2048?2:K<65536?3:4;for(Y=new Uint8Array(M),v=0,R=0;v<M;R++)K=a.charCodeAt(R),55296==(64512&K)&&R+1<H&&(P=a.charCodeAt(R+1),56320==(64512&P)&&(K=65536+(K-55296<<10)+(P-56320),R++)),K<128?Y[v++]=K:K<2048?(Y[v++]=192|K>>>6,Y[v++]=128|63&K):K<65536?(Y[v++]=224|K>>>12,Y[v++]=128|K>>>6&63,Y[v++]=128|63&K):(Y[v++]=240|K>>>18,Y[v++]=128|K>>>12&63,Y[v++]=128|K>>>6&63,Y[v++]=128|63&K);return Y},ar=(a,Y)=>{const K=Y||a.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(a.subarray(0,Y));let P,R;const v=new Array(2*K);for(R=0,P=0;P<K;){let Y=a[P++];if(Y<128){v[R++]=Y;continue}let H=Gn[Y];if(H>4)v[R++]=65533,P+=H-1;else{for(Y&=2===H?31:3===H?15:7;H>1&&P<K;)Y=Y<<6|63&a[P++],H--;H>1?v[R++]=65533:Y<65536?v[R++]=Y:(Y-=65536,v[R++]=55296|Y>>10&1023,v[R++]=56320|1023&Y)}}return((a,Y)=>{if(Y<65534&&a.subarray&&fn)return String.fromCharCode.apply(null,a.length===Y?a:a.subarray(0,Y));let K="";for(let P=0;P<Y;P++)K+=String.fromCharCode(a[P]);return K})(v,R)},lr=(a,Y)=>{(Y=Y||a.length)>a.length&&(Y=a.length);let K=Y-1;for(;K>=0&&128==(192&a[K]);)K--;return K<0||0===K?Y:K+Gn[a[K]]>Y?K:Y},cr=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ln=Object.prototype.toString,{Z_NO_FLUSH:xn,Z_SYNC_FLUSH:Wn,Z_FULL_FLUSH:gn,Z_FINISH:wn,Z_OK:Vn,Z_STREAM_END:Tn,Z_DEFAULT_COMPRESSION:Yn,Z_DEFAULT_STRATEGY:Cn,Z_DEFLATED:kn}=Ni;function Zr(a){this.options=sr({level:Yn,method:kn,chunkSize:16384,windowBits:15,memLevel:8,strategy:Cn},a||{});let Y=this.options;Y.raw&&Y.windowBits>0?Y.windowBits=-Y.windowBits:Y.gzip&&Y.windowBits>0&&Y.windowBits<16&&(Y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cr,this.strm.avail_out=0;let K=Xn.deflateInit2(this.strm,Y.level,Y.method,Y.windowBits,Y.memLevel,Y.strategy);if(K!==Vn)throw new Error(Fi[K]);if(Y.header&&Xn.deflateSetHeader(this.strm,Y.header),Y.dictionary){let a;if(a="string"==typeof Y.dictionary?rr(Y.dictionary):"[object ArrayBuffer]"===Ln.call(Y.dictionary)?new Uint8Array(Y.dictionary):Y.dictionary,K=Xn.deflateSetDictionary(this.strm,a),K!==Vn)throw new Error(Fi[K]);this._dict_set=!0}}function Xr(a,Y){const K=new Zr(Y);if(K.push(a,!0),K.err)throw K.msg||Fi[K.err];return K.result}Zr.prototype.push=function(a,Y){const K=this.strm,P=this.options.chunkSize;let R,v;if(this.ended)return!1;for(v=Y===~~Y?Y:!0===Y?wn:xn,"string"==typeof a?K.input=rr(a):"[object ArrayBuffer]"===Ln.call(a)?K.input=new Uint8Array(a):K.input=a,K.next_in=0,K.avail_in=K.input.length;;)if(0===K.avail_out&&(K.output=new Uint8Array(P),K.next_out=0,K.avail_out=P),(v===Wn||v===gn)&&K.avail_out<=6)this.onData(K.output.subarray(0,K.next_out)),K.avail_out=0;else{if(R=Xn.deflate(K,v),R===Tn)return K.next_out>0&&this.onData(K.output.subarray(0,K.next_out)),R=Xn.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===Vn;if(0!==K.avail_out){if(v>0&&K.next_out>0)this.onData(K.output.subarray(0,K.next_out)),K.avail_out=0;else if(0===K.avail_in)break}else this.onData(K.output)}return!0},Zr.prototype.onData=function(a){this.chunks.push(a)},Zr.prototype.onEnd=function(a){a===Vn&&(this.result=ir(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var Pn={Deflate:Zr,deflate:Xr,deflateRaw:function(a,Y){return(Y=Y||{}).raw=!0,Xr(a,Y)},gzip:function(a,Y){return(Y=Y||{}).gzip=!0,Xr(a,Y)},constants:Ni},Lr=function(a,Y){let K,P,R,v,H,M,I,z,F,N,Q,j,U,D,E,B,O,_,A,st,it,nt,ot,lt;const rt=a.state;K=a.next_in,ot=a.input,P=K+(a.avail_in-5),R=a.next_out,lt=a.output,v=R-(Y-a.avail_out),H=R+(a.avail_out-257),M=rt.dmax,I=rt.wsize,z=rt.whave,F=rt.wnext,N=rt.window,Q=rt.hold,j=rt.bits,U=rt.lencode,D=rt.distcode,E=(1<<rt.lenbits)-1,B=(1<<rt.distbits)-1;t:do{j<15&&(Q+=ot[K++]<<j,j+=8,Q+=ot[K++]<<j,j+=8),O=U[Q&E];e:for(;;){if(_=O>>>24,Q>>>=_,j-=_,_=O>>>16&255,0===_)lt[R++]=65535&O;else{if(!(16&_)){if(0==(64&_)){O=U[(65535&O)+(Q&(1<<_)-1)];continue e}if(32&_){rt.mode=12;break t}a.msg="invalid literal/length code",rt.mode=30;break t}A=65535&O,_&=15,_&&(j<_&&(Q+=ot[K++]<<j,j+=8),A+=Q&(1<<_)-1,Q>>>=_,j-=_),j<15&&(Q+=ot[K++]<<j,j+=8,Q+=ot[K++]<<j,j+=8),O=D[Q&B];s:for(;;){if(_=O>>>24,Q>>>=_,j-=_,_=O>>>16&255,!(16&_)){if(0==(64&_)){O=D[(65535&O)+(Q&(1<<_)-1)];continue s}a.msg="invalid distance code",rt.mode=30;break t}if(st=65535&O,_&=15,j<_&&(Q+=ot[K++]<<j,j+=8,j<_&&(Q+=ot[K++]<<j,j+=8)),st+=Q&(1<<_)-1,st>M){a.msg="invalid distance too far back",rt.mode=30;break t}if(Q>>>=_,j-=_,_=R-v,st>_){if(_=st-_,_>z&&rt.sane){a.msg="invalid distance too far back",rt.mode=30;break t}if(it=0,nt=N,0===F){if(it+=I-_,_<A){A-=_;do{lt[R++]=N[it++]}while(--_);it=R-st,nt=lt}}else if(F<_){if(it+=I+F-_,_-=F,_<A){A-=_;do{lt[R++]=N[it++]}while(--_);if(it=0,F<A){_=F,A-=_;do{lt[R++]=N[it++]}while(--_);it=R-st,nt=lt}}}else if(it+=F-_,_<A){A-=_;do{lt[R++]=N[it++]}while(--_);it=R-st,nt=lt}for(;A>2;)lt[R++]=nt[it++],lt[R++]=nt[it++],lt[R++]=nt[it++],A-=3;A&&(lt[R++]=nt[it++],A>1&&(lt[R++]=nt[it++]))}else{it=R-st;do{lt[R++]=lt[it++],lt[R++]=lt[it++],lt[R++]=lt[it++],A-=3}while(A>2);A&&(lt[R++]=lt[it++],A>1&&(lt[R++]=lt[it++]))}break}}break}}while(K<P&&R<H);A=j>>3,K-=A,j-=A<<3,Q&=(1<<j)-1,a.next_in=K,a.next_out=R,a.avail_in=K<P?P-K+5:5-(K-P),a.avail_out=R<H?H-R+257:257-(R-H),rt.hold=Q,rt.bits=j};const Rn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),vn=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Hn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Mn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Wr=(a,Y,K,P,R,v,H,M)=>{const I=M.bits;let z,F,N,Q,j,U,D=0,E=0,B=0,O=0,_=0,A=0,st=0,it=0,nt=0,ot=0,lt=null,rt=0;const at=new Uint16Array(16),dt=new Uint16Array(16);let ct,ut,mt,pt=null,Gt=0;for(D=0;D<=15;D++)at[D]=0;for(E=0;E<P;E++)at[Y[K+E]]++;for(_=I,O=15;O>=1&&0===at[O];O--);if(_>O&&(_=O),0===O)return R[v++]=20971520,R[v++]=20971520,M.bits=1,0;for(B=1;B<O&&0===at[B];B++);for(_<B&&(_=B),it=1,D=1;D<=15;D++)if(it<<=1,it-=at[D],it<0)return-1;if(it>0&&(0===a||1!==O))return-1;for(dt[1]=0,D=1;D<15;D++)dt[D+1]=dt[D]+at[D];for(E=0;E<P;E++)0!==Y[K+E]&&(H[dt[Y[K+E]]++]=E);if(0===a?(lt=pt=H,U=19):1===a?(lt=Rn,rt-=257,pt=vn,Gt-=257,U=256):(lt=Hn,pt=Mn,U=-1),ot=0,E=0,D=B,j=v,A=_,st=0,N=-1,nt=1<<_,Q=nt-1,1===a&&nt>852||2===a&&nt>592)return 1;for(;;){ct=D-st,H[E]<U?(ut=0,mt=H[E]):H[E]>U?(ut=pt[Gt+H[E]],mt=lt[rt+H[E]]):(ut=96,mt=0),z=1<<D-st,F=1<<A,B=F;do{F-=z,R[j+(ot>>st)+F]=ct<<24|ut<<16|mt|0}while(0!==F);for(z=1<<D-1;ot&z;)z>>=1;if(0!==z?(ot&=z-1,ot+=z):ot=0,E++,0==--at[D]){if(D===O)break;D=Y[K+H[E]]}if(D>_&&(ot&Q)!==N){for(0===st&&(st=_),j+=B,A=D-st,it=1<<A;A+st<O&&(it-=at[A+st],!(it<=0));)A++,it<<=1;if(nt+=1<<A,1===a&&nt>852||2===a&&nt>592)return 1;N=ot&Q,R[N]=_<<24|A<<16|j-v|0}}return 0!==ot&&(R[j+ot]=D-st<<24|64<<16|0),M.bits=_,0};const{Z_FINISH:In,Z_BLOCK:zn,Z_TREES:Nn,Z_OK:so,Z_STREAM_END:no,Z_NEED_DICT:oo,Z_STREAM_ERROR:ao,Z_DATA_ERROR:co,Z_MEM_ERROR:ho,Z_BUF_ERROR:uo,Z_DEFLATED:mo}=Ni,Nr=a=>(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24);function Fr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const _r=a=>{if(!a||!a.state)return ao;const Y=a.state;return a.total_in=a.total_out=Y.total=0,a.msg="",Y.wrap&&(a.adler=1&Y.wrap),Y.mode=1,Y.last=0,Y.havedict=0,Y.dmax=32768,Y.head=null,Y.hold=0,Y.bits=0,Y.lencode=Y.lendyn=new Int32Array(852),Y.distcode=Y.distdyn=new Int32Array(592),Y.sane=1,Y.back=-1,so},jr=a=>{if(!a||!a.state)return ao;const Y=a.state;return Y.wsize=0,Y.whave=0,Y.wnext=0,_r(a)},Qr=(a,Y)=>{let K;if(!a||!a.state)return ao;const P=a.state;return Y<0?(K=0,Y=-Y):(K=1+(Y>>4),Y<48&&(Y&=15)),Y&&(Y<8||Y>15)?ao:(null!==P.window&&P.wbits!==Y&&(P.window=null),P.wrap=K,P.wbits=Y,jr(a))},Er=(a,Y)=>{if(!a)return ao;const K=new Fr;a.state=K,K.window=null;const P=Qr(a,Y);return P!==so&&(a.state=null),P};let bo,po,yo=!0;const Or=a=>{if(yo){bo=new Int32Array(512),po=new Int32Array(32);let Y=0;for(;Y<144;)a.lens[Y++]=8;for(;Y<256;)a.lens[Y++]=9;for(;Y<280;)a.lens[Y++]=7;for(;Y<288;)a.lens[Y++]=8;for(Wr(1,a.lens,0,288,bo,0,a.work,{bits:9}),Y=0;Y<32;)a.lens[Y++]=5;Wr(2,a.lens,0,32,po,0,a.work,{bits:5}),yo=!1}a.lencode=bo,a.lenbits=9,a.distcode=po,a.distbits=5},Br=(a,Y,K,P)=>{let R;const v=a.state;return null===v.window&&(v.wsize=1<<v.wbits,v.wnext=0,v.whave=0,v.window=new Uint8Array(v.wsize)),P>=v.wsize?(v.window.set(Y.subarray(K-v.wsize,K),0),v.wnext=0,v.whave=v.wsize):(R=v.wsize-v.wnext,R>P&&(R=P),v.window.set(Y.subarray(K-P,K-P+R),v.wnext),(P-=R)?(v.window.set(Y.subarray(K-P,K),0),v.wnext=P,v.whave=v.wsize):(v.wnext+=R,v.wnext===v.wsize&&(v.wnext=0),v.whave<v.wsize&&(v.whave+=R))),0};var Zo={inflateReset:jr,inflateReset2:Qr,inflateResetKeep:_r,inflateInit:a=>Er(a,15),inflateInit2:Er,inflate:(a,Y)=>{let K,P,R,v,H,M,I,z,F,N,Q,j,U,D,E,B,O,_,A,st,it,nt,ot=0;const lt=new Uint8Array(4);let rt,at;const dt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return ao;K=a.state,12===K.mode&&(K.mode=13),H=a.next_out,R=a.output,I=a.avail_out,v=a.next_in,P=a.input,M=a.avail_in,z=K.hold,F=K.bits,N=M,Q=I,nt=so;t:for(;;)switch(K.mode){case 1:if(0===K.wrap){K.mode=13;break}for(;F<16;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}if(2&K.wrap&&35615===z){K.check=0,lt[0]=255&z,lt[1]=z>>>8&255,K.check=lo(K.check,lt,2,0),z=0,F=0,K.mode=2;break}if(K.flags=0,K.head&&(K.head.done=!1),!(1&K.wrap)||(((255&z)<<8)+(z>>8))%31){a.msg="incorrect header check",K.mode=30;break}if((15&z)!==mo){a.msg="unknown compression method",K.mode=30;break}if(z>>>=4,F-=4,it=8+(15&z),0===K.wbits)K.wbits=it;else if(it>K.wbits){a.msg="invalid window size",K.mode=30;break}K.dmax=1<<K.wbits,a.adler=K.check=1,K.mode=512&z?10:12,z=0,F=0;break;case 2:for(;F<16;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}if(K.flags=z,(255&K.flags)!==mo){a.msg="unknown compression method",K.mode=30;break}if(57344&K.flags){a.msg="unknown header flags set",K.mode=30;break}K.head&&(K.head.text=z>>8&1),512&K.flags&&(lt[0]=255&z,lt[1]=z>>>8&255,K.check=lo(K.check,lt,2,0)),z=0,F=0,K.mode=3;case 3:for(;F<32;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}K.head&&(K.head.time=z),512&K.flags&&(lt[0]=255&z,lt[1]=z>>>8&255,lt[2]=z>>>16&255,lt[3]=z>>>24&255,K.check=lo(K.check,lt,4,0)),z=0,F=0,K.mode=4;case 4:for(;F<16;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}K.head&&(K.head.xflags=255&z,K.head.os=z>>8),512&K.flags&&(lt[0]=255&z,lt[1]=z>>>8&255,K.check=lo(K.check,lt,2,0)),z=0,F=0,K.mode=5;case 5:if(1024&K.flags){for(;F<16;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}K.length=z,K.head&&(K.head.extra_len=z),512&K.flags&&(lt[0]=255&z,lt[1]=z>>>8&255,K.check=lo(K.check,lt,2,0)),z=0,F=0}else K.head&&(K.head.extra=null);K.mode=6;case 6:if(1024&K.flags&&(j=K.length,j>M&&(j=M),j&&(K.head&&(it=K.head.extra_len-K.length,K.head.extra||(K.head.extra=new Uint8Array(K.head.extra_len)),K.head.extra.set(P.subarray(v,v+j),it)),512&K.flags&&(K.check=lo(K.check,P,j,v)),M-=j,v+=j,K.length-=j),K.length))break t;K.length=0,K.mode=7;case 7:if(2048&K.flags){if(0===M)break t;j=0;do{it=P[v+j++],K.head&&it&&K.length<65536&&(K.head.name+=String.fromCharCode(it))}while(it&&j<M);if(512&K.flags&&(K.check=lo(K.check,P,j,v)),M-=j,v+=j,it)break t}else K.head&&(K.head.name=null);K.length=0,K.mode=8;case 8:if(4096&K.flags){if(0===M)break t;j=0;do{it=P[v+j++],K.head&&it&&K.length<65536&&(K.head.comment+=String.fromCharCode(it))}while(it&&j<M);if(512&K.flags&&(K.check=lo(K.check,P,j,v)),M-=j,v+=j,it)break t}else K.head&&(K.head.comment=null);K.mode=9;case 9:if(512&K.flags){for(;F<16;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}if(z!==(65535&K.check)){a.msg="header crc mismatch",K.mode=30;break}z=0,F=0}K.head&&(K.head.hcrc=K.flags>>9&1,K.head.done=!0),a.adler=K.check=0,K.mode=12;break;case 10:for(;F<32;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}a.adler=K.check=Nr(z),z=0,F=0,K.mode=11;case 11:if(0===K.havedict)return a.next_out=H,a.avail_out=I,a.next_in=v,a.avail_in=M,K.hold=z,K.bits=F,oo;a.adler=K.check=1,K.mode=12;case 12:if(Y===zn||Y===Nn)break t;case 13:if(K.last){z>>>=7&F,F-=7&F,K.mode=27;break}for(;F<3;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}switch(K.last=1&z,z>>>=1,F-=1,3&z){case 0:K.mode=14;break;case 1:if(Or(K),K.mode=20,Y===Nn){z>>>=2,F-=2;break t}break;case 2:K.mode=17;break;case 3:a.msg="invalid block type",K.mode=30}z>>>=2,F-=2;break;case 14:for(z>>>=7&F,F-=7&F;F<32;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}if((65535&z)!=(z>>>16^65535)){a.msg="invalid stored block lengths",K.mode=30;break}if(K.length=65535&z,z=0,F=0,K.mode=15,Y===Nn)break t;case 15:K.mode=16;case 16:if(j=K.length,j){if(j>M&&(j=M),j>I&&(j=I),0===j)break t;R.set(P.subarray(v,v+j),H),M-=j,v+=j,I-=j,H+=j,K.length-=j;break}K.mode=12;break;case 17:for(;F<14;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}if(K.nlen=257+(31&z),z>>>=5,F-=5,K.ndist=1+(31&z),z>>>=5,F-=5,K.ncode=4+(15&z),z>>>=4,F-=4,K.nlen>286||K.ndist>30){a.msg="too many length or distance symbols",K.mode=30;break}K.have=0,K.mode=18;case 18:for(;K.have<K.ncode;){for(;F<3;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}K.lens[dt[K.have++]]=7&z,z>>>=3,F-=3}for(;K.have<19;)K.lens[dt[K.have++]]=0;if(K.lencode=K.lendyn,K.lenbits=7,rt={bits:K.lenbits},nt=Wr(0,K.lens,0,19,K.lencode,0,K.work,rt),K.lenbits=rt.bits,nt){a.msg="invalid code lengths set",K.mode=30;break}K.have=0,K.mode=19;case 19:for(;K.have<K.nlen+K.ndist;){for(;ot=K.lencode[z&(1<<K.lenbits)-1],E=ot>>>24,B=ot>>>16&255,O=65535&ot,!(E<=F);){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}if(O<16)z>>>=E,F-=E,K.lens[K.have++]=O;else{if(16===O){for(at=E+2;F<at;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}if(z>>>=E,F-=E,0===K.have){a.msg="invalid bit length repeat",K.mode=30;break}it=K.lens[K.have-1],j=3+(3&z),z>>>=2,F-=2}else if(17===O){for(at=E+3;F<at;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}z>>>=E,F-=E,it=0,j=3+(7&z),z>>>=3,F-=3}else{for(at=E+7;F<at;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}z>>>=E,F-=E,it=0,j=11+(127&z),z>>>=7,F-=7}if(K.have+j>K.nlen+K.ndist){a.msg="invalid bit length repeat",K.mode=30;break}for(;j--;)K.lens[K.have++]=it}}if(30===K.mode)break;if(0===K.lens[256]){a.msg="invalid code -- missing end-of-block",K.mode=30;break}if(K.lenbits=9,rt={bits:K.lenbits},nt=Wr(1,K.lens,0,K.nlen,K.lencode,0,K.work,rt),K.lenbits=rt.bits,nt){a.msg="invalid literal/lengths set",K.mode=30;break}if(K.distbits=6,K.distcode=K.distdyn,rt={bits:K.distbits},nt=Wr(2,K.lens,K.nlen,K.ndist,K.distcode,0,K.work,rt),K.distbits=rt.bits,nt){a.msg="invalid distances set",K.mode=30;break}if(K.mode=20,Y===Nn)break t;case 20:K.mode=21;case 21:if(M>=6&&I>=258){a.next_out=H,a.avail_out=I,a.next_in=v,a.avail_in=M,K.hold=z,K.bits=F,Lr(a,Q),H=a.next_out,R=a.output,I=a.avail_out,v=a.next_in,P=a.input,M=a.avail_in,z=K.hold,F=K.bits,12===K.mode&&(K.back=-1);break}for(K.back=0;ot=K.lencode[z&(1<<K.lenbits)-1],E=ot>>>24,B=ot>>>16&255,O=65535&ot,!(E<=F);){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}if(B&&0==(240&B)){for(_=E,A=B,st=O;ot=K.lencode[st+((z&(1<<_+A)-1)>>_)],E=ot>>>24,B=ot>>>16&255,O=65535&ot,!(_+E<=F);){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}z>>>=_,F-=_,K.back+=_}if(z>>>=E,F-=E,K.back+=E,K.length=O,0===B){K.mode=26;break}if(32&B){K.back=-1,K.mode=12;break}if(64&B){a.msg="invalid literal/length code",K.mode=30;break}K.extra=15&B,K.mode=22;case 22:if(K.extra){for(at=K.extra;F<at;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}K.length+=z&(1<<K.extra)-1,z>>>=K.extra,F-=K.extra,K.back+=K.extra}K.was=K.length,K.mode=23;case 23:for(;ot=K.distcode[z&(1<<K.distbits)-1],E=ot>>>24,B=ot>>>16&255,O=65535&ot,!(E<=F);){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}if(0==(240&B)){for(_=E,A=B,st=O;ot=K.distcode[st+((z&(1<<_+A)-1)>>_)],E=ot>>>24,B=ot>>>16&255,O=65535&ot,!(_+E<=F);){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}z>>>=_,F-=_,K.back+=_}if(z>>>=E,F-=E,K.back+=E,64&B){a.msg="invalid distance code",K.mode=30;break}K.offset=O,K.extra=15&B,K.mode=24;case 24:if(K.extra){for(at=K.extra;F<at;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}K.offset+=z&(1<<K.extra)-1,z>>>=K.extra,F-=K.extra,K.back+=K.extra}if(K.offset>K.dmax){a.msg="invalid distance too far back",K.mode=30;break}K.mode=25;case 25:if(0===I)break t;if(j=Q-I,K.offset>j){if(j=K.offset-j,j>K.whave&&K.sane){a.msg="invalid distance too far back",K.mode=30;break}j>K.wnext?(j-=K.wnext,U=K.wsize-j):U=K.wnext-j,j>K.length&&(j=K.length),D=K.window}else D=R,U=H-K.offset,j=K.length;j>I&&(j=I),I-=j,K.length-=j;do{R[H++]=D[U++]}while(--j);0===K.length&&(K.mode=21);break;case 26:if(0===I)break t;R[H++]=K.length,I--,K.mode=21;break;case 27:if(K.wrap){for(;F<32;){if(0===M)break t;M--,z|=P[v++]<<F,F+=8}if(Q-=I,a.total_out+=Q,K.total+=Q,Q&&(a.adler=K.check=K.flags?lo(K.check,R,Q,H-Q):ro(K.check,R,Q,H-Q)),Q=I,(K.flags?z:Nr(z))!==K.check){a.msg="incorrect data check",K.mode=30;break}z=0,F=0}K.mode=28;case 28:if(K.wrap&&K.flags){for(;F<32;){if(0===M)break t;M--,z+=P[v++]<<F,F+=8}if(z!==(4294967295&K.total)){a.msg="incorrect length check",K.mode=30;break}z=0,F=0}K.mode=29;case 29:nt=no;break t;case 30:nt=co;break t;case 31:return ho;default:return ao}return a.next_out=H,a.avail_out=I,a.next_in=v,a.avail_in=M,K.hold=z,K.bits=F,(K.wsize||Q!==a.avail_out&&K.mode<30&&(K.mode<27||Y!==In))&&Br(a,a.output,a.next_out,Q-a.avail_out),N-=a.avail_in,Q-=a.avail_out,a.total_in+=N,a.total_out+=Q,K.total+=Q,K.wrap&&Q&&(a.adler=K.check=K.flags?lo(K.check,R,Q,a.next_out-Q):ro(K.check,R,Q,a.next_out-Q)),a.data_type=K.bits+(K.last?64:0)+(12===K.mode?128:0)+(20===K.mode||15===K.mode?256:0),(0===N&&0===Q||Y===In)&&nt===so&&(nt=uo),nt},inflateEnd:a=>{if(!a||!a.state)return ao;let Y=a.state;return Y.window&&(Y.window=null),a.state=null,so},inflateGetHeader:(a,Y)=>{if(!a||!a.state)return ao;const K=a.state;return 0==(2&K.wrap)?ao:(K.head=Y,Y.done=!1,so)},inflateSetDictionary:(a,Y)=>{const K=Y.length;let P,R,v;return a&&a.state?(P=a.state,0!==P.wrap&&11!==P.mode?ao:11===P.mode&&(R=1,R=ro(R,Y,K,0),R!==P.check)?co:(v=Br(a,Y,K,K),v?(P.mode=31,ho):(P.havedict=1,so))):ao},inflateInfo:"pako inflate (from Nodeca project)"},qr=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Xo=Object.prototype.toString,{Z_NO_FLUSH:fo,Z_FINISH:Go,Z_OK:Lo,Z_STREAM_END:xo,Z_NEED_DICT:Wo,Z_STREAM_ERROR:So,Z_DATA_ERROR:go,Z_MEM_ERROR:wo}=Ni;function ca(a){this.options=sr({chunkSize:65536,windowBits:15,to:""},a||{});const Y=this.options;Y.raw&&Y.windowBits>=0&&Y.windowBits<16&&(Y.windowBits=-Y.windowBits,0===Y.windowBits&&(Y.windowBits=-15)),!(Y.windowBits>=0&&Y.windowBits<16)||a&&a.windowBits||(Y.windowBits+=32),Y.windowBits>15&&Y.windowBits<48&&0==(15&Y.windowBits)&&(Y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cr,this.strm.avail_out=0;let K=Zo.inflateInit2(this.strm,Y.windowBits);if(K!==Lo)throw new Error(Fi[K]);if(this.header=new qr,Zo.inflateGetHeader(this.strm,this.header),Y.dictionary&&("string"==typeof Y.dictionary?Y.dictionary=rr(Y.dictionary):"[object ArrayBuffer]"===Xo.call(Y.dictionary)&&(Y.dictionary=new Uint8Array(Y.dictionary)),Y.raw&&(K=Zo.inflateSetDictionary(this.strm,Y.dictionary),K!==Lo)))throw new Error(Fi[K])}function da(a,Y){const K=new ca(Y);if(K.push(a),K.err)throw K.msg||Fi[K.err];return K.result}ca.prototype.push=function(a,Y){const K=this.strm,P=this.options.chunkSize,R=this.options.dictionary;let v,H,M;if(this.ended)return!1;for(H=Y===~~Y?Y:!0===Y?Go:fo,"[object ArrayBuffer]"===Xo.call(a)?K.input=new Uint8Array(a):K.input=a,K.next_in=0,K.avail_in=K.input.length;;){for(0===K.avail_out&&(K.output=new Uint8Array(P),K.next_out=0,K.avail_out=P),v=Zo.inflate(K,H),v===Wo&&R&&(v=Zo.inflateSetDictionary(K,R),v===Lo?v=Zo.inflate(K,H):v===go&&(v=Wo));K.avail_in>0&&v===xo&&K.state.wrap>0&&0!==a[K.next_in];)Zo.inflateReset(K),v=Zo.inflate(K,H);switch(v){case So:case go:case Wo:case wo:return this.onEnd(v),this.ended=!0,!1}if(M=K.avail_out,K.next_out&&(0===K.avail_out||v===xo))if("string"===this.options.to){let a=lr(K.output,K.next_out),Y=K.next_out-a,R=ar(K.output,a);K.next_out=Y,K.avail_out=P-Y,Y&&K.output.set(K.output.subarray(a,a+Y),0),this.onData(R)}else this.onData(K.output.length===K.next_out?K.output:K.output.subarray(0,K.next_out));if(v!==Lo||0!==M){if(v===xo)return v=Zo.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,!0;if(0===K.avail_in)break}}return!0},ca.prototype.onData=function(a){this.chunks.push(a)},ca.prototype.onEnd=function(a){a===Lo&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ir(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var Vo={Inflate:ca,inflate:da,inflateRaw:function(a,Y){return(Y=Y||{}).raw=!0,da(a,Y)},ungzip:da,constants:Ni};const{Deflate:To,deflate:Yo,deflateRaw:Co,gzip:ko}=Pn,{Inflate:Po,inflate:Ro,inflateRaw:vo,ungzip:Oo}=Vo;var tl={Deflate:To,deflate:Yo,deflateRaw:Co,gzip:ko,Inflate:Po,inflate:Ro,inflateRaw:vo,ungzip:Oo,constants:Ni};class Xa{constructor(){this.url="(offline)",this.readyState=WebSocket.CONNECTING,this.bufferedAmount=0,setTimeout((()=>{this.readyState=WebSocket.OPEN,this.onopen&&this.onopen()}),50),this.start=Date.now()}send(a){const{id:Y,action:K,args:P}=JSON.parse(a);switch(K){case"JOIN":return this.id=Y,this.ticks=P.ticks.tick,this.seq=-16>>>0,this.reply("SYNC",{messages:[],time:this.time,seq:this.seq,tove:P.tove,reflector:"offline"}),this.reply("RECV",[this.time,++this.seq,{what:"users",joined:[P.user],active:1,total:1}]),void this.tick();case"SEND":{const a=[...P];return a[0]=this.time,a[1]=++this.seq,void this.reply("RECV",a)}case"PULSE":return;default:throw Error("Offline unhandled "+K)}}close(a,Y){this.readyState=WebSocket.CLOSING,setTimeout((()=>{this.readyState=WebSocket.CLOSED,this.onclose&&this.onclose({code:a,reason:Y})}),50)}get time(){return Date.now()-this.start}tick(){clearInterval(this.ticker),this.ticker=setInterval((()=>{this.reply("TICK",{time:this.time})}),this.ticks)}reply(a,Y){setTimeout((()=>{this.onmessage&&this.onmessage({data:JSON.stringify({id:this.id,action:a,args:Y})})}),50)}}var il,ll=("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKioKICogQ29weXJpZ2h0IENyb3F1ZXQgQ29ycG9yYXRpb24gMjAyMwogKiBCdW5kbGUgb2YgQGNyb3F1ZXQvY3JvcXVldAogKiBEYXRlOiAyMDIzLTA2LTI2CiAqIFZlcnNpb246IDEuMS4wLTMyCiAqLwoKIWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciB0PSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6e307IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlLHI9T2JqZWN0LnByb3RvdHlwZSxuPXIuaGFzT3duUHJvcGVydHksaT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxhPWkuaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixvPWkuYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIscz1pLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyI7ZnVuY3Rpb24gbCh0LGUscil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSx0W2VdfXRyeXtsKHt9LCIiKX1jYXRjaCh0KXtsPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdFtlXT1yfX1mdW5jdGlvbiBoKHQsZSxyLG4pe3ZhciBpPWUmJmUucHJvdG90eXBlIGluc3RhbmNlb2YgZz9lOmcsYT1PYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKSxvPW5ldyBCKG58fFtdKTtyZXR1cm4gYS5faW52b2tlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj11O3JldHVybiBmdW5jdGlvbihpLGEpe2lmKG49PT1mKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT1fKXtpZigidGhyb3ciPT09aSl0aHJvdyBhO3JldHVybiBSKCl9Zm9yKHIubWV0aG9kPWksci5hcmc9YTs7KXt2YXIgbz1yLmRlbGVnYXRlO2lmKG8pe3ZhciBzPUEobyxyKTtpZihzKXtpZihzPT09cCljb250aW51ZTtyZXR1cm4gc319aWYoIm5leHQiPT09ci5tZXRob2Qpci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKG49PT11KXRocm93IG49XyxyLmFyZztyLmRpc3BhdGNoRXhjZXB0aW9uKHIuYXJnKX1lbHNlInJldHVybiI9PT1yLm1ldGhvZCYmci5hYnJ1cHQoInJldHVybiIsci5hcmcpO249Zjt2YXIgbD1jKHQsZSxyKTtpZigibm9ybWFsIj09PWwudHlwZSl7aWYobj1yLmRvbmU/XzpkLGwuYXJnPT09cCljb250aW51ZTtyZXR1cm57dmFsdWU6bC5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT1sLnR5cGUmJihuPV8sci5tZXRob2Q9InRocm93IixyLmFyZz1sLmFyZyl9fX0odCxyLG8pLGF9ZnVuY3Rpb24gYyh0LGUscil7dHJ5e3JldHVybnt0eXBlOiJub3JtYWwiLGFyZzp0LmNhbGwoZSxyKX19Y2F0Y2godCl7cmV0dXJue3R5cGU6InRocm93Iixhcmc6dH19fXQud3JhcD1oO3ZhciB1PSJzdXNwZW5kZWRTdGFydCIsZD0ic3VzcGVuZGVkWWllbGQiLGY9ImV4ZWN1dGluZyIsXz0iY29tcGxldGVkIixwPXt9O2Z1bmN0aW9uIGcoKXt9ZnVuY3Rpb24geSgpe31mdW5jdGlvbiB2KCl7fXZhciB3PXt9O2wodyxhLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpO3ZhciBtPU9iamVjdC5nZXRQcm90b3R5cGVPZixiPW0mJm0obShMKFtdKSkpO2ImJmIhPT1yJiZuLmNhbGwoYixhKSYmKHc9Yik7dmFyIHg9di5wcm90b3R5cGU9Zy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3KTtmdW5jdGlvbiBrKHQpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7bCh0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pbnZva2UoZSx0KX0pKX0pKX1mdW5jdGlvbiB6KHQsZSl7ZnVuY3Rpb24gcihpLGEsbyxzKXt2YXIgbD1jKHRbaV0sdCxhKTtpZigidGhyb3ciIT09bC50eXBlKXt2YXIgaD1sLmFyZyx1PWgudmFsdWU7cmV0dXJuIHUmJiJvYmplY3QiPT10eXBlb2YgdSYmbi5jYWxsKHUsIl9fYXdhaXQiKT9lLnJlc29sdmUodS5fX2F3YWl0KS50aGVuKChmdW5jdGlvbih0KXtyKCJuZXh0Iix0LG8scyl9KSwoZnVuY3Rpb24odCl7cigidGhyb3ciLHQsbyxzKX0pKTplLnJlc29sdmUodSkudGhlbigoZnVuY3Rpb24odCl7aC52YWx1ZT10LG8oaCl9KSwoZnVuY3Rpb24odCl7cmV0dXJuIHIoInRocm93Iix0LG8scyl9KSl9cyhsLmFyZyl9dmFyIGk7dGhpcy5faW52b2tlPWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gYSgpe3JldHVybiBuZXcgZSgoZnVuY3Rpb24oZSxpKXtyKHQsbixlLGkpfSkpfXJldHVybiBpPWk/aS50aGVuKGEsYSk6YSgpfX1mdW5jdGlvbiBBKHQscil7dmFyIG49dC5pdGVyYXRvcltyLm1ldGhvZF07aWYobj09PWUpe2lmKHIuZGVsZWdhdGU9bnVsbCwidGhyb3ciPT09ci5tZXRob2Qpe2lmKHQuaXRlcmF0b3IucmV0dXJuJiYoci5tZXRob2Q9InJldHVybiIsci5hcmc9ZSxBKHQsciksInRocm93Ij09PXIubWV0aG9kKSlyZXR1cm4gcDtyLm1ldGhvZD0idGhyb3ciLHIuYXJnPW5ldyBUeXBlRXJyb3IoIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2QiKX1yZXR1cm4gcH12YXIgaT1jKG4sdC5pdGVyYXRvcixyLmFyZyk7aWYoInRocm93Ij09PWkudHlwZSlyZXR1cm4gci5tZXRob2Q9InRocm93IixyLmFyZz1pLmFyZyxyLmRlbGVnYXRlPW51bGwscDt2YXIgYT1pLmFyZztyZXR1cm4gYT9hLmRvbmU/KHJbdC5yZXN1bHROYW1lXT1hLnZhbHVlLHIubmV4dD10Lm5leHRMb2MsInJldHVybiIhPT1yLm1ldGhvZCYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz1lKSxyLmRlbGVnYXRlPW51bGwscCk6YTooci5tZXRob2Q9InRocm93IixyLmFyZz1uZXcgVHlwZUVycm9yKCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdCIpLHIuZGVsZWdhdGU9bnVsbCxwKX1mdW5jdGlvbiBFKHQpe3ZhciBlPXt0cnlMb2M6dFswXX07MSBpbiB0JiYoZS5jYXRjaExvYz10WzFdKSwyIGluIHQmJihlLmZpbmFsbHlMb2M9dFsyXSxlLmFmdGVyTG9jPXRbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKGUpfWZ1bmN0aW9uIFModCl7dmFyIGU9dC5jb21wbGV0aW9ufHx7fTtlLnR5cGU9Im5vcm1hbCIsZGVsZXRlIGUuYXJnLHQuY29tcGxldGlvbj1lfWZ1bmN0aW9uIEIodCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLHQuZm9yRWFjaChFLHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIEwodCl7aWYodCl7dmFyIHI9dFthXTtpZihyKXJldHVybiByLmNhbGwodCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQubmV4dClyZXR1cm4gdDtpZighaXNOYU4odC5sZW5ndGgpKXt2YXIgaT0tMSxvPWZ1bmN0aW9uIHIoKXtmb3IoOysraTx0Lmxlbmd0aDspaWYobi5jYWxsKHQsaSkpcmV0dXJuIHIudmFsdWU9dFtpXSxyLmRvbmU9ITEscjtyZXR1cm4gci52YWx1ZT1lLHIuZG9uZT0hMCxyfTtyZXR1cm4gby5uZXh0PW99fXJldHVybntuZXh0OlJ9fWZ1bmN0aW9uIFIoKXtyZXR1cm57dmFsdWU6ZSxkb25lOiEwfX1yZXR1cm4geS5wcm90b3R5cGU9dixsKHgsImNvbnN0cnVjdG9yIix2KSxsKHYsImNvbnN0cnVjdG9yIix5KSx5LmRpc3BsYXlOYW1lPWwodixzLCJHZW5lcmF0b3JGdW5jdGlvbiIpLHQuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbih0KXt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdC5jb25zdHJ1Y3RvcjtyZXR1cm4hIWUmJihlPT09eXx8IkdlbmVyYXRvckZ1bmN0aW9uIj09PShlLmRpc3BsYXlOYW1lfHxlLm5hbWUpKX0sdC5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsdik6KHQuX19wcm90b19fPXYsbCh0LHMsIkdlbmVyYXRvckZ1bmN0aW9uIikpLHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeCksdH0sdC5hd3JhcD1mdW5jdGlvbih0KXtyZXR1cm57X19hd2FpdDp0fX0sayh6LnByb3RvdHlwZSksbCh6LnByb3RvdHlwZSxvLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLHQuQXN5bmNJdGVyYXRvcj16LHQuYXN5bmM9ZnVuY3Rpb24oZSxyLG4saSxhKXt2b2lkIDA9PT1hJiYoYT1Qcm9taXNlKTt2YXIgbz1uZXcgeihoKGUscixuLGkpLGEpO3JldHVybiB0LmlzR2VuZXJhdG9yRnVuY3Rpb24ocik/bzpvLm5leHQoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdC5kb25lP3QudmFsdWU6by5uZXh0KCl9KSl9LGsoeCksbCh4LHMsIkdlbmVyYXRvciIpLGwoeCxhLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLGwoeCwidG9TdHJpbmciLChmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSkpLHQua2V5cz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIHIgaW4gdCllLnB1c2gocik7cmV0dXJuIGUucmV2ZXJzZSgpLGZ1bmN0aW9uIHIoKXtmb3IoO2UubGVuZ3RoOyl7dmFyIG49ZS5wb3AoKTtpZihuIGluIHQpcmV0dXJuIHIudmFsdWU9bixyLmRvbmU9ITEscn1yZXR1cm4gci5kb25lPSEwLHJ9fSx0LnZhbHVlcz1MLEIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpCLHJlc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMucHJldj0wLHRoaXMubmV4dD0wLHRoaXMuc2VudD10aGlzLl9zZW50PWUsdGhpcy5kb25lPSExLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5hcmc9ZSx0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChTKSwhdClmb3IodmFyIHIgaW4gdGhpcykidCI9PT1yLmNoYXJBdCgwKSYmbi5jYWxsKHRoaXMscikmJiFpc05hTigrci5zbGljZSgxKSkmJih0aGlzW3JdPWUpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciB0PXRoaXMudHJ5RW50cmllc1swXS5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24odCl7aWYodGhpcy5kb25lKXRocm93IHQ7dmFyIHI9dGhpcztmdW5jdGlvbiBpKG4saSl7cmV0dXJuIHMudHlwZT0idGhyb3ciLHMuYXJnPXQsci5uZXh0PW4saSYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz1lKSwhIWl9Zm9yKHZhciBhPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTthPj0wOy0tYSl7dmFyIG89dGhpcy50cnlFbnRyaWVzW2FdLHM9by5jb21wbGV0aW9uO2lmKCJyb290Ij09PW8udHJ5TG9jKXJldHVybiBpKCJlbmQiKTtpZihvLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgbD1uLmNhbGwobywiY2F0Y2hMb2MiKSxoPW4uY2FsbChvLCJmaW5hbGx5TG9jIik7aWYobCYmaCl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIGkoby5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gaShvLmZpbmFsbHlMb2MpfWVsc2UgaWYobCl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIGkoby5jYXRjaExvYywhMCl9ZWxzZXtpZighaCl0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gaShvLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgaT10aGlzLnRyeUVudHJpZXNbcl07aWYoaS50cnlMb2M8PXRoaXMucHJldiYmbi5jYWxsKGksImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PGkuZmluYWxseUxvYyl7dmFyIGE9aTticmVha319YSYmKCJicmVhayI9PT10fHwiY29udGludWUiPT09dCkmJmEudHJ5TG9jPD1lJiZlPD1hLmZpbmFsbHlMb2MmJihhPW51bGwpO3ZhciBvPWE/YS5jb21wbGV0aW9uOnt9O3JldHVybiBvLnR5cGU9dCxvLmFyZz1lLGE/KHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLm5leHQ9YS5maW5hbGx5TG9jLHApOnRoaXMuY29tcGxldGUobyl9LGNvbXBsZXRlOmZ1bmN0aW9uKHQsZSl7aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4iYnJlYWsiPT09dC50eXBlfHwiY29udGludWUiPT09dC50eXBlP3RoaXMubmV4dD10LmFyZzoicmV0dXJuIj09PXQudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPXQuYXJnLHRoaXMubWV0aG9kPSJyZXR1cm4iLHRoaXMubmV4dD0iZW5kIik6Im5vcm1hbCI9PT10LnR5cGUmJmUmJih0aGlzLm5leHQ9ZSkscH0sZmluaXNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciByPXRoaXMudHJ5RW50cmllc1tlXTtpZihyLmZpbmFsbHlMb2M9PT10KXJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbixyLmFmdGVyTG9jKSxTKHIpLHB9fSxjYXRjaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci50cnlMb2M9PT10KXt2YXIgbj1yLmNvbXBsZXRpb247aWYoInRocm93Ij09PW4udHlwZSl7dmFyIGk9bi5hcmc7UyhyKX1yZXR1cm4gaX19dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbih0LHIsbil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOkwodCkscmVzdWx0TmFtZTpyLG5leHRMb2M6bn0sIm5leHQiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz1lKSxwfX0sdH0odC5leHBvcnRzKTt0cnl7Z2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWU9ZX1jYXRjaCh0KXsib2JqZWN0Ij09dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWU9ZTpGdW5jdGlvbigiciIsInJlZ2VuZXJhdG9yUnVudGltZSA9IHIiKShlKX19KHtleHBvcnRzOnt9fSk7dmFyIGU9e2V4cG9ydHM6e319OyhmdW5jdGlvbih0KXtjb25zdCBlPTQscj0wLG49MSxpPTI7ZnVuY3Rpb24gYSh0KXtsZXQgZT10Lmxlbmd0aDtmb3IoOy0tZT49MDspdFtlXT0wfWNvbnN0IG89MCxzPTEsbD0yLGg9MyxjPTI1OCx1PTI5LGQ9MjU2LGY9ZCsxK3UsXz0zMCxwPTE5LGc9MipmKzEseT0xNSx2PTE2LHc9NyxtPTI1NixiPTE2LHg9MTcsaz0xOCx6PW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDBdKSxBPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzXSksRT1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsN10pLFM9bmV3IFVpbnQ4QXJyYXkoWzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdKSxCPTUxMixMPW5ldyBBcnJheSgyKihmKzIpKTthKEwpO2NvbnN0IFI9bmV3IEFycmF5KDIqXyk7YShSKTtjb25zdCBEPW5ldyBBcnJheShCKTthKEQpO2NvbnN0IE89bmV3IEFycmF5KGMtaCsxKTthKE8pO2NvbnN0IFU9bmV3IEFycmF5KHUpO2EoVSk7Y29uc3QgQz1uZXcgQXJyYXkoXyk7ZnVuY3Rpb24gVCh0LGUscixuLGkpe3RoaXMuc3RhdGljX3RyZWU9dCx0aGlzLmV4dHJhX2JpdHM9ZSx0aGlzLmV4dHJhX2Jhc2U9cix0aGlzLmVsZW1zPW4sdGhpcy5tYXhfbGVuZ3RoPWksdGhpcy5oYXNfc3RyZWU9dCYmdC5sZW5ndGh9bGV0IEYsSCxaO2Z1bmN0aW9uIE0odCxlKXt0aGlzLmR5bl90cmVlPXQsdGhpcy5tYXhfY29kZT0wLHRoaXMuc3RhdF9kZXNjPWV9YShDKTtjb25zdCBOPXQ9PnQ8MjU2P0RbdF06RFsyNTYrKHQ+Pj43KV0sST0odCxlKT0+e3QucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZlLHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPWU+Pj44JjI1NX0sJD0odCxlLHIpPT57dC5iaV92YWxpZD52LXI/KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LEkodCx0LmJpX2J1ZiksdC5iaV9idWY9ZT4+di10LmJpX3ZhbGlkLHQuYmlfdmFsaWQrPXItdik6KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LHQuYmlfdmFsaWQrPXIpfSxQPSh0LGUscik9PnskKHQsclsyKmVdLHJbMiplKzFdKX0saj0odCxlKT0+e2xldCByPTA7ZG97cnw9MSZ0LHQ+Pj49MSxyPDw9MX13aGlsZSgtLWU+MCk7cmV0dXJuIHI+Pj4xfSxLPXQ9PnsxNj09PXQuYmlfdmFsaWQ/KEkodCx0LmJpX2J1ZiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTApOnQuYmlfdmFsaWQ+PTgmJih0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmdC5iaV9idWYsdC5iaV9idWY+Pj04LHQuYmlfdmFsaWQtPTgpfSxYPSh0LGUpPT57Y29uc3Qgcj1lLmR5bl90cmVlLG49ZS5tYXhfY29kZSxpPWUuc3RhdF9kZXNjLnN0YXRpY190cmVlLGE9ZS5zdGF0X2Rlc2MuaGFzX3N0cmVlLG89ZS5zdGF0X2Rlc2MuZXh0cmFfYml0cyxzPWUuc3RhdF9kZXNjLmV4dHJhX2Jhc2UsbD1lLnN0YXRfZGVzYy5tYXhfbGVuZ3RoO2xldCBoLGMsdSxkLGYsXyxwPTA7Zm9yKGQ9MDtkPD15O2QrKyl0LmJsX2NvdW50W2RdPTA7Zm9yKHJbMip0LmhlYXBbdC5oZWFwX21heF0rMV09MCxoPXQuaGVhcF9tYXgrMTtoPGc7aCsrKWM9dC5oZWFwW2hdLGQ9clsyKnJbMipjKzFdKzFdKzEsZD5sJiYoZD1sLHArKyksclsyKmMrMV09ZCxjPm58fCh0LmJsX2NvdW50W2RdKyssZj0wLGM+PXMmJihmPW9bYy1zXSksXz1yWzIqY10sdC5vcHRfbGVuKz1fKihkK2YpLGEmJih0LnN0YXRpY19sZW4rPV8qKGlbMipjKzFdK2YpKSk7aWYoMCE9PXApe2Rve2ZvcihkPWwtMTswPT09dC5ibF9jb3VudFtkXTspZC0tO3QuYmxfY291bnRbZF0tLSx0LmJsX2NvdW50W2QrMV0rPTIsdC5ibF9jb3VudFtsXS0tLHAtPTJ9d2hpbGUocD4wKTtmb3IoZD1sOzAhPT1kO2QtLSlmb3IoYz10LmJsX2NvdW50W2RdOzAhPT1jOyl1PXQuaGVhcFstLWhdLHU+bnx8KHJbMip1KzFdIT09ZCYmKHQub3B0X2xlbis9KGQtclsyKnUrMV0pKnJbMip1XSxyWzIqdSsxXT1kKSxjLS0pfX0scT0odCxlLHIpPT57Y29uc3Qgbj1uZXcgQXJyYXkoeSsxKTtsZXQgaSxhLG89MDtmb3IoaT0xO2k8PXk7aSsrKW5baV09bz1vK3JbaS0xXTw8MTtmb3IoYT0wO2E8PWU7YSsrKXtsZXQgZT10WzIqYSsxXTswIT09ZSYmKHRbMiphXT1qKG5bZV0rKyxlKSl9fSxHPSgpPT57bGV0IHQsZSxyLG4saTtjb25zdCBhPW5ldyBBcnJheSh5KzEpO2ZvcihyPTAsbj0wO248dS0xO24rKylmb3IoVVtuXT1yLHQ9MDt0PDE8PHpbbl07dCsrKU9bcisrXT1uO2ZvcihPW3ItMV09bixpPTAsbj0wO248MTY7bisrKWZvcihDW25dPWksdD0wO3Q8MTw8QVtuXTt0KyspRFtpKytdPW47Zm9yKGk+Pj03O248XztuKyspZm9yKENbbl09aTw8Nyx0PTA7dDwxPDxBW25dLTc7dCsrKURbMjU2K2krK109bjtmb3IoZT0wO2U8PXk7ZSsrKWFbZV09MDtmb3IodD0wO3Q8PTE0MzspTFsyKnQrMV09OCx0KyssYVs4XSsrO2Zvcig7dDw9MjU1OylMWzIqdCsxXT05LHQrKyxhWzldKys7Zm9yKDt0PD0yNzk7KUxbMip0KzFdPTcsdCsrLGFbN10rKztmb3IoO3Q8PTI4NzspTFsyKnQrMV09OCx0KyssYVs4XSsrO2ZvcihxKEwsZisxLGEpLHQ9MDt0PF87dCsrKVJbMip0KzFdPTUsUlsyKnRdPWoodCw1KTtGPW5ldyBUKEwseixkKzEsZix5KSxIPW5ldyBUKFIsQSwwLF8seSksWj1uZXcgVChuZXcgQXJyYXkoMCksRSwwLHAsdyl9LFc9dD0+e2xldCBlO2ZvcihlPTA7ZTxmO2UrKyl0LmR5bl9sdHJlZVsyKmVdPTA7Zm9yKGU9MDtlPF87ZSsrKXQuZHluX2R0cmVlWzIqZV09MDtmb3IoZT0wO2U8cDtlKyspdC5ibF90cmVlWzIqZV09MDt0LmR5bl9sdHJlZVsyKm1dPTEsdC5vcHRfbGVuPXQuc3RhdGljX2xlbj0wLHQubGFzdF9saXQ9dC5tYXRjaGVzPTB9LFk9dD0+e3QuYmlfdmFsaWQ+OD9JKHQsdC5iaV9idWYpOnQuYmlfdmFsaWQ+MCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPXQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MH0sVj0odCxlLHIsbik9PntZKHQpLG4mJihJKHQsciksSSh0LH5yKSksdC5wZW5kaW5nX2J1Zi5zZXQodC53aW5kb3cuc3ViYXJyYXkoZSxlK3IpLHQucGVuZGluZyksdC5wZW5kaW5nKz1yfSxRPSh0LGUscixuKT0+e2NvbnN0IGk9MiplLGE9MipyO3JldHVybiB0W2ldPHRbYV18fHRbaV09PT10W2FdJiZuW2VdPD1uW3JdfSxKPSh0LGUscik9Pntjb25zdCBuPXQuaGVhcFtyXTtsZXQgaT1yPDwxO2Zvcig7aTw9dC5oZWFwX2xlbiYmKGk8dC5oZWFwX2xlbiYmUShlLHQuaGVhcFtpKzFdLHQuaGVhcFtpXSx0LmRlcHRoKSYmaSsrLCFRKGUsbix0LmhlYXBbaV0sdC5kZXB0aCkpOyl0LmhlYXBbcl09dC5oZWFwW2ldLHI9aSxpPDw9MTt0LmhlYXBbcl09bn0sdHQ9KHQsZSxyKT0+e2xldCBuLGksYSxvLHM9MDtpZigwIT09dC5sYXN0X2xpdClkb3tuPXQucGVuZGluZ19idWZbdC5kX2J1ZisyKnNdPDw4fHQucGVuZGluZ19idWZbdC5kX2J1ZisyKnMrMV0saT10LnBlbmRpbmdfYnVmW3QubF9idWYrc10scysrLDA9PT1uP1AodCxpLGUpOihhPU9baV0sUCh0LGErZCsxLGUpLG89elthXSwwIT09byYmKGktPVVbYV0sJCh0LGksbykpLG4tLSxhPU4obiksUCh0LGEsciksbz1BW2FdLDAhPT1vJiYobi09Q1thXSwkKHQsbixvKSkpfXdoaWxlKHM8dC5sYXN0X2xpdCk7UCh0LG0sZSl9LGV0PSh0LGUpPT57Y29uc3Qgcj1lLmR5bl90cmVlLG49ZS5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsaT1lLnN0YXRfZGVzYy5oYXNfc3RyZWUsYT1lLnN0YXRfZGVzYy5lbGVtcztsZXQgbyxzLGwsaD0tMTtmb3IodC5oZWFwX2xlbj0wLHQuaGVhcF9tYXg9ZyxvPTA7bzxhO28rKykwIT09clsyKm9dPyh0LmhlYXBbKyt0LmhlYXBfbGVuXT1oPW8sdC5kZXB0aFtvXT0wKTpyWzIqbysxXT0wO2Zvcig7dC5oZWFwX2xlbjwyOylsPXQuaGVhcFsrK3QuaGVhcF9sZW5dPWg8Mj8rK2g6MCxyWzIqbF09MSx0LmRlcHRoW2xdPTAsdC5vcHRfbGVuLS0saSYmKHQuc3RhdGljX2xlbi09blsyKmwrMV0pO2ZvcihlLm1heF9jb2RlPWgsbz10LmhlYXBfbGVuPj4xO28+PTE7by0tKUoodCxyLG8pO2w9YTtkb3tvPXQuaGVhcFsxXSx0LmhlYXBbMV09dC5oZWFwW3QuaGVhcF9sZW4tLV0sSih0LHIsMSkscz10LmhlYXBbMV0sdC5oZWFwWy0tdC5oZWFwX21heF09byx0LmhlYXBbLS10LmhlYXBfbWF4XT1zLHJbMipsXT1yWzIqb10rclsyKnNdLHQuZGVwdGhbbF09KHQuZGVwdGhbb10+PXQuZGVwdGhbc10/dC5kZXB0aFtvXTp0LmRlcHRoW3NdKSsxLHJbMipvKzFdPXJbMipzKzFdPWwsdC5oZWFwWzFdPWwrKyxKKHQsciwxKX13aGlsZSh0LmhlYXBfbGVuPj0yKTt0LmhlYXBbLS10LmhlYXBfbWF4XT10LmhlYXBbMV0sWCh0LGUpLHEocixoLHQuYmxfY291bnQpfSxydD0odCxlLHIpPT57bGV0IG4saSxhPS0xLG89ZVsxXSxzPTAsbD03LGg9NDtmb3IoMD09PW8mJihsPTEzOCxoPTMpLGVbMioocisxKSsxXT02NTUzNSxuPTA7bjw9cjtuKyspaT1vLG89ZVsyKihuKzEpKzFdLCsrczxsJiZpPT09b3x8KHM8aD90LmJsX3RyZWVbMippXSs9czowIT09aT8oaSE9PWEmJnQuYmxfdHJlZVsyKmldKyssdC5ibF90cmVlWzIqYl0rKyk6czw9MTA/dC5ibF90cmVlWzIqeF0rKzp0LmJsX3RyZWVbMiprXSsrLHM9MCxhPWksMD09PW8/KGw9MTM4LGg9Myk6aT09PW8/KGw9NixoPTMpOihsPTcsaD00KSl9LG50PSh0LGUscik9PntsZXQgbixpLGE9LTEsbz1lWzFdLHM9MCxsPTcsaD00O2ZvcigwPT09byYmKGw9MTM4LGg9Myksbj0wO248PXI7bisrKWlmKGk9byxvPWVbMioobisxKSsxXSwhKCsrczxsJiZpPT09bykpe2lmKHM8aClkb3tQKHQsaSx0LmJsX3RyZWUpfXdoaWxlKDAhPS0tcyk7ZWxzZSAwIT09aT8oaSE9PWEmJihQKHQsaSx0LmJsX3RyZWUpLHMtLSksUCh0LGIsdC5ibF90cmVlKSwkKHQscy0zLDIpKTpzPD0xMD8oUCh0LHgsdC5ibF90cmVlKSwkKHQscy0zLDMpKTooUCh0LGssdC5ibF90cmVlKSwkKHQscy0xMSw3KSk7cz0wLGE9aSwwPT09bz8obD0xMzgsaD0zKTppPT09bz8obD02LGg9Myk6KGw9NyxoPTQpfX0saXQ9dD0+e2xldCBlO2ZvcihydCh0LHQuZHluX2x0cmVlLHQubF9kZXNjLm1heF9jb2RlKSxydCh0LHQuZHluX2R0cmVlLHQuZF9kZXNjLm1heF9jb2RlKSxldCh0LHQuYmxfZGVzYyksZT1wLTE7ZT49MyYmMD09PXQuYmxfdHJlZVsyKlNbZV0rMV07ZS0tKTtyZXR1cm4gdC5vcHRfbGVuKz0zKihlKzEpKzUrNSs0LGV9LGF0PSh0LGUscixuKT0+e2xldCBpO2ZvcigkKHQsZS0yNTcsNSksJCh0LHItMSw1KSwkKHQsbi00LDQpLGk9MDtpPG47aSsrKSQodCx0LmJsX3RyZWVbMipTW2ldKzFdLDMpO250KHQsdC5keW5fbHRyZWUsZS0xKSxudCh0LHQuZHluX2R0cmVlLHItMSl9LG90PXQ9PntsZXQgZSxpPTQwOTM2MjQ0NDc7Zm9yKGU9MDtlPD0zMTtlKyssaT4+Pj0xKWlmKDEmaSYmMCE9PXQuZHluX2x0cmVlWzIqZV0pcmV0dXJuIHI7aWYoMCE9PXQuZHluX2x0cmVlWzE4XXx8MCE9PXQuZHluX2x0cmVlWzIwXXx8MCE9PXQuZHluX2x0cmVlWzI2XSlyZXR1cm4gbjtmb3IoZT0zMjtlPGQ7ZSsrKWlmKDAhPT10LmR5bl9sdHJlZVsyKmVdKXJldHVybiBuO3JldHVybiByfTtsZXQgc3Q9ITE7Y29uc3QgbHQ9KHQsZSxyLG4pPT57JCh0LChvPDwxKSsobj8xOjApLDMpLFYodCxlLHIsITApfSxodD0odCxyLG4sYSk9PntsZXQgbyxoLGM9MDt0LmxldmVsPjA/KHQuc3RybS5kYXRhX3R5cGU9PT1pJiYodC5zdHJtLmRhdGFfdHlwZT1vdCh0KSksZXQodCx0LmxfZGVzYyksZXQodCx0LmRfZGVzYyksYz1pdCh0KSxvPXQub3B0X2xlbiszKzc+Pj4zLGg9dC5zdGF0aWNfbGVuKzMrNz4+PjMsaDw9byYmKG89aCkpOm89aD1uKzUsbis0PD1vJiYtMSE9PXI/bHQodCxyLG4sYSk6dC5zdHJhdGVneT09PWV8fGg9PT1vPygkKHQsKHM8PDEpKyhhPzE6MCksMyksdHQodCxMLFIpKTooJCh0LChsPDwxKSsoYT8xOjApLDMpLGF0KHQsdC5sX2Rlc2MubWF4X2NvZGUrMSx0LmRfZGVzYy5tYXhfY29kZSsxLGMrMSksdHQodCx0LmR5bl9sdHJlZSx0LmR5bl9kdHJlZSkpLFcodCksYSYmWSh0KX07dmFyIGN0PXtfdHJfaW5pdDp0PT57c3R8fChHKCksc3Q9ITApLHQubF9kZXNjPW5ldyBNKHQuZHluX2x0cmVlLEYpLHQuZF9kZXNjPW5ldyBNKHQuZHluX2R0cmVlLEgpLHQuYmxfZGVzYz1uZXcgTSh0LmJsX3RyZWUsWiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTAsVyh0KX0sX3RyX3N0b3JlZF9ibG9jazpsdCxfdHJfZmx1c2hfYmxvY2s6aHQsX3RyX3RhbGx5Oih0LGUscik9Pih0LnBlbmRpbmdfYnVmW3QuZF9idWYrMip0Lmxhc3RfbGl0XT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqdC5sYXN0X2xpdCsxXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QubF9idWYrdC5sYXN0X2xpdF09MjU1JnIsdC5sYXN0X2xpdCsrLDA9PT1lP3QuZHluX2x0cmVlWzIqcl0rKzoodC5tYXRjaGVzKyssZS0tLHQuZHluX2x0cmVlWzIqKE9bcl0rZCsxKV0rKyx0LmR5bl9kdHJlZVsyKk4oZSldKyspLHQubGFzdF9saXQ9PT10LmxpdF9idWZzaXplLTEpLF90cl9hbGlnbjp0PT57JCh0LHM8PDEsMyksUCh0LG0sTCksSyh0KX19LHV0PSh0LGUscixuKT0+e2xldCBpPTY1NTM1JnR8MCxhPXQ+Pj4xNiY2NTUzNXwwLG89MDtmb3IoOzAhPT1yOyl7bz1yPjJlMz8yZTM6cixyLT1vO2Rve2k9aStlW24rK118MCxhPWEraXwwfXdoaWxlKC0tbyk7aSU9NjU1MjEsYSU9NjU1MjF9cmV0dXJuIGl8YTw8MTZ8MH07Y29uc3QgZHQ9bmV3IFVpbnQzMkFycmF5KCgoKT0+e2xldCB0LGU9W107Zm9yKHZhciByPTA7cjwyNTY7cisrKXt0PXI7Zm9yKHZhciBuPTA7bjw4O24rKyl0PTEmdD8zOTg4MjkyMzg0XnQ+Pj4xOnQ+Pj4xO2Vbcl09dH1yZXR1cm4gZX0pKCkpO3ZhciBmdD0odCxlLHIsbik9Pntjb25zdCBpPWR0LGE9bityO3RePS0xO2ZvcihsZXQgcj1uO3I8YTtyKyspdD10Pj4+OF5pWzI1NSYodF5lW3JdKV07cmV0dXJuLTFedH0sX3Q9ezI6Im5lZWQgZGljdGlvbmFyeSIsMToic3RyZWFtIGVuZCIsMDoiIiwiLTEiOiJmaWxlIGVycm9yIiwiLTIiOiJzdHJlYW0gZXJyb3IiLCItMyI6ImRhdGEgZXJyb3IiLCItNCI6Imluc3VmZmljaWVudCBtZW1vcnkiLCItNSI6ImJ1ZmZlciBlcnJvciIsIi02IjoiaW5jb21wYXRpYmxlIHZlcnNpb24ifSxwdD17Wl9OT19GTFVTSDowLFpfUEFSVElBTF9GTFVTSDoxLFpfU1lOQ19GTFVTSDoyLFpfRlVMTF9GTFVTSDozLFpfRklOSVNIOjQsWl9CTE9DSzo1LFpfVFJFRVM6NixaX09LOjAsWl9TVFJFQU1fRU5EOjEsWl9ORUVEX0RJQ1Q6MixaX0VSUk5POi0xLFpfU1RSRUFNX0VSUk9SOi0yLFpfREFUQV9FUlJPUjotMyxaX01FTV9FUlJPUjotNCxaX0JVRl9FUlJPUjotNSxaX05PX0NPTVBSRVNTSU9OOjAsWl9CRVNUX1NQRUVEOjEsWl9CRVNUX0NPTVBSRVNTSU9OOjksWl9ERUZBVUxUX0NPTVBSRVNTSU9OOi0xLFpfRklMVEVSRUQ6MSxaX0hVRkZNQU5fT05MWToyLFpfUkxFOjMsWl9GSVhFRDo0LFpfREVGQVVMVF9TVFJBVEVHWTowLFpfQklOQVJZOjAsWl9URVhUOjEsWl9VTktOT1dOOjIsWl9ERUZMQVRFRDo4fTtjb25zdHtfdHJfaW5pdDpndCxfdHJfc3RvcmVkX2Jsb2NrOnl0LF90cl9mbHVzaF9ibG9jazp2dCxfdHJfdGFsbHk6d3QsX3RyX2FsaWduOm10fT1jdCx7Wl9OT19GTFVTSDpidCxaX1BBUlRJQUxfRkxVU0g6eHQsWl9GVUxMX0ZMVVNIOmt0LFpfRklOSVNIOnp0LFpfQkxPQ0s6QXQsWl9PSzpFdCxaX1NUUkVBTV9FTkQ6U3QsWl9TVFJFQU1fRVJST1I6QnQsWl9EQVRBX0VSUk9SOkx0LFpfQlVGX0VSUk9SOlJ0LFpfREVGQVVMVF9DT01QUkVTU0lPTjpEdCxaX0ZJTFRFUkVEOk90LFpfSFVGRk1BTl9PTkxZOlV0LFpfUkxFOkN0LFpfRklYRUQ6VHQsWl9ERUZBVUxUX1NUUkFURUdZOkZ0LFpfVU5LTk9XTjpIdCxaX0RFRkxBVEVEOlp0fT1wdCxNdD05LE50PTE1LEl0PTgsJHQ9Mjg2LFB0PTMwLGp0PTE5LEt0PTIqJHQrMSxYdD0xNSxxdD0zLEd0PTI1OCxXdD1HdCtxdCsxLFl0PTMyLFZ0PTQyLFF0PTY5LEp0PTczLHRlPTkxLGVlPTEwMyxyZT0xMTMsbmU9NjY2LGllPTEsYWU9MixvZT0zLHNlPTQsbGU9MyxoZT0odCxlKT0+KHQubXNnPV90W2VdLGUpLGNlPXQ9Pih0PDwxKS0odD40Pzk6MCksdWU9dD0+e2xldCBlPXQubGVuZ3RoO2Zvcig7LS1lPj0wOyl0W2VdPTB9O2xldCBkZT0odCxlLHIpPT4oZTw8dC5oYXNoX3NoaWZ0XnIpJnQuaGFzaF9tYXNrO2NvbnN0IGZlPXQ9Pntjb25zdCBlPXQuc3RhdGU7bGV0IHI9ZS5wZW5kaW5nO3I+dC5hdmFpbF9vdXQmJihyPXQuYXZhaWxfb3V0KSwwIT09ciYmKHQub3V0cHV0LnNldChlLnBlbmRpbmdfYnVmLnN1YmFycmF5KGUucGVuZGluZ19vdXQsZS5wZW5kaW5nX291dCtyKSx0Lm5leHRfb3V0KSx0Lm5leHRfb3V0Kz1yLGUucGVuZGluZ19vdXQrPXIsdC50b3RhbF9vdXQrPXIsdC5hdmFpbF9vdXQtPXIsZS5wZW5kaW5nLT1yLDA9PT1lLnBlbmRpbmcmJihlLnBlbmRpbmdfb3V0PTApKX0sX2U9KHQsZSk9Pnt2dCh0LHQuYmxvY2tfc3RhcnQ+PTA/dC5ibG9ja19zdGFydDotMSx0LnN0cnN0YXJ0LXQuYmxvY2tfc3RhcnQsZSksdC5ibG9ja19zdGFydD10LnN0cnN0YXJ0LGZlKHQuc3RybSl9LHBlPSh0LGUpPT57dC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109ZX0sZ2U9KHQsZSk9Pnt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109MjU1JmV9LHllPSh0LGUscixuKT0+e2xldCBpPXQuYXZhaWxfaW47cmV0dXJuIGk+biYmKGk9biksMD09PWk/MDoodC5hdmFpbF9pbi09aSxlLnNldCh0LmlucHV0LnN1YmFycmF5KHQubmV4dF9pbix0Lm5leHRfaW4raSksciksMT09PXQuc3RhdGUud3JhcD90LmFkbGVyPXV0KHQuYWRsZXIsZSxpLHIpOjI9PT10LnN0YXRlLndyYXAmJih0LmFkbGVyPWZ0KHQuYWRsZXIsZSxpLHIpKSx0Lm5leHRfaW4rPWksdC50b3RhbF9pbis9aSxpKX0sdmU9KHQsZSk9PntsZXQgcixuLGk9dC5tYXhfY2hhaW5fbGVuZ3RoLGE9dC5zdHJzdGFydCxvPXQucHJldl9sZW5ndGgscz10Lm5pY2VfbWF0Y2g7Y29uc3QgbD10LnN0cnN0YXJ0PnQud19zaXplLVd0P3Quc3Ryc3RhcnQtKHQud19zaXplLVd0KTowLGg9dC53aW5kb3csYz10LndfbWFzayx1PXQucHJldixkPXQuc3Ryc3RhcnQrR3Q7bGV0IGY9aFthK28tMV0sXz1oW2Erb107dC5wcmV2X2xlbmd0aD49dC5nb29kX21hdGNoJiYoaT4+PTIpLHM+dC5sb29rYWhlYWQmJihzPXQubG9va2FoZWFkKTtkb3tpZihyPWUsaFtyK29dPT09XyYmaFtyK28tMV09PT1mJiZoW3JdPT09aFthXSYmaFsrK3JdPT09aFthKzFdKXthKz0yLHIrKztkb3t9d2hpbGUoaFsrK2FdPT09aFsrK3JdJiZoWysrYV09PT1oWysrcl0mJmhbKythXT09PWhbKytyXSYmaFsrK2FdPT09aFsrK3JdJiZoWysrYV09PT1oWysrcl0mJmhbKythXT09PWhbKytyXSYmaFsrK2FdPT09aFsrK3JdJiZoWysrYV09PT1oWysrcl0mJmE8ZCk7aWYobj1HdC0oZC1hKSxhPWQtR3Qsbj5vKXtpZih0Lm1hdGNoX3N0YXJ0PWUsbz1uLG4+PXMpYnJlYWs7Zj1oW2Erby0xXSxfPWhbYStvXX19fXdoaWxlKChlPXVbZSZjXSk+bCYmMCE9LS1pKTtyZXR1cm4gbzw9dC5sb29rYWhlYWQ/bzp0Lmxvb2thaGVhZH0sd2U9dD0+e2NvbnN0IGU9dC53X3NpemU7bGV0IHIsbixpLGEsbztkb3tpZihhPXQud2luZG93X3NpemUtdC5sb29rYWhlYWQtdC5zdHJzdGFydCx0LnN0cnN0YXJ0Pj1lKyhlLVd0KSl7dC53aW5kb3cuc2V0KHQud2luZG93LnN1YmFycmF5KGUsZStlKSwwKSx0Lm1hdGNoX3N0YXJ0LT1lLHQuc3Ryc3RhcnQtPWUsdC5ibG9ja19zdGFydC09ZSxuPXQuaGFzaF9zaXplLHI9bjtkb3tpPXQuaGVhZFstLXJdLHQuaGVhZFtyXT1pPj1lP2ktZTowfXdoaWxlKC0tbik7bj1lLHI9bjtkb3tpPXQucHJldlstLXJdLHQucHJldltyXT1pPj1lP2ktZTowfXdoaWxlKC0tbik7YSs9ZX1pZigwPT09dC5zdHJtLmF2YWlsX2luKWJyZWFrO2lmKG49eWUodC5zdHJtLHQud2luZG93LHQuc3Ryc3RhcnQrdC5sb29rYWhlYWQsYSksdC5sb29rYWhlYWQrPW4sdC5sb29rYWhlYWQrdC5pbnNlcnQ+PXF0KWZvcihvPXQuc3Ryc3RhcnQtdC5pbnNlcnQsdC5pbnNfaD10LndpbmRvd1tvXSx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1tvKzFdKTt0Lmluc2VydCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W28rcXQtMV0pLHQucHJldltvJnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPW8sbysrLHQuaW5zZXJ0LS0sISh0Lmxvb2thaGVhZCt0Lmluc2VydDxxdCkpOyk7fXdoaWxlKHQubG9va2FoZWFkPFd0JiYwIT09dC5zdHJtLmF2YWlsX2luKX0sbWU9KHQsZSk9PntsZXQgcixuO2Zvcig7Oyl7aWYodC5sb29rYWhlYWQ8V3Qpe2lmKHdlKHQpLHQubG9va2FoZWFkPFd0JiZlPT09YnQpcmV0dXJuIGllO2lmKDA9PT10Lmxvb2thaGVhZClicmVha31pZihyPTAsdC5sb29rYWhlYWQ+PXF0JiYodC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCtxdC0xXSkscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0KSwwIT09ciYmdC5zdHJzdGFydC1yPD10Lndfc2l6ZS1XdCYmKHQubWF0Y2hfbGVuZ3RoPXZlKHQscikpLHQubWF0Y2hfbGVuZ3RoPj1xdClpZihuPXd0KHQsdC5zdHJzdGFydC10Lm1hdGNoX3N0YXJ0LHQubWF0Y2hfbGVuZ3RoLXF0KSx0Lmxvb2thaGVhZC09dC5tYXRjaF9sZW5ndGgsdC5tYXRjaF9sZW5ndGg8PXQubWF4X2xhenlfbWF0Y2gmJnQubG9va2FoZWFkPj1xdCl7dC5tYXRjaF9sZW5ndGgtLTtkb3t0LnN0cnN0YXJ0KyssdC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCtxdC0xXSkscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0fXdoaWxlKDAhPS0tdC5tYXRjaF9sZW5ndGgpO3Quc3Ryc3RhcnQrK31lbHNlIHQuc3Ryc3RhcnQrPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPTAsdC5pbnNfaD10LndpbmRvd1t0LnN0cnN0YXJ0XSx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1t0LnN0cnN0YXJ0KzFdKTtlbHNlIG49d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKztpZihuJiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9dC5zdHJzdGFydDxxdC0xP3Quc3Ryc3RhcnQ6cXQtMSxlPT09enQ/KF9lKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P29lOnNlKTp0Lmxhc3RfbGl0JiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSxiZT0odCxlKT0+e2xldCByLG4saTtmb3IoOzspe2lmKHQubG9va2FoZWFkPFd0KXtpZih3ZSh0KSx0Lmxvb2thaGVhZDxXdCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj1xdCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrcXQtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCksdC5wcmV2X2xlbmd0aD10Lm1hdGNoX2xlbmd0aCx0LnByZXZfbWF0Y2g9dC5tYXRjaF9zdGFydCx0Lm1hdGNoX2xlbmd0aD1xdC0xLDAhPT1yJiZ0LnByZXZfbGVuZ3RoPHQubWF4X2xhenlfbWF0Y2gmJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtV3QmJih0Lm1hdGNoX2xlbmd0aD12ZSh0LHIpLHQubWF0Y2hfbGVuZ3RoPD01JiYodC5zdHJhdGVneT09PU90fHx0Lm1hdGNoX2xlbmd0aD09PXF0JiZ0LnN0cnN0YXJ0LXQubWF0Y2hfc3RhcnQ+NDA5NikmJih0Lm1hdGNoX2xlbmd0aD1xdC0xKSksdC5wcmV2X2xlbmd0aD49cXQmJnQubWF0Y2hfbGVuZ3RoPD10LnByZXZfbGVuZ3RoKXtpPXQuc3Ryc3RhcnQrdC5sb29rYWhlYWQtcXQsbj13dCh0LHQuc3Ryc3RhcnQtMS10LnByZXZfbWF0Y2gsdC5wcmV2X2xlbmd0aC1xdCksdC5sb29rYWhlYWQtPXQucHJldl9sZW5ndGgtMSx0LnByZXZfbGVuZ3RoLT0yO2RveysrdC5zdHJzdGFydDw9aSYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrcXQtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCl9d2hpbGUoMCE9LS10LnByZXZfbGVuZ3RoKTtpZih0Lm1hdGNoX2F2YWlsYWJsZT0wLHQubWF0Y2hfbGVuZ3RoPXF0LTEsdC5zdHJzdGFydCsrLG4mJihfZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfWVsc2UgaWYodC5tYXRjaF9hdmFpbGFibGUpe2lmKG49d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnQtMV0pLG4mJl9lKHQsITEpLHQuc3Ryc3RhcnQrKyx0Lmxvb2thaGVhZC0tLDA9PT10LnN0cm0uYXZhaWxfb3V0KXJldHVybiBpZX1lbHNlIHQubWF0Y2hfYXZhaWxhYmxlPTEsdC5zdHJzdGFydCsrLHQubG9va2FoZWFkLS19cmV0dXJuIHQubWF0Y2hfYXZhaWxhYmxlJiYobj13dCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydC0xXSksdC5tYXRjaF9hdmFpbGFibGU9MCksdC5pbnNlcnQ9dC5zdHJzdGFydDxxdC0xP3Quc3Ryc3RhcnQ6cXQtMSxlPT09enQ/KF9lKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P29lOnNlKTp0Lmxhc3RfbGl0JiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSx4ZT0odCxlKT0+e2xldCByLG4saSxhO2NvbnN0IG89dC53aW5kb3c7Zm9yKDs7KXtpZih0Lmxvb2thaGVhZDw9R3Qpe2lmKHdlKHQpLHQubG9va2FoZWFkPD1HdCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYodC5tYXRjaF9sZW5ndGg9MCx0Lmxvb2thaGVhZD49cXQmJnQuc3Ryc3RhcnQ+MCYmKGk9dC5zdHJzdGFydC0xLG49b1tpXSxuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldKSl7YT10LnN0cnN0YXJ0K0d0O2Rve313aGlsZShuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZpPGEpO3QubWF0Y2hfbGVuZ3RoPUd0LShhLWkpLHQubWF0Y2hfbGVuZ3RoPnQubG9va2FoZWFkJiYodC5tYXRjaF9sZW5ndGg9dC5sb29rYWhlYWQpfWlmKHQubWF0Y2hfbGVuZ3RoPj1xdD8ocj13dCh0LDEsdC5tYXRjaF9sZW5ndGgtcXQpLHQubG9va2FoZWFkLT10Lm1hdGNoX2xlbmd0aCx0LnN0cnN0YXJ0Kz10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aD0wKToocj13dCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydF0pLHQubG9va2FoZWFkLS0sdC5zdHJzdGFydCsrKSxyJiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09enQ/KF9lKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P29lOnNlKTp0Lmxhc3RfbGl0JiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSxrZT0odCxlKT0+e2xldCByO2Zvcig7Oyl7aWYoMD09PXQubG9va2FoZWFkJiYod2UodCksMD09PXQubG9va2FoZWFkKSl7aWYoZT09PWJ0KXJldHVybiBpZTticmVha31pZih0Lm1hdGNoX2xlbmd0aD0wLHI9d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyxyJiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09enQ/KF9lKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P29lOnNlKTp0Lmxhc3RfbGl0JiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfTtmdW5jdGlvbiB6ZSh0LGUscixuLGkpe3RoaXMuZ29vZF9sZW5ndGg9dCx0aGlzLm1heF9sYXp5PWUsdGhpcy5uaWNlX2xlbmd0aD1yLHRoaXMubWF4X2NoYWluPW4sdGhpcy5mdW5jPWl9Y29uc3QgQWU9W25ldyB6ZSgwLDAsMCwwLCgodCxlKT0+e2xldCByPTY1NTM1O2ZvcihyPnQucGVuZGluZ19idWZfc2l6ZS01JiYocj10LnBlbmRpbmdfYnVmX3NpemUtNSk7Oyl7aWYodC5sb29rYWhlYWQ8PTEpe2lmKHdlKHQpLDA9PT10Lmxvb2thaGVhZCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9dC5zdHJzdGFydCs9dC5sb29rYWhlYWQsdC5sb29rYWhlYWQ9MDtjb25zdCBuPXQuYmxvY2tfc3RhcnQrcjtpZigoMD09PXQuc3Ryc3RhcnR8fHQuc3Ryc3RhcnQ+PW4pJiYodC5sb29rYWhlYWQ9dC5zdHJzdGFydC1uLHQuc3Ryc3RhcnQ9bixfZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllO2lmKHQuc3Ryc3RhcnQtdC5ibG9ja19zdGFydD49dC53X3NpemUtV3QmJihfZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfXJldHVybiB0Lmluc2VydD0wLGU9PT16dD8oX2UodCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/b2U6c2UpOih0LnN0cnN0YXJ0PnQuYmxvY2tfc3RhcnQmJihfZSh0LCExKSx0LnN0cm0uYXZhaWxfb3V0KSxpZSl9KSksbmV3IHplKDQsNCw4LDQsbWUpLG5ldyB6ZSg0LDUsMTYsOCxtZSksbmV3IHplKDQsNiwzMiwzMixtZSksbmV3IHplKDQsNCwxNiwxNixiZSksbmV3IHplKDgsMTYsMzIsMzIsYmUpLG5ldyB6ZSg4LDE2LDEyOCwxMjgsYmUpLG5ldyB6ZSg4LDMyLDEyOCwyNTYsYmUpLG5ldyB6ZSgzMiwxMjgsMjU4LDEwMjQsYmUpLG5ldyB6ZSgzMiwyNTgsMjU4LDQwOTYsYmUpXSxFZT10PT57dC53aW5kb3dfc2l6ZT0yKnQud19zaXplLHVlKHQuaGVhZCksdC5tYXhfbGF6eV9tYXRjaD1BZVt0LmxldmVsXS5tYXhfbGF6eSx0Lmdvb2RfbWF0Y2g9QWVbdC5sZXZlbF0uZ29vZF9sZW5ndGgsdC5uaWNlX21hdGNoPUFlW3QubGV2ZWxdLm5pY2VfbGVuZ3RoLHQubWF4X2NoYWluX2xlbmd0aD1BZVt0LmxldmVsXS5tYXhfY2hhaW4sdC5zdHJzdGFydD0wLHQuYmxvY2tfc3RhcnQ9MCx0Lmxvb2thaGVhZD0wLHQuaW5zZXJ0PTAsdC5tYXRjaF9sZW5ndGg9dC5wcmV2X2xlbmd0aD1xdC0xLHQubWF0Y2hfYXZhaWxhYmxlPTAsdC5pbnNfaD0wfTtmdW5jdGlvbiBTZSgpe3RoaXMuc3RybT1udWxsLHRoaXMuc3RhdHVzPTAsdGhpcy5wZW5kaW5nX2J1Zj1udWxsLHRoaXMucGVuZGluZ19idWZfc2l6ZT0wLHRoaXMucGVuZGluZ19vdXQ9MCx0aGlzLnBlbmRpbmc9MCx0aGlzLndyYXA9MCx0aGlzLmd6aGVhZD1udWxsLHRoaXMuZ3ppbmRleD0wLHRoaXMubWV0aG9kPVp0LHRoaXMubGFzdF9mbHVzaD0tMSx0aGlzLndfc2l6ZT0wLHRoaXMud19iaXRzPTAsdGhpcy53X21hc2s9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMud2luZG93X3NpemU9MCx0aGlzLnByZXY9bnVsbCx0aGlzLmhlYWQ9bnVsbCx0aGlzLmluc19oPTAsdGhpcy5oYXNoX3NpemU9MCx0aGlzLmhhc2hfYml0cz0wLHRoaXMuaGFzaF9tYXNrPTAsdGhpcy5oYXNoX3NoaWZ0PTAsdGhpcy5ibG9ja19zdGFydD0wLHRoaXMubWF0Y2hfbGVuZ3RoPTAsdGhpcy5wcmV2X21hdGNoPTAsdGhpcy5tYXRjaF9hdmFpbGFibGU9MCx0aGlzLnN0cnN0YXJ0PTAsdGhpcy5tYXRjaF9zdGFydD0wLHRoaXMubG9va2FoZWFkPTAsdGhpcy5wcmV2X2xlbmd0aD0wLHRoaXMubWF4X2NoYWluX2xlbmd0aD0wLHRoaXMubWF4X2xhenlfbWF0Y2g9MCx0aGlzLmxldmVsPTAsdGhpcy5zdHJhdGVneT0wLHRoaXMuZ29vZF9tYXRjaD0wLHRoaXMubmljZV9tYXRjaD0wLHRoaXMuZHluX2x0cmVlPW5ldyBVaW50MTZBcnJheSgyKkt0KSx0aGlzLmR5bl9kdHJlZT1uZXcgVWludDE2QXJyYXkoMiooMipQdCsxKSksdGhpcy5ibF90cmVlPW5ldyBVaW50MTZBcnJheSgyKigyKmp0KzEpKSx1ZSh0aGlzLmR5bl9sdHJlZSksdWUodGhpcy5keW5fZHRyZWUpLHVlKHRoaXMuYmxfdHJlZSksdGhpcy5sX2Rlc2M9bnVsbCx0aGlzLmRfZGVzYz1udWxsLHRoaXMuYmxfZGVzYz1udWxsLHRoaXMuYmxfY291bnQ9bmV3IFVpbnQxNkFycmF5KFh0KzEpLHRoaXMuaGVhcD1uZXcgVWludDE2QXJyYXkoMiokdCsxKSx1ZSh0aGlzLmhlYXApLHRoaXMuaGVhcF9sZW49MCx0aGlzLmhlYXBfbWF4PTAsdGhpcy5kZXB0aD1uZXcgVWludDE2QXJyYXkoMiokdCsxKSx1ZSh0aGlzLmRlcHRoKSx0aGlzLmxfYnVmPTAsdGhpcy5saXRfYnVmc2l6ZT0wLHRoaXMubGFzdF9saXQ9MCx0aGlzLmRfYnVmPTAsdGhpcy5vcHRfbGVuPTAsdGhpcy5zdGF0aWNfbGVuPTAsdGhpcy5tYXRjaGVzPTAsdGhpcy5pbnNlcnQ9MCx0aGlzLmJpX2J1Zj0wLHRoaXMuYmlfdmFsaWQ9MH1jb25zdCBCZT10PT57aWYoIXR8fCF0LnN0YXRlKXJldHVybiBoZSh0LEJ0KTt0LnRvdGFsX2luPXQudG90YWxfb3V0PTAsdC5kYXRhX3R5cGU9SHQ7Y29uc3QgZT10LnN0YXRlO3JldHVybiBlLnBlbmRpbmc9MCxlLnBlbmRpbmdfb3V0PTAsZS53cmFwPDAmJihlLndyYXA9LWUud3JhcCksZS5zdGF0dXM9ZS53cmFwP1Z0OnJlLHQuYWRsZXI9Mj09PWUud3JhcD8wOjEsZS5sYXN0X2ZsdXNoPWJ0LGd0KGUpLEV0fSxMZT10PT57Y29uc3QgZT1CZSh0KTtyZXR1cm4gZT09PUV0JiZFZSh0LnN0YXRlKSxlfSxSZT0odCxlLHIsbixpLGEpPT57aWYoIXQpcmV0dXJuIEJ0O2xldCBvPTE7aWYoZT09PUR0JiYoZT02KSxuPDA/KG89MCxuPS1uKTpuPjE1JiYobz0yLG4tPTE2KSxpPDF8fGk+TXR8fHIhPT1adHx8bjw4fHxuPjE1fHxlPDB8fGU+OXx8YTwwfHxhPlR0KXJldHVybiBoZSh0LEJ0KTs4PT09biYmKG49OSk7Y29uc3Qgcz1uZXcgU2U7cmV0dXJuIHQuc3RhdGU9cyxzLnN0cm09dCxzLndyYXA9byxzLmd6aGVhZD1udWxsLHMud19iaXRzPW4scy53X3NpemU9MTw8cy53X2JpdHMscy53X21hc2s9cy53X3NpemUtMSxzLmhhc2hfYml0cz1pKzcscy5oYXNoX3NpemU9MTw8cy5oYXNoX2JpdHMscy5oYXNoX21hc2s9cy5oYXNoX3NpemUtMSxzLmhhc2hfc2hpZnQ9fn4oKHMuaGFzaF9iaXRzK3F0LTEpL3F0KSxzLndpbmRvdz1uZXcgVWludDhBcnJheSgyKnMud19zaXplKSxzLmhlYWQ9bmV3IFVpbnQxNkFycmF5KHMuaGFzaF9zaXplKSxzLnByZXY9bmV3IFVpbnQxNkFycmF5KHMud19zaXplKSxzLmxpdF9idWZzaXplPTE8PGkrNixzLnBlbmRpbmdfYnVmX3NpemU9NCpzLmxpdF9idWZzaXplLHMucGVuZGluZ19idWY9bmV3IFVpbnQ4QXJyYXkocy5wZW5kaW5nX2J1Zl9zaXplKSxzLmRfYnVmPTEqcy5saXRfYnVmc2l6ZSxzLmxfYnVmPTMqcy5saXRfYnVmc2l6ZSxzLmxldmVsPWUscy5zdHJhdGVneT1hLHMubWV0aG9kPXIsTGUodCl9O3ZhciBEZT17ZGVmbGF0ZUluaXQ6KHQsZSk9PlJlKHQsZSxadCxOdCxJdCxGdCksZGVmbGF0ZUluaXQyOlJlLGRlZmxhdGVSZXNldDpMZSxkZWZsYXRlUmVzZXRLZWVwOkJlLGRlZmxhdGVTZXRIZWFkZXI6KHQsZSk9PnQmJnQuc3RhdGU/MiE9PXQuc3RhdGUud3JhcD9CdDoodC5zdGF0ZS5nemhlYWQ9ZSxFdCk6QnQsZGVmbGF0ZToodCxlKT0+e2xldCByLG47aWYoIXR8fCF0LnN0YXRlfHxlPkF0fHxlPDApcmV0dXJuIHQ/aGUodCxCdCk6QnQ7Y29uc3QgaT10LnN0YXRlO2lmKCF0Lm91dHB1dHx8IXQuaW5wdXQmJjAhPT10LmF2YWlsX2lufHxpLnN0YXR1cz09PW5lJiZlIT09enQpcmV0dXJuIGhlKHQsMD09PXQuYXZhaWxfb3V0P1J0OkJ0KTtpLnN0cm09dDtjb25zdCBhPWkubGFzdF9mbHVzaDtpZihpLmxhc3RfZmx1c2g9ZSxpLnN0YXR1cz09PVZ0KWlmKDI9PT1pLndyYXApdC5hZGxlcj0wLHBlKGksMzEpLHBlKGksMTM5KSxwZShpLDgpLGkuZ3poZWFkPyhwZShpLChpLmd6aGVhZC50ZXh0PzE6MCkrKGkuZ3poZWFkLmhjcmM/MjowKSsoaS5nemhlYWQuZXh0cmE/NDowKSsoaS5nemhlYWQubmFtZT84OjApKyhpLmd6aGVhZC5jb21tZW50PzE2OjApKSxwZShpLDI1NSZpLmd6aGVhZC50aW1lKSxwZShpLGkuZ3poZWFkLnRpbWU+PjgmMjU1KSxwZShpLGkuZ3poZWFkLnRpbWU+PjE2JjI1NSkscGUoaSxpLmd6aGVhZC50aW1lPj4yNCYyNTUpLHBlKGksOT09PWkubGV2ZWw/MjppLnN0cmF0ZWd5Pj1VdHx8aS5sZXZlbDwyPzQ6MCkscGUoaSwyNTUmaS5nemhlYWQub3MpLGkuZ3poZWFkLmV4dHJhJiZpLmd6aGVhZC5leHRyYS5sZW5ndGgmJihwZShpLDI1NSZpLmd6aGVhZC5leHRyYS5sZW5ndGgpLHBlKGksaS5nemhlYWQuZXh0cmEubGVuZ3RoPj44JjI1NSkpLGkuZ3poZWFkLmhjcmMmJih0LmFkbGVyPWZ0KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmcsMCkpLGkuZ3ppbmRleD0wLGkuc3RhdHVzPVF0KToocGUoaSwwKSxwZShpLDApLHBlKGksMCkscGUoaSwwKSxwZShpLDApLHBlKGksOT09PWkubGV2ZWw/MjppLnN0cmF0ZWd5Pj1VdHx8aS5sZXZlbDwyPzQ6MCkscGUoaSxsZSksaS5zdGF0dXM9cmUpO2Vsc2V7bGV0IGU9WnQrKGkud19iaXRzLTg8PDQpPDw4LHI9LTE7cj1pLnN0cmF0ZWd5Pj1VdHx8aS5sZXZlbDwyPzA6aS5sZXZlbDw2PzE6Nj09PWkubGV2ZWw/MjozLGV8PXI8PDYsMCE9PWkuc3Ryc3RhcnQmJihlfD1ZdCksZSs9MzEtZSUzMSxpLnN0YXR1cz1yZSxnZShpLGUpLDAhPT1pLnN0cnN0YXJ0JiYoZ2UoaSx0LmFkbGVyPj4+MTYpLGdlKGksNjU1MzUmdC5hZGxlcikpLHQuYWRsZXI9MX1pZihpLnN0YXR1cz09PVF0KWlmKGkuZ3poZWFkLmV4dHJhKXtmb3Iocj1pLnBlbmRpbmc7aS5nemluZGV4PCg2NTUzNSZpLmd6aGVhZC5leHRyYS5sZW5ndGgpJiYoaS5wZW5kaW5nIT09aS5wZW5kaW5nX2J1Zl9zaXplfHwoaS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPWZ0KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksZmUodCkscj1pLnBlbmRpbmcsaS5wZW5kaW5nIT09aS5wZW5kaW5nX2J1Zl9zaXplKSk7KXBlKGksMjU1JmkuZ3poZWFkLmV4dHJhW2kuZ3ppbmRleF0pLGkuZ3ppbmRleCsrO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1mdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLGkuZ3ppbmRleD09PWkuZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGkuZ3ppbmRleD0wLGkuc3RhdHVzPUp0KX1lbHNlIGkuc3RhdHVzPUp0O2lmKGkuc3RhdHVzPT09SnQpaWYoaS5nemhlYWQubmFtZSl7cj1pLnBlbmRpbmc7ZG97aWYoaS5wZW5kaW5nPT09aS5wZW5kaW5nX2J1Zl9zaXplJiYoaS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPWZ0KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksZmUodCkscj1pLnBlbmRpbmcsaS5wZW5kaW5nPT09aS5wZW5kaW5nX2J1Zl9zaXplKSl7bj0xO2JyZWFrfW49aS5nemluZGV4PGkuZ3poZWFkLm5hbWUubGVuZ3RoPzI1NSZpLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQoaS5nemluZGV4KyspOjAscGUoaSxuKX13aGlsZSgwIT09bik7aS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPWZ0KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksMD09PW4mJihpLmd6aW5kZXg9MCxpLnN0YXR1cz10ZSl9ZWxzZSBpLnN0YXR1cz10ZTtpZihpLnN0YXR1cz09PXRlKWlmKGkuZ3poZWFkLmNvbW1lbnQpe3I9aS5wZW5kaW5nO2Rve2lmKGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSYmKGkuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1mdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLGZlKHQpLHI9aS5wZW5kaW5nLGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSkpe249MTticmVha31uPWkuZ3ppbmRleDxpLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmaS5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KGkuZ3ppbmRleCsrKTowLHBlKGksbil9d2hpbGUoMCE9PW4pO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1mdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLDA9PT1uJiYoaS5zdGF0dXM9ZWUpfWVsc2UgaS5zdGF0dXM9ZWU7aWYoaS5zdGF0dXM9PT1lZSYmKGkuZ3poZWFkLmhjcmM/KGkucGVuZGluZysyPmkucGVuZGluZ19idWZfc2l6ZSYmZmUodCksaS5wZW5kaW5nKzI8PWkucGVuZGluZ19idWZfc2l6ZSYmKHBlKGksMjU1JnQuYWRsZXIpLHBlKGksdC5hZGxlcj4+OCYyNTUpLHQuYWRsZXI9MCxpLnN0YXR1cz1yZSkpOmkuc3RhdHVzPXJlKSwwIT09aS5wZW5kaW5nKXtpZihmZSh0KSwwPT09dC5hdmFpbF9vdXQpcmV0dXJuIGkubGFzdF9mbHVzaD0tMSxFdH1lbHNlIGlmKDA9PT10LmF2YWlsX2luJiZjZShlKTw9Y2UoYSkmJmUhPT16dClyZXR1cm4gaGUodCxSdCk7aWYoaS5zdGF0dXM9PT1uZSYmMCE9PXQuYXZhaWxfaW4pcmV0dXJuIGhlKHQsUnQpO2lmKDAhPT10LmF2YWlsX2lufHwwIT09aS5sb29rYWhlYWR8fGUhPT1idCYmaS5zdGF0dXMhPT1uZSl7bGV0IHI9aS5zdHJhdGVneT09PVV0P2tlKGksZSk6aS5zdHJhdGVneT09PUN0P3hlKGksZSk6QWVbaS5sZXZlbF0uZnVuYyhpLGUpO2lmKHIhPT1vZSYmciE9PXNlfHwoaS5zdGF0dXM9bmUpLHI9PT1pZXx8cj09PW9lKXJldHVybiAwPT09dC5hdmFpbF9vdXQmJihpLmxhc3RfZmx1c2g9LTEpLEV0O2lmKHI9PT1hZSYmKGU9PT14dD9tdChpKTplIT09QXQmJih5dChpLDAsMCwhMSksZT09PWt0JiYodWUoaS5oZWFkKSwwPT09aS5sb29rYWhlYWQmJihpLnN0cnN0YXJ0PTAsaS5ibG9ja19zdGFydD0wLGkuaW5zZXJ0PTApKSksZmUodCksMD09PXQuYXZhaWxfb3V0KSlyZXR1cm4gaS5sYXN0X2ZsdXNoPS0xLEV0fXJldHVybiBlIT09enQ/RXQ6aS53cmFwPD0wP1N0OigyPT09aS53cmFwPyhwZShpLDI1NSZ0LmFkbGVyKSxwZShpLHQuYWRsZXI+PjgmMjU1KSxwZShpLHQuYWRsZXI+PjE2JjI1NSkscGUoaSx0LmFkbGVyPj4yNCYyNTUpLHBlKGksMjU1JnQudG90YWxfaW4pLHBlKGksdC50b3RhbF9pbj4+OCYyNTUpLHBlKGksdC50b3RhbF9pbj4+MTYmMjU1KSxwZShpLHQudG90YWxfaW4+PjI0JjI1NSkpOihnZShpLHQuYWRsZXI+Pj4xNiksZ2UoaSw2NTUzNSZ0LmFkbGVyKSksZmUodCksaS53cmFwPjAmJihpLndyYXA9LWkud3JhcCksMCE9PWkucGVuZGluZz9FdDpTdCl9LGRlZmxhdGVFbmQ6dD0+e2lmKCF0fHwhdC5zdGF0ZSlyZXR1cm4gQnQ7Y29uc3QgZT10LnN0YXRlLnN0YXR1cztyZXR1cm4gZSE9PVZ0JiZlIT09UXQmJmUhPT1KdCYmZSE9PXRlJiZlIT09ZWUmJmUhPT1yZSYmZSE9PW5lP2hlKHQsQnQpOih0LnN0YXRlPW51bGwsZT09PXJlP2hlKHQsTHQpOkV0KX0sZGVmbGF0ZVNldERpY3Rpb25hcnk6KHQsZSk9PntsZXQgcj1lLmxlbmd0aDtpZighdHx8IXQuc3RhdGUpcmV0dXJuIEJ0O2NvbnN0IG49dC5zdGF0ZSxpPW4ud3JhcDtpZigyPT09aXx8MT09PWkmJm4uc3RhdHVzIT09VnR8fG4ubG9va2FoZWFkKXJldHVybiBCdDtpZigxPT09aSYmKHQuYWRsZXI9dXQodC5hZGxlcixlLHIsMCkpLG4ud3JhcD0wLHI+PW4ud19zaXplKXswPT09aSYmKHVlKG4uaGVhZCksbi5zdHJzdGFydD0wLG4uYmxvY2tfc3RhcnQ9MCxuLmluc2VydD0wKTtsZXQgdD1uZXcgVWludDhBcnJheShuLndfc2l6ZSk7dC5zZXQoZS5zdWJhcnJheShyLW4ud19zaXplLHIpLDApLGU9dCxyPW4ud19zaXplfWNvbnN0IGE9dC5hdmFpbF9pbixvPXQubmV4dF9pbixzPXQuaW5wdXQ7Zm9yKHQuYXZhaWxfaW49cix0Lm5leHRfaW49MCx0LmlucHV0PWUsd2Uobik7bi5sb29rYWhlYWQ+PXF0Oyl7bGV0IHQ9bi5zdHJzdGFydCxlPW4ubG9va2FoZWFkLShxdC0xKTtkb3tuLmluc19oPWRlKG4sbi5pbnNfaCxuLndpbmRvd1t0K3F0LTFdKSxuLnByZXZbdCZuLndfbWFza109bi5oZWFkW24uaW5zX2hdLG4uaGVhZFtuLmluc19oXT10LHQrK313aGlsZSgtLWUpO24uc3Ryc3RhcnQ9dCxuLmxvb2thaGVhZD1xdC0xLHdlKG4pfXJldHVybiBuLnN0cnN0YXJ0Kz1uLmxvb2thaGVhZCxuLmJsb2NrX3N0YXJ0PW4uc3Ryc3RhcnQsbi5pbnNlcnQ9bi5sb29rYWhlYWQsbi5sb29rYWhlYWQ9MCxuLm1hdGNoX2xlbmd0aD1uLnByZXZfbGVuZ3RoPXF0LTEsbi5tYXRjaF9hdmFpbGFibGU9MCx0Lm5leHRfaW49byx0LmlucHV0PXMsdC5hdmFpbF9pbj1hLG4ud3JhcD1pLEV0fSxkZWZsYXRlSW5mbzoicGFrbyBkZWZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSJ9O2NvbnN0IE9lPSh0LGUpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKTt2YXIgVWU9ZnVuY3Rpb24odCl7Y29uc3QgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7Zm9yKDtlLmxlbmd0aDspe2NvbnN0IHI9ZS5zaGlmdCgpO2lmKHIpe2lmKCJvYmplY3QiIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKHIrIm11c3QgYmUgbm9uLW9iamVjdCIpO2Zvcihjb25zdCBlIGluIHIpT2UocixlKSYmKHRbZV09cltlXSl9fXJldHVybiB0fSxDZT17YXNzaWduOlVlLGZsYXR0ZW5DaHVua3M6dD0+e2xldCBlPTA7Zm9yKGxldCByPTAsbj10Lmxlbmd0aDtyPG47cisrKWUrPXRbcl0ubGVuZ3RoO2NvbnN0IHI9bmV3IFVpbnQ4QXJyYXkoZSk7Zm9yKGxldCBlPTAsbj0wLGk9dC5sZW5ndGg7ZTxpO2UrKyl7bGV0IGk9dFtlXTtyLnNldChpLG4pLG4rPWkubGVuZ3RofXJldHVybiByfX07bGV0IFRlPSEwO3RyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKHQpe1RlPSExfWNvbnN0IEZlPW5ldyBVaW50OEFycmF5KDI1Nik7Zm9yKGxldCB0PTA7dDwyNTY7dCsrKUZlW3RdPXQ+PTI1Mj82OnQ+PTI0OD81OnQ+PTI0MD80OnQ+PTIyND8zOnQ+PTE5Mj8yOjE7RmVbMjU0XT1GZVsyNTRdPTE7Y29uc3QgSGU9KHQsZSk9PntpZihlPDY1NTM0JiZ0LnN1YmFycmF5JiZUZSlyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHQubGVuZ3RoPT09ZT90OnQuc3ViYXJyYXkoMCxlKSk7bGV0IHI9IiI7Zm9yKGxldCBuPTA7bjxlO24rKylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO3JldHVybiByfTt2YXIgWmU9e3N0cmluZzJidWY6dD0+e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBUZXh0RW5jb2RlciYmVGV4dEVuY29kZXIucHJvdG90eXBlLmVuY29kZSlyZXR1cm4obmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCk7bGV0IGUscixuLGksYSxvPXQubGVuZ3RoLHM9MDtmb3IoaT0wO2k8bztpKyspcj10LmNoYXJDb2RlQXQoaSksNTUyOTY9PSg2NDUxMiZyKSYmaSsxPG8mJihuPXQuY2hhckNvZGVBdChpKzEpLDU2MzIwPT0oNjQ1MTImbikmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGkrKykpLHMrPXI8MTI4PzE6cjwyMDQ4PzI6cjw2NTUzNj8zOjQ7Zm9yKGU9bmV3IFVpbnQ4QXJyYXkocyksYT0wLGk9MDthPHM7aSsrKXI9dC5jaGFyQ29kZUF0KGkpLDU1Mjk2PT0oNjQ1MTImcikmJmkrMTxvJiYobj10LmNoYXJDb2RlQXQoaSsxKSw1NjMyMD09KDY0NTEyJm4pJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxpKyspKSxyPDEyOD9lW2ErK109cjpyPDIwNDg/KGVbYSsrXT0xOTJ8cj4+PjYsZVthKytdPTEyOHw2MyZyKTpyPDY1NTM2PyhlW2ErK109MjI0fHI+Pj4xMixlW2ErK109MTI4fHI+Pj42JjYzLGVbYSsrXT0xMjh8NjMmcik6KGVbYSsrXT0yNDB8cj4+PjE4LGVbYSsrXT0xMjh8cj4+PjEyJjYzLGVbYSsrXT0xMjh8cj4+PjYmNjMsZVthKytdPTEyOHw2MyZyKTtyZXR1cm4gZX0sYnVmMnN0cmluZzoodCxlKT0+e2NvbnN0IHI9ZXx8dC5sZW5ndGg7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFRleHREZWNvZGVyJiZUZXh0RGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlKXJldHVybihuZXcgVGV4dERlY29kZXIpLmRlY29kZSh0LnN1YmFycmF5KDAsZSkpO2xldCBuLGk7Y29uc3QgYT1uZXcgQXJyYXkoMipyKTtmb3IoaT0wLG49MDtuPHI7KXtsZXQgZT10W24rK107aWYoZTwxMjgpe2FbaSsrXT1lO2NvbnRpbnVlfWxldCBvPUZlW2VdO2lmKG8+NClhW2krK109NjU1MzMsbis9by0xO2Vsc2V7Zm9yKGUmPTI9PT1vPzMxOjM9PT1vPzE1Ojc7bz4xJiZuPHI7KWU9ZTw8Nnw2MyZ0W24rK10sby0tO28+MT9hW2krK109NjU1MzM6ZTw2NTUzNj9hW2krK109ZTooZS09NjU1MzYsYVtpKytdPTU1Mjk2fGU+PjEwJjEwMjMsYVtpKytdPTU2MzIwfDEwMjMmZSl9fXJldHVybiBIZShhLGkpfSx1dGY4Ym9yZGVyOih0LGUpPT57KGU9ZXx8dC5sZW5ndGgpPnQubGVuZ3RoJiYoZT10Lmxlbmd0aCk7bGV0IHI9ZS0xO2Zvcig7cj49MCYmMTI4PT0oMTkyJnRbcl0pOylyLS07cmV0dXJuIHI8MHx8MD09PXI/ZTpyK0ZlW3Rbcl1dPmU/cjplfX07ZnVuY3Rpb24gTWUoKXt0aGlzLmlucHV0PW51bGwsdGhpcy5uZXh0X2luPTAsdGhpcy5hdmFpbF9pbj0wLHRoaXMudG90YWxfaW49MCx0aGlzLm91dHB1dD1udWxsLHRoaXMubmV4dF9vdXQ9MCx0aGlzLmF2YWlsX291dD0wLHRoaXMudG90YWxfb3V0PTAsdGhpcy5tc2c9IiIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfXZhciBOZT1NZTtjb25zdCBJZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLHtaX05PX0ZMVVNIOiRlLFpfU1lOQ19GTFVTSDpQZSxaX0ZVTExfRkxVU0g6amUsWl9GSU5JU0g6S2UsWl9PSzpYZSxaX1NUUkVBTV9FTkQ6cWUsWl9ERUZBVUxUX0NPTVBSRVNTSU9OOkdlLFpfREVGQVVMVF9TVFJBVEVHWTpXZSxaX0RFRkxBVEVEOlllfT1wdDtmdW5jdGlvbiBWZSh0KXt0aGlzLm9wdGlvbnM9Q2UuYXNzaWduKHtsZXZlbDpHZSxtZXRob2Q6WWUsY2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MTUsbWVtTGV2ZWw6OCxzdHJhdGVneTpXZX0sdHx8e30pO2xldCBlPXRoaXMub3B0aW9ucztlLnJhdyYmZS53aW5kb3dCaXRzPjA/ZS53aW5kb3dCaXRzPS1lLndpbmRvd0JpdHM6ZS5nemlwJiZlLndpbmRvd0JpdHM+MCYmZS53aW5kb3dCaXRzPDE2JiYoZS53aW5kb3dCaXRzKz0xNiksdGhpcy5lcnI9MCx0aGlzLm1zZz0iIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcgTmUsdGhpcy5zdHJtLmF2YWlsX291dD0wO2xldCByPURlLmRlZmxhdGVJbml0Mih0aGlzLnN0cm0sZS5sZXZlbCxlLm1ldGhvZCxlLndpbmRvd0JpdHMsZS5tZW1MZXZlbCxlLnN0cmF0ZWd5KTtpZihyIT09WGUpdGhyb3cgbmV3IEVycm9yKF90W3JdKTtpZihlLmhlYWRlciYmRGUuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sZS5oZWFkZXIpLGUuZGljdGlvbmFyeSl7bGV0IHQ7aWYodD0ic3RyaW5nIj09dHlwZW9mIGUuZGljdGlvbmFyeT9aZS5zdHJpbmcyYnVmKGUuZGljdGlvbmFyeSk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PUllLmNhbGwoZS5kaWN0aW9uYXJ5KT9uZXcgVWludDhBcnJheShlLmRpY3Rpb25hcnkpOmUuZGljdGlvbmFyeSxyPURlLmRlZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSx0KSxyIT09WGUpdGhyb3cgbmV3IEVycm9yKF90W3JdKTt0aGlzLl9kaWN0X3NldD0hMH19ZnVuY3Rpb24gUWUodCxlKXtjb25zdCByPW5ldyBWZShlKTtpZihyLnB1c2godCwhMCksci5lcnIpdGhyb3cgci5tc2d8fF90W3IuZXJyXTtyZXR1cm4gci5yZXN1bHR9ZnVuY3Rpb24gSmUodCxlKXtyZXR1cm4oZT1lfHx7fSkucmF3PSEwLFFlKHQsZSl9ZnVuY3Rpb24gdHIodCxlKXtyZXR1cm4oZT1lfHx7fSkuZ3ppcD0hMCxRZSh0LGUpfVZlLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgcj10aGlzLnN0cm0sbj10aGlzLm9wdGlvbnMuY2h1bmtTaXplO2xldCBpLGE7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtmb3IoYT1lPT09fn5lP2U6ITA9PT1lP0tlOiRlLCJzdHJpbmciPT10eXBlb2YgdD9yLmlucHV0PVplLnN0cmluZzJidWYodCk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PUllLmNhbGwodCk/ci5pbnB1dD1uZXcgVWludDhBcnJheSh0KTpyLmlucHV0PXQsci5uZXh0X2luPTAsci5hdmFpbF9pbj1yLmlucHV0Lmxlbmd0aDs7KWlmKDA9PT1yLmF2YWlsX291dCYmKHIub3V0cHV0PW5ldyBVaW50OEFycmF5KG4pLHIubmV4dF9vdXQ9MCxyLmF2YWlsX291dD1uKSwoYT09PVBlfHxhPT09amUpJiZyLmF2YWlsX291dDw9Nil0aGlzLm9uRGF0YShyLm91dHB1dC5zdWJhcnJheSgwLHIubmV4dF9vdXQpKSxyLmF2YWlsX291dD0wO2Vsc2V7aWYoaT1EZS5kZWZsYXRlKHIsYSksaT09PXFlKXJldHVybiByLm5leHRfb3V0PjAmJnRoaXMub25EYXRhKHIub3V0cHV0LnN1YmFycmF5KDAsci5uZXh0X291dCkpLGk9RGUuZGVmbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQoaSksdGhpcy5lbmRlZD0hMCxpPT09WGU7aWYoMCE9PXIuYXZhaWxfb3V0KXtpZihhPjAmJnIubmV4dF9vdXQ+MCl0aGlzLm9uRGF0YShyLm91dHB1dC5zdWJhcnJheSgwLHIubmV4dF9vdXQpKSxyLmF2YWlsX291dD0wO2Vsc2UgaWYoMD09PXIuYXZhaWxfaW4pYnJlYWt9ZWxzZSB0aGlzLm9uRGF0YShyLm91dHB1dCl9cmV0dXJuITB9LFZlLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24odCl7dGhpcy5jaHVua3MucHVzaCh0KX0sVmUucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKHQpe3Q9PT1YZSYmKHRoaXMucmVzdWx0PUNlLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSx0aGlzLmNodW5rcz1bXSx0aGlzLmVycj10LHRoaXMubXNnPXRoaXMuc3RybS5tc2d9O3ZhciBlcj1WZSxycj1RZSxucj1KZSxpcj10cixhcj1wdCxvcj17RGVmbGF0ZTplcixkZWZsYXRlOnJyLGRlZmxhdGVSYXc6bnIsZ3ppcDppcixjb25zdGFudHM6YXJ9O3QuRGVmbGF0ZT1lcix0LmNvbnN0YW50cz1hcix0LmRlZmF1bHQ9b3IsdC5kZWZsYXRlPXJyLHQuZGVmbGF0ZVJhdz1ucix0Lmd6aXA9aXIsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSkoZS5leHBvcnRzKTt2YXIgcixuPXtleHBvcnRzOnt9fSxpPXtleHBvcnRzOnt9fTtpLmV4cG9ydHM9KHI9cnx8ZnVuY3Rpb24oZSxyKXt2YXIgbjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LmNyeXB0byYmKG49d2luZG93LmNyeXB0byksInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLmNyeXB0byYmKG49c2VsZi5jcnlwdG8pLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcy5jcnlwdG8mJihuPWdsb2JhbFRoaXMuY3J5cHRvKSwhbiYmInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5tc0NyeXB0byYmKG49d2luZG93Lm1zQ3J5cHRvKSwhbiYmdm9pZCAwIT09dCYmdC5jcnlwdG8mJihuPXQuY3J5cHRvKSwhbil0cnl7bj11bmRlZmluZWR9Y2F0Y2godCl7fXZhciBpPWZ1bmN0aW9uKCl7aWYobil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4uZ2V0UmFuZG9tVmFsdWVzKXRyeXtyZXR1cm4gbi5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQzMkFycmF5KDEpKVswXX1jYXRjaCh0KXt9aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4ucmFuZG9tQnl0ZXMpdHJ5e3JldHVybiBuLnJhbmRvbUJ5dGVzKDQpLnJlYWRJbnQzMkxFKCl9Y2F0Y2godCl7fX10aHJvdyBuZXcgRXJyb3IoIk5hdGl2ZSBjcnlwdG8gbW9kdWxlIGNvdWxkIG5vdCBiZSB1c2VkIHRvIGdldCBzZWN1cmUgcmFuZG9tIG51bWJlci4iKX0sYT1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByO3JldHVybiB0LnByb3RvdHlwZT1lLHI9bmV3IHQsdC5wcm90b3R5cGU9bnVsbCxyfX0oKSxvPXt9LHM9by5saWI9e30sbD1zLkJhc2U9e2V4dGVuZDpmdW5jdGlvbih0KXt2YXIgZT1hKHRoaXMpO3JldHVybiB0JiZlLm1peEluKHQpLGUuaGFzT3duUHJvcGVydHkoImluaXQiKSYmdGhpcy5pbml0IT09ZS5pbml0fHwoZS5pbml0PWZ1bmN0aW9uKCl7ZS4kc3VwZXIuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSxlLmluaXQucHJvdG90eXBlPWUsZS4kc3VwZXI9dGhpcyxlfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmV4dGVuZCgpO3JldHVybiB0LmluaXQuYXBwbHkodCxhcmd1bWVudHMpLHR9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJih0aGlzW2VdPXRbZV0pO3QuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPXQudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LGg9cy5Xb3JkQXJyYXk9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxlKXt0PXRoaXMud29yZHM9dHx8W10sdGhpcy5zaWdCeXRlcz1lIT1yP2U6NCp0Lmxlbmd0aH0sdG9TdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuKHR8fHUpLnN0cmluZ2lmeSh0aGlzKX0sY29uY2F0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMud29yZHMscj10LndvcmRzLG49dGhpcy5zaWdCeXRlcyxpPXQuc2lnQnl0ZXM7aWYodGhpcy5jbGFtcCgpLG4lNClmb3IodmFyIGE9MDthPGk7YSsrKXt2YXIgbz1yW2E+Pj4yXT4+PjI0LWElNCo4JjI1NTtlW24rYT4+PjJdfD1vPDwyNC0obithKSU0Kjh9ZWxzZSBmb3IodmFyIHM9MDtzPGk7cys9NCllW24rcz4+PjJdPXJbcz4+PjJdO3JldHVybiB0aGlzLnNpZ0J5dGVzKz1pLHRoaXN9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy53b3JkcyxyPXRoaXMuc2lnQnl0ZXM7dFtyPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLXIlNCo4LHQubGVuZ3RoPWUuY2VpbChyLzQpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWwuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLHR9LHJhbmRvbTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10scj0wO3I8dDtyKz00KWUucHVzaChpKCkpO3JldHVybiBuZXcgaC5pbml0KGUsdCl9fSksYz1vLmVuYz17fSx1PWMuSGV4PXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49W10saT0wO2k8cjtpKyspe3ZhciBhPWVbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O24ucHVzaCgoYT4+PjQpLnRvU3RyaW5nKDE2KSksbi5wdXNoKCgxNSZhKS50b1N0cmluZygxNikpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgscj1bXSxuPTA7bjxlO24rPTIpcltuPj4+M118PXBhcnNlSW50KHQuc3Vic3RyKG4sMiksMTYpPDwyNC1uJTgqNDtyZXR1cm4gbmV3IGguaW5pdChyLGUvMil9fSxkPWMuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49W10saT0wO2k8cjtpKyspe3ZhciBhPWVbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O24ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKX1yZXR1cm4gbi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLHI9W10sbj0wO248ZTtuKyspcltuPj4+Ml18PSgyNTUmdC5jaGFyQ29kZUF0KG4pKTw8MjQtbiU0Kjg7cmV0dXJuIG5ldyBoLmluaXQocixlKX19LGY9Yy5VdGY4PXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGQuc3RyaW5naWZ5KHQpKSl9Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKCJNYWxmb3JtZWQgVVRGLTggZGF0YSIpfX0scGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIGQucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHQpKSl9fSxfPXMuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1sLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBoLmluaXQsdGhpcy5fbkRhdGFCeXRlcz0wfSxfYXBwZW5kOmZ1bmN0aW9uKHQpeyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9Zi5wYXJzZSh0KSksdGhpcy5fZGF0YS5jb25jYXQodCksdGhpcy5fbkRhdGFCeXRlcys9dC5zaWdCeXRlc30sX3Byb2Nlc3M6ZnVuY3Rpb24odCl7dmFyIHIsbj10aGlzLl9kYXRhLGk9bi53b3JkcyxhPW4uc2lnQnl0ZXMsbz10aGlzLmJsb2NrU2l6ZSxzPWEvKDQqbyksbD0ocz10P2UuY2VpbChzKTplLm1heCgoMHxzKS10aGlzLl9taW5CdWZmZXJTaXplLDApKSpvLGM9ZS5taW4oNCpsLGEpO2lmKGwpe2Zvcih2YXIgdT0wO3U8bDt1Kz1vKXRoaXMuX2RvUHJvY2Vzc0Jsb2NrKGksdSk7cj1pLnNwbGljZSgwLGwpLG4uc2lnQnl0ZXMtPWN9cmV0dXJuIG5ldyBoLmluaXQocixjKX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1sLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpLHR9LF9taW5CdWZmZXJTaXplOjB9KTtzLkhhc2hlcj1fLmV4dGVuZCh7Y2ZnOmwuZXh0ZW5kKCksaW5pdDpmdW5jdGlvbih0KXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQodCksdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe18ucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYXBwZW5kKHQpLHRoaXMuX3Byb2Nlc3MoKSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdGhpcy5fYXBwZW5kKHQpLHRoaXMuX2RvRmluYWxpemUoKX0sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUscil7cmV0dXJuIG5ldyB0LmluaXQocikuZmluYWxpemUoZSl9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IHAuSE1BQy5pbml0KHQscikuZmluYWxpemUoZSl9fX0pO3ZhciBwPW8uYWxnbz17fTtyZXR1cm4gb30oTWF0aCksciksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLldvcmRBcnJheTtmdW5jdGlvbiBuKHQsZSxuKXtmb3IodmFyIGk9W10sYT0wLG89MDtvPGU7bysrKWlmKG8lNCl7dmFyIHM9blt0LmNoYXJDb2RlQXQoby0xKV08PG8lNCoyfG5bdC5jaGFyQ29kZUF0KG8pXT4+PjYtbyU0KjI7aVthPj4+Ml18PXM8PDI0LWElNCo4LGErK31yZXR1cm4gci5jcmVhdGUoaSxhKX1lLmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt2YXIgZT10LndvcmRzLHI9dC5zaWdCeXRlcyxuPXRoaXMuX21hcDt0LmNsYW1wKCk7Zm9yKHZhciBpPVtdLGE9MDthPHI7YSs9Mylmb3IodmFyIG89KGVbYT4+PjJdPj4+MjQtYSU0KjgmMjU1KTw8MTZ8KGVbYSsxPj4+Ml0+Pj4yNC0oYSsxKSU0KjgmMjU1KTw8OHxlW2ErMj4+PjJdPj4+MjQtKGErMiklNCo4JjI1NSxzPTA7czw0JiZhKy43NSpzPHI7cysrKWkucHVzaChuLmNoYXJBdChvPj4+NiooMy1zKSY2MykpO3ZhciBsPW4uY2hhckF0KDY0KTtpZihsKWZvcig7aS5sZW5ndGglNDspaS5wdXNoKGwpO3JldHVybiBpLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aCxyPXRoaXMuX21hcCxpPXRoaXMuX3JldmVyc2VNYXA7aWYoIWkpe2k9dGhpcy5fcmV2ZXJzZU1hcD1bXTtmb3IodmFyIGE9MDthPHIubGVuZ3RoO2ErKylpW3IuY2hhckNvZGVBdChhKV09YX12YXIgbz1yLmNoYXJBdCg2NCk7aWYobyl7dmFyIHM9dC5pbmRleE9mKG8pOy0xIT09cyYmKGU9cyl9cmV0dXJuIG4odCxlLGkpfSxfbWFwOiJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSJ9fSgpLHQuZW5jLkJhc2U2NH0oaS5leHBvcnRzKX0obik7dmFyIGE9bi5leHBvcnRzLG89e2V4cG9ydHM6e319LHM9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dCxuPXIubGliLGk9bi5Xb3JkQXJyYXksYT1uLkhhc2hlcixvPXIuYWxnbyxzPVtdOyFmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8NjQ7dCsrKXNbdF09NDI5NDk2NzI5NiplLmFicyhlLnNpbih0KzEpKXwwfSgpO3ZhciBsPW8uTUQ1PWEuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGkuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4XSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0wO3I8MTY7cisrKXt2YXIgbj1lK3IsaT10W25dO3Rbbl09MTY3MTE5MzUmKGk8PDh8aT4+PjI0KXw0Mjc4MjU1MzYwJihpPDwyNHxpPj4+OCl9dmFyIGE9dGhpcy5faGFzaC53b3JkcyxvPXRbZSswXSxsPXRbZSsxXSxmPXRbZSsyXSxfPXRbZSszXSxwPXRbZSs0XSxnPXRbZSs1XSx5PXRbZSs2XSx2PXRbZSs3XSx3PXRbZSs4XSxtPXRbZSs5XSxiPXRbZSsxMF0seD10W2UrMTFdLGs9dFtlKzEyXSx6PXRbZSsxM10sQT10W2UrMTRdLEU9dFtlKzE1XSxTPWFbMF0sQj1hWzFdLEw9YVsyXSxSPWFbM107Uz1oKFMsQixMLFIsbyw3LHNbMF0pLFI9aChSLFMsQixMLGwsMTIsc1sxXSksTD1oKEwsUixTLEIsZiwxNyxzWzJdKSxCPWgoQixMLFIsUyxfLDIyLHNbM10pLFM9aChTLEIsTCxSLHAsNyxzWzRdKSxSPWgoUixTLEIsTCxnLDEyLHNbNV0pLEw9aChMLFIsUyxCLHksMTcsc1s2XSksQj1oKEIsTCxSLFMsdiwyMixzWzddKSxTPWgoUyxCLEwsUix3LDcsc1s4XSksUj1oKFIsUyxCLEwsbSwxMixzWzldKSxMPWgoTCxSLFMsQixiLDE3LHNbMTBdKSxCPWgoQixMLFIsUyx4LDIyLHNbMTFdKSxTPWgoUyxCLEwsUixrLDcsc1sxMl0pLFI9aChSLFMsQixMLHosMTIsc1sxM10pLEw9aChMLFIsUyxCLEEsMTcsc1sxNF0pLFM9YyhTLEI9aChCLEwsUixTLEUsMjIsc1sxNV0pLEwsUixsLDUsc1sxNl0pLFI9YyhSLFMsQixMLHksOSxzWzE3XSksTD1jKEwsUixTLEIseCwxNCxzWzE4XSksQj1jKEIsTCxSLFMsbywyMCxzWzE5XSksUz1jKFMsQixMLFIsZyw1LHNbMjBdKSxSPWMoUixTLEIsTCxiLDksc1syMV0pLEw9YyhMLFIsUyxCLEUsMTQsc1syMl0pLEI9YyhCLEwsUixTLHAsMjAsc1syM10pLFM9YyhTLEIsTCxSLG0sNSxzWzI0XSksUj1jKFIsUyxCLEwsQSw5LHNbMjVdKSxMPWMoTCxSLFMsQixfLDE0LHNbMjZdKSxCPWMoQixMLFIsUyx3LDIwLHNbMjddKSxTPWMoUyxCLEwsUix6LDUsc1syOF0pLFI9YyhSLFMsQixMLGYsOSxzWzI5XSksTD1jKEwsUixTLEIsdiwxNCxzWzMwXSksUz11KFMsQj1jKEIsTCxSLFMsaywyMCxzWzMxXSksTCxSLGcsNCxzWzMyXSksUj11KFIsUyxCLEwsdywxMSxzWzMzXSksTD11KEwsUixTLEIseCwxNixzWzM0XSksQj11KEIsTCxSLFMsQSwyMyxzWzM1XSksUz11KFMsQixMLFIsbCw0LHNbMzZdKSxSPXUoUixTLEIsTCxwLDExLHNbMzddKSxMPXUoTCxSLFMsQix2LDE2LHNbMzhdKSxCPXUoQixMLFIsUyxiLDIzLHNbMzldKSxTPXUoUyxCLEwsUix6LDQsc1s0MF0pLFI9dShSLFMsQixMLG8sMTEsc1s0MV0pLEw9dShMLFIsUyxCLF8sMTYsc1s0Ml0pLEI9dShCLEwsUixTLHksMjMsc1s0M10pLFM9dShTLEIsTCxSLG0sNCxzWzQ0XSksUj11KFIsUyxCLEwsaywxMSxzWzQ1XSksTD11KEwsUixTLEIsRSwxNixzWzQ2XSksUz1kKFMsQj11KEIsTCxSLFMsZiwyMyxzWzQ3XSksTCxSLG8sNixzWzQ4XSksUj1kKFIsUyxCLEwsdiwxMCxzWzQ5XSksTD1kKEwsUixTLEIsQSwxNSxzWzUwXSksQj1kKEIsTCxSLFMsZywyMSxzWzUxXSksUz1kKFMsQixMLFIsayw2LHNbNTJdKSxSPWQoUixTLEIsTCxfLDEwLHNbNTNdKSxMPWQoTCxSLFMsQixiLDE1LHNbNTRdKSxCPWQoQixMLFIsUyxsLDIxLHNbNTVdKSxTPWQoUyxCLEwsUix3LDYsc1s1Nl0pLFI9ZChSLFMsQixMLEUsMTAsc1s1N10pLEw9ZChMLFIsUyxCLHksMTUsc1s1OF0pLEI9ZChCLEwsUixTLHosMjEsc1s1OV0pLFM9ZChTLEIsTCxSLHAsNixzWzYwXSksUj1kKFIsUyxCLEwseCwxMCxzWzYxXSksTD1kKEwsUixTLEIsZiwxNSxzWzYyXSksQj1kKEIsTCxSLFMsbSwyMSxzWzYzXSksYVswXT1hWzBdK1N8MCxhWzFdPWFbMV0rQnwwLGFbMl09YVsyXStMfDAsYVszXT1hWzNdK1J8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLHI9dC53b3JkcyxuPTgqdGhpcy5fbkRhdGFCeXRlcyxpPTgqdC5zaWdCeXRlcztyW2k+Pj41XXw9MTI4PDwyNC1pJTMyO3ZhciBhPWUuZmxvb3Iobi80Mjk0OTY3Mjk2KSxvPW47clsxNSsoaSs2ND4+Pjk8PDQpXT0xNjcxMTkzNSYoYTw8OHxhPj4+MjQpfDQyNzgyNTUzNjAmKGE8PDI0fGE+Pj44KSxyWzE0KyhpKzY0Pj4+OTw8NCldPTE2NzExOTM1JihvPDw4fG8+Pj4yNCl8NDI3ODI1NTM2MCYobzw8MjR8bz4+PjgpLHQuc2lnQnl0ZXM9NCooci5sZW5ndGgrMSksdGhpcy5fcHJvY2VzcygpO2Zvcih2YXIgcz10aGlzLl9oYXNoLGw9cy53b3JkcyxoPTA7aDw0O2grKyl7dmFyIGM9bFtoXTtsW2hdPTE2NzExOTM1JihjPDw4fGM+Pj4yNCl8NDI3ODI1NTM2MCYoYzw8MjR8Yz4+PjgpfXJldHVybiBzfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWEuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksdH19KTtmdW5jdGlvbiBoKHQsZSxyLG4saSxhLG8pe3ZhciBzPXQrKGUmcnx+ZSZuKStpK287cmV0dXJuKHM8PGF8cz4+PjMyLWEpK2V9ZnVuY3Rpb24gYyh0LGUscixuLGksYSxvKXt2YXIgcz10KyhlJm58ciZ+bikraStvO3JldHVybihzPDxhfHM+Pj4zMi1hKStlfWZ1bmN0aW9uIHUodCxlLHIsbixpLGEsbyl7dmFyIHM9dCsoZV5yXm4pK2krbztyZXR1cm4oczw8YXxzPj4+MzItYSkrZX1mdW5jdGlvbiBkKHQsZSxyLG4saSxhLG8pe3ZhciBzPXQrKHJeKGV8fm4pKStpK287cmV0dXJuKHM8PGF8cz4+PjMyLWEpK2V9ci5NRDU9YS5fY3JlYXRlSGVscGVyKGwpLHIuSG1hY01ENT1hLl9jcmVhdGVIbWFjSGVscGVyKGwpfShNYXRoKSx0Lk1ENX0oaS5leHBvcnRzKX0ocyk7dmFyIGw9e2V4cG9ydHM6e319LGg9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIsbj1yLldvcmRBcnJheSxpPXIuSGFzaGVyLGE9ZS5hbGdvLG89W10scz1hLlNIQTE9aS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgbi5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy5faGFzaC53b3JkcyxuPXJbMF0saT1yWzFdLGE9clsyXSxzPXJbM10sbD1yWzRdLGg9MDtoPDgwO2grKyl7aWYoaDwxNilvW2hdPTB8dFtlK2hdO2Vsc2V7dmFyIGM9b1toLTNdXm9baC04XV5vW2gtMTRdXm9baC0xNl07b1toXT1jPDwxfGM+Pj4zMX12YXIgdT0objw8NXxuPj4+MjcpK2wrb1toXTt1Kz1oPDIwPzE1MTg1MDAyNDkrKGkmYXx+aSZzKTpoPDQwPzE4NTk3NzUzOTMrKGleYV5zKTpoPDYwPyhpJmF8aSZzfGEmcyktMTg5NDAwNzU4ODooaV5hXnMpLTg5OTQ5NzUxNCxsPXMscz1hLGE9aTw8MzB8aT4+PjIsaT1uLG49dX1yWzBdPXJbMF0rbnwwLHJbMV09clsxXStpfDAsclsyXT1yWzJdK2F8MCxyWzNdPXJbM10rc3wwLHJbNF09cls0XStsfDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YSxlPXQud29yZHMscj04KnRoaXMuX25EYXRhQnl0ZXMsbj04KnQuc2lnQnl0ZXM7cmV0dXJuIGVbbj4+PjVdfD0xMjg8PDI0LW4lMzIsZVsxNCsobis2ND4+Pjk8PDQpXT1NYXRoLmZsb29yKHIvNDI5NDk2NzI5NiksZVsxNSsobis2ND4+Pjk8PDQpXT1yLHQuc2lnQnl0ZXM9NCplLmxlbmd0aCx0aGlzLl9wcm9jZXNzKCksdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1pLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLHR9fSk7ZS5TSEExPWkuX2NyZWF0ZUhlbHBlcihzKSxlLkhtYWNTSEExPWkuX2NyZWF0ZUhtYWNIZWxwZXIocyl9KCksdC5TSEExfShpLmV4cG9ydHMpfShoKTt2YXIgYz17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlLHIsbjtyPShlPXQpLmxpYi5CYXNlLG49ZS5lbmMuVXRmOCxlLmFsZ28uSE1BQz1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LGUpe3Q9dGhpcy5faGFzaGVyPW5ldyB0LmluaXQsInN0cmluZyI9PXR5cGVvZiBlJiYoZT1uLnBhcnNlKGUpKTt2YXIgcj10LmJsb2NrU2l6ZSxpPTQqcjtlLnNpZ0J5dGVzPmkmJihlPXQuZmluYWxpemUoZSkpLGUuY2xhbXAoKTtmb3IodmFyIGE9dGhpcy5fb0tleT1lLmNsb25lKCksbz10aGlzLl9pS2V5PWUuY2xvbmUoKSxzPWEud29yZHMsbD1vLndvcmRzLGg9MDtoPHI7aCsrKXNbaF1ePTE1NDk1NTY4MjgsbFtoXV49OTA5NTIyNDg2O2Euc2lnQnl0ZXM9by5zaWdCeXRlcz1pLHRoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9oYXNoZXI7dC5yZXNldCgpLHQudXBkYXRlKHRoaXMuX2lLZXkpfSx1cGRhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2hhc2hlci51cGRhdGUodCksdGhpc30sZmluYWxpemU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faGFzaGVyLHI9ZS5maW5hbGl6ZSh0KTtyZXR1cm4gZS5yZXNldCgpLGUuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChyKSl9fSl9KGkuZXhwb3J0cyl9KGMpLGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXQscj1lLmxpYixuPXIuQmFzZSxpPXIuV29yZEFycmF5LGE9ZS5hbGdvLG89YS5NRDUscz1hLkV2cEtERj1uLmV4dGVuZCh7Y2ZnOm4uZXh0ZW5kKHtrZXlTaXplOjQsaGFzaGVyOm8saXRlcmF0aW9uczoxfSksaW5pdDpmdW5jdGlvbih0KXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQodCl9LGNvbXB1dGU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbj10aGlzLmNmZyxhPW4uaGFzaGVyLmNyZWF0ZSgpLG89aS5jcmVhdGUoKSxzPW8ud29yZHMsbD1uLmtleVNpemUsaD1uLml0ZXJhdGlvbnM7cy5sZW5ndGg8bDspe3ImJmEudXBkYXRlKHIpLHI9YS51cGRhdGUodCkuZmluYWxpemUoZSksYS5yZXNldCgpO2Zvcih2YXIgYz0xO2M8aDtjKyspcj1hLmZpbmFsaXplKHIpLGEucmVzZXQoKTtvLmNvbmNhdChyKX1yZXR1cm4gby5zaWdCeXRlcz00Kmwsb319KTtlLkV2cEtERj1mdW5jdGlvbih0LGUscil7cmV0dXJuIHMuY3JlYXRlKHIpLmNvbXB1dGUodCxlKX19KCksdC5FdnBLREZ9KGkuZXhwb3J0cyl9KGwpO3ZhciB1PXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dC5saWIuQ2lwaGVyfHxmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsaT1uLkJhc2UsYT1uLldvcmRBcnJheSxvPW4uQnVmZmVyZWRCbG9ja0FsZ29yaXRobSxzPXIuZW5jO3MuVXRmODt2YXIgbD1zLkJhc2U2NCxoPXIuYWxnby5FdnBLREYsYz1uLkNpcGhlcj1vLmV4dGVuZCh7Y2ZnOmkuZXh0ZW5kKCksY3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLHQsZSl9LGNyZWF0ZURlY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9ERUNfWEZPUk1fTU9ERSx0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSxyKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQociksdGhpcy5feGZvcm1Nb2RlPXQsdGhpcy5fa2V5PWUsdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe28ucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHByb2Nlc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2FwcGVuZCh0KSx0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3c6eX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJue2VuY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmVuY3J5cHQoZSxyLG4saSl9LGRlY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmRlY3J5cHQoZSxyLG4saSl9fX19KCl9KTtuLlN0cmVhbUNpcGhlcj1jLmV4dGVuZCh7X2RvRmluYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvY2VzcyghMCl9LGJsb2NrU2l6ZToxfSk7dmFyIHU9ci5tb2RlPXt9LGQ9bi5CbG9ja0NpcGhlck1vZGU9aS5leHRlbmQoe2NyZWF0ZUVuY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLkVuY3J5cHRvci5jcmVhdGUodCxlKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuRGVjcnlwdG9yLmNyZWF0ZSh0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSl7dGhpcy5fY2lwaGVyPXQsdGhpcy5faXY9ZX19KSxmPXUuQ0JDPWZ1bmN0aW9uKCl7dmFyIHQ9ZC5leHRlbmQoKTtmdW5jdGlvbiByKHQscixuKXt2YXIgaSxhPXRoaXMuX2l2O2E/KGk9YSx0aGlzLl9pdj1lKTppPXRoaXMuX3ByZXZCbG9jaztmb3IodmFyIG89MDtvPG47bysrKXRbcitvXV49aVtvXX1yZXR1cm4gdC5FbmNyeXB0b3I9dC5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2NpcGhlcixpPW4uYmxvY2tTaXplO3IuY2FsbCh0aGlzLHQsZSxpKSxuLmVuY3J5cHRCbG9jayh0LGUpLHRoaXMuX3ByZXZCbG9jaz10LnNsaWNlKGUsZStpKX19KSx0LkRlY3J5cHRvcj10LmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fY2lwaGVyLGk9bi5ibG9ja1NpemUsYT10LnNsaWNlKGUsZStpKTtuLmRlY3J5cHRCbG9jayh0LGUpLHIuY2FsbCh0aGlzLHQsZSxpKSx0aGlzLl9wcmV2QmxvY2s9YX19KSx0fSgpLF89KHIucGFkPXt9KS5Qa2NzNz17cGFkOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTQqZSxuPXItdC5zaWdCeXRlcyVyLGk9bjw8MjR8bjw8MTZ8bjw8OHxuLG89W10scz0wO3M8bjtzKz00KW8ucHVzaChpKTt2YXIgbD1hLmNyZWF0ZShvLG4pO3QuY29uY2F0KGwpfSx1bnBhZDpmdW5jdGlvbih0KXt2YXIgZT0yNTUmdC53b3Jkc1t0LnNpZ0J5dGVzLTE+Pj4yXTt0LnNpZ0J5dGVzLT1lfX07bi5CbG9ja0NpcGhlcj1jLmV4dGVuZCh7Y2ZnOmMuY2ZnLmV4dGVuZCh7bW9kZTpmLHBhZGRpbmc6X30pLHJlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ7Yy5yZXNldC5jYWxsKHRoaXMpO3ZhciBlPXRoaXMuY2ZnLHI9ZS5pdixuPWUubW9kZTt0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFP3Q9bi5jcmVhdGVFbmNyeXB0b3I6KHQ9bi5jcmVhdGVEZWNyeXB0b3IsdGhpcy5fbWluQnVmZmVyU2l6ZT0xKSx0aGlzLl9tb2RlJiZ0aGlzLl9tb2RlLl9fY3JlYXRvcj09dD90aGlzLl9tb2RlLmluaXQodGhpcyxyJiZyLndvcmRzKToodGhpcy5fbW9kZT10LmNhbGwobix0aGlzLHImJnIud29yZHMpLHRoaXMuX21vZGUuX19jcmVhdG9yPXQpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXt0aGlzLl9tb2RlLnByb2Nlc3NCbG9jayh0LGUpfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5jZmcucGFkZGluZztyZXR1cm4gdGhpcy5feGZvcm1Nb2RlPT10aGlzLl9FTkNfWEZPUk1fTU9ERT8oZS5wYWQodGhpcy5fZGF0YSx0aGlzLmJsb2NrU2l6ZSksdD10aGlzLl9wcm9jZXNzKCEwKSk6KHQ9dGhpcy5fcHJvY2VzcyghMCksZS51bnBhZCh0KSksdH0sYmxvY2tTaXplOjR9KTt2YXIgcD1uLkNpcGhlclBhcmFtcz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt0aGlzLm1peEluKHQpfSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8dGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKX19KSxnPShyLmZvcm1hdD17fSkuT3BlblNTTD17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQuY2lwaGVydGV4dCxyPXQuc2FsdDtyZXR1cm4ocj9hLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KHIpLmNvbmNhdChlKTplKS50b1N0cmluZyhsKX0scGFyc2U6ZnVuY3Rpb24odCl7dmFyIGUscj1sLnBhcnNlKHQpLG49ci53b3JkcztyZXR1cm4gMTM5ODg5MzY4ND09blswXSYmMTcwMTA3NjgzMT09blsxXSYmKGU9YS5jcmVhdGUobi5zbGljZSgyLDQpKSxuLnNwbGljZSgwLDQpLHIuc2lnQnl0ZXMtPTE2KSxwLmNyZWF0ZSh7Y2lwaGVydGV4dDpyLHNhbHQ6ZX0pfX0seT1uLlNlcmlhbGl6YWJsZUNpcGhlcj1pLmV4dGVuZCh7Y2ZnOmkuZXh0ZW5kKHtmb3JtYXQ6Z30pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobik7dmFyIGk9dC5jcmVhdGVFbmNyeXB0b3IocixuKSxhPWkuZmluYWxpemUoZSksbz1pLmNmZztyZXR1cm4gcC5jcmVhdGUoe2NpcGhlcnRleHQ6YSxrZXk6cixpdjpvLml2LGFsZ29yaXRobTp0LG1vZGU6by5tb2RlLHBhZGRpbmc6by5wYWRkaW5nLGJsb2NrU2l6ZTp0LmJsb2NrU2l6ZSxmb3JtYXR0ZXI6bi5mb3JtYXR9KX0sZGVjcnlwdDpmdW5jdGlvbih0LGUscixuKXtyZXR1cm4gbj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KSx0LmNyZWF0ZURlY3J5cHRvcihyLG4pLmZpbmFsaXplKGUuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdD9lLnBhcnNlKHQsdGhpcyk6dH19KSx2PShyLmtkZj17fSkuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbih0LGUscixuKXtufHwobj1hLnJhbmRvbSg4KSk7dmFyIGk9aC5jcmVhdGUoe2tleVNpemU6ZStyfSkuY29tcHV0ZSh0LG4pLG89YS5jcmVhdGUoaS53b3Jkcy5zbGljZShlKSw0KnIpO3JldHVybiBpLnNpZ0J5dGVzPTQqZSxwLmNyZWF0ZSh7a2V5OmksaXY6byxzYWx0Om59KX19LHc9bi5QYXNzd29yZEJhc2VkQ2lwaGVyPXkuZXh0ZW5kKHtjZmc6eS5jZmcuZXh0ZW5kKHtrZGY6dn0pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9KG49dGhpcy5jZmcuZXh0ZW5kKG4pKS5rZGYuZXhlY3V0ZShyLHQua2V5U2l6ZSx0Lml2U2l6ZSk7bi5pdj1pLml2O3ZhciBhPXkuZW5jcnlwdC5jYWxsKHRoaXMsdCxlLGkua2V5LG4pO3JldHVybiBhLm1peEluKGkpLGF9LGRlY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KTt2YXIgaT1uLmtkZi5leGVjdXRlKHIsdC5rZXlTaXplLHQuaXZTaXplLGUuc2FsdCk7cmV0dXJuIG4uaXY9aS5pdix5LmRlY3J5cHQuY2FsbCh0aGlzLHQsZSxpLmtleSxuKX19KX0oKX0oaS5leHBvcnRzKX0odSksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLkJsb2NrQ2lwaGVyLG49ZS5hbGdvLGk9W10sYT1bXSxvPVtdLHM9W10sbD1bXSxoPVtdLGM9W10sdT1bXSxkPVtdLGY9W107IWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPDI1NjtlKyspdFtlXT1lPDEyOD9lPDwxOmU8PDFeMjgzO3ZhciByPTAsbj0wO2ZvcihlPTA7ZTwyNTY7ZSsrKXt2YXIgXz1uXm48PDFebjw8Ml5uPDwzXm48PDQ7Xz1fPj4+OF4yNTUmX145OSxpW3JdPV8sYVtfXT1yO3ZhciBwPXRbcl0sZz10W3BdLHk9dFtnXSx2PTI1Nyp0W19dXjE2ODQzMDA4Kl87b1tyXT12PDwyNHx2Pj4+OCxzW3JdPXY8PDE2fHY+Pj4xNixsW3JdPXY8PDh8dj4+PjI0LGhbcl09dix2PTE2ODQzMDA5KnleNjU1MzcqZ14yNTcqcF4xNjg0MzAwOCpyLGNbX109djw8MjR8dj4+PjgsdVtfXT12PDwxNnx2Pj4+MTYsZFtfXT12PDw4fHY+Pj4yNCxmW19dPXYscj8ocj1wXnRbdFt0W3lecF1dXSxuXj10W3Rbbl1dKTpyPW49MX19KCk7dmFyIF89WzAsMSwyLDQsOCwxNiwzMiw2NCwxMjgsMjcsNTRdLHA9bi5BRVM9ci5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX25Sb3VuZHN8fHRoaXMuX2tleVByaW9yUmVzZXQhPT10aGlzLl9rZXkpe2Zvcih2YXIgdD10aGlzLl9rZXlQcmlvclJlc2V0PXRoaXMuX2tleSxlPXQud29yZHMscj10LnNpZ0J5dGVzLzQsbj00KigodGhpcy5fblJvdW5kcz1yKzYpKzEpLGE9dGhpcy5fa2V5U2NoZWR1bGU9W10sbz0wO288bjtvKyspbzxyP2Fbb109ZVtvXTooaD1hW28tMV0sbyVyP3I+NiYmbyVyPT00JiYoaD1pW2g+Pj4yNF08PDI0fGlbaD4+PjE2JjI1NV08PDE2fGlbaD4+PjgmMjU1XTw8OHxpWzI1NSZoXSk6KGg9aVsoaD1oPDw4fGg+Pj4yNCk+Pj4yNF08PDI0fGlbaD4+PjE2JjI1NV08PDE2fGlbaD4+PjgmMjU1XTw8OHxpWzI1NSZoXSxoXj1fW28vcnwwXTw8MjQpLGFbb109YVtvLXJdXmgpO2Zvcih2YXIgcz10aGlzLl9pbnZLZXlTY2hlZHVsZT1bXSxsPTA7bDxuO2wrKyl7aWYobz1uLWwsbCU0KXZhciBoPWFbb107ZWxzZSBoPWFbby00XTtzW2xdPWw8NHx8bzw9ND9oOmNbaVtoPj4+MjRdXV51W2lbaD4+PjE2JjI1NV1dXmRbaVtoPj4+OCYyNTVdXV5mW2lbMjU1JmhdXX19fSxlbmNyeXB0QmxvY2s6ZnVuY3Rpb24odCxlKXt0aGlzLl9kb0NyeXB0QmxvY2sodCxlLHRoaXMuX2tleVNjaGVkdWxlLG8scyxsLGgsaSl9LGRlY3J5cHRCbG9jazpmdW5jdGlvbih0LGUpe3ZhciByPXRbZSsxXTt0W2UrMV09dFtlKzNdLHRbZSszXT1yLHRoaXMuX2RvQ3J5cHRCbG9jayh0LGUsdGhpcy5faW52S2V5U2NoZWR1bGUsYyx1LGQsZixhKSxyPXRbZSsxXSx0W2UrMV09dFtlKzNdLHRbZSszXT1yfSxfZG9DcnlwdEJsb2NrOmZ1bmN0aW9uKHQsZSxyLG4saSxhLG8scyl7Zm9yKHZhciBsPXRoaXMuX25Sb3VuZHMsaD10W2VdXnJbMF0sYz10W2UrMV1eclsxXSx1PXRbZSsyXV5yWzJdLGQ9dFtlKzNdXnJbM10sZj00LF89MTtfPGw7XysrKXt2YXIgcD1uW2g+Pj4yNF1eaVtjPj4+MTYmMjU1XV5hW3U+Pj44JjI1NV1eb1syNTUmZF1ecltmKytdLGc9bltjPj4+MjRdXmlbdT4+PjE2JjI1NV1eYVtkPj4+OCYyNTVdXm9bMjU1JmhdXnJbZisrXSx5PW5bdT4+PjI0XV5pW2Q+Pj4xNiYyNTVdXmFbaD4+PjgmMjU1XV5vWzI1NSZjXV5yW2YrK10sdj1uW2Q+Pj4yNF1eaVtoPj4+MTYmMjU1XV5hW2M+Pj44JjI1NV1eb1syNTUmdV1ecltmKytdO2g9cCxjPWcsdT15LGQ9dn1wPShzW2g+Pj4yNF08PDI0fHNbYz4+PjE2JjI1NV08PDE2fHNbdT4+PjgmMjU1XTw8OHxzWzI1NSZkXSlecltmKytdLGc9KHNbYz4+PjI0XTw8MjR8c1t1Pj4+MTYmMjU1XTw8MTZ8c1tkPj4+OCYyNTVdPDw4fHNbMjU1JmhdKV5yW2YrK10seT0oc1t1Pj4+MjRdPDwyNHxzW2Q+Pj4xNiYyNTVdPDwxNnxzW2g+Pj44JjI1NV08PDh8c1syNTUmY10pXnJbZisrXSx2PShzW2Q+Pj4yNF08PDI0fHNbaD4+PjE2JjI1NV08PDE2fHNbYz4+PjgmMjU1XTw8OHxzWzI1NSZ1XSlecltmKytdLHRbZV09cCx0W2UrMV09Zyx0W2UrMl09eSx0W2UrM109dn0sa2V5U2l6ZTo4fSk7ZS5BRVM9ci5fY3JlYXRlSGVscGVyKHApfSgpLHQuQUVTfShpLmV4cG9ydHMpfShvKTt2YXIgZD1vLmV4cG9ydHMsZj17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsaT1uLldvcmRBcnJheSxhPW4uSGFzaGVyLG89ci5hbGdvLHM9W10sbD1bXTshZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe2Zvcih2YXIgcj1lLnNxcnQodCksbj0yO248PXI7bisrKWlmKCEodCVuKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiByKHQpe3JldHVybiA0Mjk0OTY3Mjk2Kih0LSgwfHQpKXwwfWZvcih2YXIgbj0yLGk9MDtpPDY0Oyl0KG4pJiYoaTw4JiYoc1tpXT1yKGUucG93KG4sLjUpKSksbFtpXT1yKGUucG93KG4sMS8zKSksaSsrKSxuKyt9KCk7dmFyIGg9W10sYz1vLlNIQTI1Nj1hLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBpLmluaXQocy5zbGljZSgwKSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj10aGlzLl9oYXNoLndvcmRzLG49clswXSxpPXJbMV0sYT1yWzJdLG89clszXSxzPXJbNF0sYz1yWzVdLHU9cls2XSxkPXJbN10sZj0wO2Y8NjQ7ZisrKXtpZihmPDE2KWhbZl09MHx0W2UrZl07ZWxzZXt2YXIgXz1oW2YtMTVdLHA9KF88PDI1fF8+Pj43KV4oXzw8MTR8Xz4+PjE4KV5fPj4+MyxnPWhbZi0yXSx5PShnPDwxNXxnPj4+MTcpXihnPDwxM3xnPj4+MTkpXmc+Pj4xMDtoW2ZdPXAraFtmLTddK3kraFtmLTE2XX12YXIgdj1uJmlebiZhXmkmYSx3PShuPDwzMHxuPj4+MileKG48PDE5fG4+Pj4xMyleKG48PDEwfG4+Pj4yMiksbT1kKygoczw8MjZ8cz4+PjYpXihzPDwyMXxzPj4+MTEpXihzPDw3fHM+Pj4yNSkpKyhzJmNefnMmdSkrbFtmXStoW2ZdO2Q9dSx1PWMsYz1zLHM9byttfDAsbz1hLGE9aSxpPW4sbj1tKyh3K3YpfDB9clswXT1yWzBdK258MCxyWzFdPXJbMV0raXwwLHJbMl09clsyXSthfDAsclszXT1yWzNdK298MCxyWzRdPXJbNF0rc3wwLHJbNV09cls1XStjfDAscls2XT1yWzZdK3V8MCxyWzddPXJbN10rZHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEscj10LndvcmRzLG49OCp0aGlzLl9uRGF0YUJ5dGVzLGk9OCp0LnNpZ0J5dGVzO3JldHVybiByW2k+Pj41XXw9MTI4PDwyNC1pJTMyLHJbMTQrKGkrNjQ+Pj45PDw0KV09ZS5mbG9vcihuLzQyOTQ5NjcyOTYpLHJbMTUrKGkrNjQ+Pj45PDw0KV09bix0LnNpZ0J5dGVzPTQqci5sZW5ndGgsdGhpcy5fcHJvY2VzcygpLHRoaXMuX2hhc2h9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9YS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pO3IuU0hBMjU2PWEuX2NyZWF0ZUhlbHBlcihjKSxyLkhtYWNTSEEyNTY9YS5fY3JlYXRlSG1hY0hlbHBlcihjKX0oTWF0aCksdC5TSEEyNTZ9KGkuZXhwb3J0cyl9KGYpO3ZhciBfPWYuZXhwb3J0cyxwPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIEFycmF5QnVmZmVyKXt2YXIgZT10LmxpYi5Xb3JkQXJyYXkscj1lLmluaXQsbj1lLmluaXQ9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyJiYodD1uZXcgVWludDhBcnJheSh0KSksKHQgaW5zdGFuY2VvZiBJbnQ4QXJyYXl8fCJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXkmJnQgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheXx8dCBpbnN0YW5jZW9mIEludDE2QXJyYXl8fHQgaW5zdGFuY2VvZiBVaW50MTZBcnJheXx8dCBpbnN0YW5jZW9mIEludDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBVaW50MzJBcnJheXx8dCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheXx8dCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkmJih0PW5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCx0LmJ5dGVMZW5ndGgpKSx0IGluc3RhbmNlb2YgVWludDhBcnJheSl7Zm9yKHZhciBlPXQuYnl0ZUxlbmd0aCxuPVtdLGk9MDtpPGU7aSsrKW5baT4+PjJdfD10W2ldPDwyNC1pJTQqODtyLmNhbGwodGhpcyxuLGUpfWVsc2Ugci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O24ucHJvdG90eXBlPWV9fSgpLHQubGliLldvcmRBcnJheX0oaS5leHBvcnRzKX0ocCk7dmFyIGc9cC5leHBvcnRzLHk9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdC5IbWFjU0hBMjU2fShpLmV4cG9ydHMpfSh5KTt2YXIgdj15LmV4cG9ydHM7Y29uc3Qgdz0hMTtsZXQgbSxiO29ubWVzc2FnZT1mdW5jdGlvbih0KXtjb25zdHtqb2I6cixjbWQ6bixzZXJ2ZXI6aSxwYXRoOm8sYnVmZmVyOnMsa2V5QmFzZTY0OmwsZ3ppcDpoLHJlZmVycmVyOmMsaWQ6dSxhcHBJZDpmLHBlcnNpc3RlbnRJZDpwLENST1FVRVRfVkVSU0lPTjp5LGRlYnVnOmssd2hhdDp6LG9mZmxpbmU6QX09dC5kYXRhO0EmJihtPUQpO3N3aXRjaChuKXtjYXNlInVwbG9hZEVuY3J5cHRlZCI6UihvKTticmVhaztjYXNlImdldE9mZmxpbmVGaWxlIjpPKHQuZGF0YS51cmwpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5rbm93biB3b3JrZXIgY29tbWFuZCIsbil9ZnVuY3Rpb24gRSh0KXtjb25zdCBlPURhdGUubm93KCkscj1nLmNyZWF0ZSh0KSxuPWEucGFyc2UobCksaT12KHIsbiksbz1nLnJhbmRvbSgxNikse2NpcGhlcnRleHQ6c309ZC5lbmNyeXB0KHIsbix7aXY6b30pLGg9bmV3IEFycmF5QnVmZmVyKDQrby5zaWdCeXRlcytpLnNpZ0J5dGVzK3Muc2lnQnl0ZXMpLGM9bmV3IERhdGFWaWV3KGgpO2xldCBmPTA7Yy5zZXRVaW50MzIoZiwxMTI5NDY4MjA5LCExKSxmKz00O2Zvcihjb25zdCB0IG9mW28saSxzXSlmb3IoY29uc3QgZSBvZiB0LndvcmRzKWMuc2V0SW50MzIoZixlLCExKSxmKz00O3JldHVybiBrJiZjb25zb2xlLmxvZyhgJHt1fSAke3p9IGVuY3J5cHRlZCAoJHtoLmJ5dGVMZW5ndGh9IGJ5dGVzKSBpbiAke0RhdGUubm93KCktZX1tc2ApLGh9ZnVuY3Rpb24gUyh0KXtjb25zdCByPURhdGUubm93KCksbj1lLmV4cG9ydHMuZGVmbGF0ZSh0LHtnemlwOiEwLGxldmVsOjF9KTtyZXR1cm4gayYmY29uc29sZS5sb2coYCR7dX0gJHt6fSBjb21wcmVzc2VkICgke24ubGVuZ3RofSBieXRlcykgaW4gJHtEYXRlLm5vdygpLXJ9bXNgKSxufWZ1bmN0aW9uIEIodCl7Y29uc3QgZT1EYXRlLm5vdygpLHI9XyhnLmNyZWF0ZSh0KSksbj1hLnN0cmluZ2lmeShyKS5yZXBsYWNlKC89L2csIiIpLnJlcGxhY2UoL1wrL2csIi0iKS5yZXBsYWNlKC9cLy9nLCJfIik7cmV0dXJuIGsmJmNvbnNvbGUubG9nKGAke3V9ICR7en0gaGFzaGVkICgke3QubGVuZ3RofSBieXRlcykgaW4gJHtEYXRlLm5vdygpLWV9bXNgKSxufWFzeW5jIGZ1bmN0aW9uIEwodCl7aWYoQSl7Y29uc3QgZT1gb2ZmbGluZTovLy8ke3R9YDtyZXR1cm57dXJsOmUsdXBsb2FkVXJsOmV9fWNvbnN0IGU9RGF0ZS5ub3coKSxyPWAke2kudXJsfS8ke3R9YDtpZighaS5hcGlLZXkpcmV0dXJue3VybDpyLHVwbG9hZFVybDpyfTtjb25zdCBuPWF3YWl0IG0ocix7aGVhZGVyczp7IlgtQ3JvcXVldC1BdXRoIjppLmFwaUtleSwiWC1Dcm9xdWV0LUFwcCI6ZiwiWC1Dcm9xdWV0LUlkIjpwLCJYLUNyb3F1ZXQtU2Vzc2lvbiI6dSwiWC1Dcm9xdWV0LVZlcnNpb24iOnksIlgtQ3JvcXVldC1QYXRoIjpuZXcgVVJMKGMpLnBhdGhuYW1lfSxyZWZlcnJlcjpjfSkse29rOmEsc3RhdHVzOm8sc3RhdHVzVGV4dDpzfT1uO2lmKCFhKXRocm93IEVycm9yKGBFcnJvciBpbiBzaWduaW5nIFVSTDogJHtvfSAtICR7c31gKTtjb25zdHtlcnJvcjpsLHJlYWQ6aCx3cml0ZTpkfT1hd2FpdCBuLmpzb24oKTtpZihsKXRocm93IEVycm9yKGwpO3JldHVybiBrJiZjb25zb2xlLmxvZyhgJHt1fSAke3p9IGF1dGhvcml6ZWQgaW4gJHtEYXRlLm5vdygpLWV9bXNgKSx7dXJsOmgsdXBsb2FkVXJsOmR9fWFzeW5jIGZ1bmN0aW9uIFIodCl7dHJ5e2xldCBlPUUoaD9TKHMpOnMpO3csdC5pbmNsdWRlcygiJUhBU0glIikmJih0PXQucmVwbGFjZSgiJUhBU0glIixCKGUpKSk7Y29uc3R7dXBsb2FkVXJsOm4sdXJsOml9PWF3YWl0IEwodCksYT1EYXRlLm5vdygpLHtvazpvLHN0YXR1czpsLHN0YXR1c1RleHQ6ZH09YXdhaXQgbShuLHttZXRob2Q6IlBVVCIsbW9kZToiY29ycyIsaGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIsIlgtQ3JvcXVldC1BcHAiOmYsIlgtQ3JvcXVldC1JZCI6cCwiWC1Dcm9xdWV0LVNlc3Npb24iOnUsIlgtQ3JvcXVldC1WZXJzaW9uIjp5fSxyZWZlcnJlcjpjLGJvZHk6ZX0pO2lmKCFvKXRocm93IEVycm9yKGBzZXJ2ZXIgcmV0dXJuZWQgJHtsfSAke2R9IGZvciBQVVQgJHtufWApO2smJmNvbnNvbGUubG9nKGAke3V9ICR7en0gdXBsb2FkZWQgKCR7bH0pIGluICR7RGF0ZS5ub3coKS1hfW1zICR7aX1gKSxiKHtqb2I6cix1cmw6aSxvazpvLHN0YXR1czpsLHN0YXR1c1RleHQ6ZCxieXRlczplLmJ5dGVMZW5ndGh9KX1jYXRjaCh0KXtrJiZjb25zb2xlLmVycm9yKGAke3V9IHVwbG9hZCBlcnJvciAke3QubWVzc2FnZX1gKSxiKHtqb2I6cixvazohMSxzdGF0dXM6LTEsc3RhdHVzVGV4dDp0Lm1lc3NhZ2V9KX19ZnVuY3Rpb24gRCh0LGUpe3JldHVybiBrJiZjb25zb2xlLmxvZyhgJHt1fSBzdG9yaW5nICR7dH1gKSx4LnNldCh0LGUuYm9keSkse29rOiEwLHN0YXR1czoyMDEsc3RhdHVzVGV4dDoiT2ZmbGluZSBjcmVhdGVkIn19ZnVuY3Rpb24gTyh0KXtjb25zdCBlPXguZ2V0KHQpO2lmKCFlKXJldHVybiBrJiZjb25zb2xlLmVycm9yKGAke3V9IGZpbGUgbm90IGZvdW5kICR7dH1gKSx2b2lkIGIoe2pvYjpyLG9rOiExLHN0YXR1czotMSxzdGF0dXNUZXh0OiJPZmZsaW5lIGZpbGUgbm90IGZvdW5kIn0pO2smJmNvbnNvbGUubG9nKGAke3V9IHJldHJpZXZlZCAke3R9YCksYih7am9iOnIsb2s6ITAsc3RhdHVzOjIwMCxzdGF0dXNUZXh0OiJPZmZsaW5lIGZpbGUgZm91bmQiLGJvZHk6ZSxieXRlczplLmJ5dGVMZW5ndGh9KX19LG09ZmV0Y2gsYj1wb3N0TWVzc2FnZTtjb25zdCB4PW5ldyBNYXB9KCk7Cgo=",null,!1,function(a){return il=il||function va(a,Y,K){var P=void 0===Y?null:Y,R=function(a,Y){var K=atob(a);if(Y){for(var P=new Uint8Array(K.length),R=0,v=K.length;R<v;++R)P[R]=K.charCodeAt(R);return String.fromCharCode.apply(null,new Uint16Array(P.buffer))}return K}(a,void 0!==K&&K),v=R.indexOf("\n",10)+1,H=R.substring(v)+(P?"//# sourceMappingURL="+P:""),M=new Blob([H],{type:"application/javascript"});return URL.createObjectURL(M)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKioKICogQ29weXJpZ2h0IENyb3F1ZXQgQ29ycG9yYXRpb24gMjAyMwogKiBCdW5kbGUgb2YgQGNyb3F1ZXQvY3JvcXVldAogKiBEYXRlOiAyMDIzLTA2LTI2CiAqIFZlcnNpb246IDEuMS4wLTMyCiAqLwoKIWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciB0PSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6e307IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlLHI9T2JqZWN0LnByb3RvdHlwZSxuPXIuaGFzT3duUHJvcGVydHksaT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxhPWkuaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixvPWkuYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIscz1pLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyI7ZnVuY3Rpb24gbCh0LGUscil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSx0W2VdfXRyeXtsKHt9LCIiKX1jYXRjaCh0KXtsPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdFtlXT1yfX1mdW5jdGlvbiBoKHQsZSxyLG4pe3ZhciBpPWUmJmUucHJvdG90eXBlIGluc3RhbmNlb2YgZz9lOmcsYT1PYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKSxvPW5ldyBCKG58fFtdKTtyZXR1cm4gYS5faW52b2tlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj11O3JldHVybiBmdW5jdGlvbihpLGEpe2lmKG49PT1mKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT1fKXtpZigidGhyb3ciPT09aSl0aHJvdyBhO3JldHVybiBSKCl9Zm9yKHIubWV0aG9kPWksci5hcmc9YTs7KXt2YXIgbz1yLmRlbGVnYXRlO2lmKG8pe3ZhciBzPUEobyxyKTtpZihzKXtpZihzPT09cCljb250aW51ZTtyZXR1cm4gc319aWYoIm5leHQiPT09ci5tZXRob2Qpci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKG49PT11KXRocm93IG49XyxyLmFyZztyLmRpc3BhdGNoRXhjZXB0aW9uKHIuYXJnKX1lbHNlInJldHVybiI9PT1yLm1ldGhvZCYmci5hYnJ1cHQoInJldHVybiIsci5hcmcpO249Zjt2YXIgbD1jKHQsZSxyKTtpZigibm9ybWFsIj09PWwudHlwZSl7aWYobj1yLmRvbmU/XzpkLGwuYXJnPT09cCljb250aW51ZTtyZXR1cm57dmFsdWU6bC5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT1sLnR5cGUmJihuPV8sci5tZXRob2Q9InRocm93IixyLmFyZz1sLmFyZyl9fX0odCxyLG8pLGF9ZnVuY3Rpb24gYyh0LGUscil7dHJ5e3JldHVybnt0eXBlOiJub3JtYWwiLGFyZzp0LmNhbGwoZSxyKX19Y2F0Y2godCl7cmV0dXJue3R5cGU6InRocm93Iixhcmc6dH19fXQud3JhcD1oO3ZhciB1PSJzdXNwZW5kZWRTdGFydCIsZD0ic3VzcGVuZGVkWWllbGQiLGY9ImV4ZWN1dGluZyIsXz0iY29tcGxldGVkIixwPXt9O2Z1bmN0aW9uIGcoKXt9ZnVuY3Rpb24geSgpe31mdW5jdGlvbiB2KCl7fXZhciB3PXt9O2wodyxhLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpO3ZhciBtPU9iamVjdC5nZXRQcm90b3R5cGVPZixiPW0mJm0obShMKFtdKSkpO2ImJmIhPT1yJiZuLmNhbGwoYixhKSYmKHc9Yik7dmFyIHg9di5wcm90b3R5cGU9Zy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3KTtmdW5jdGlvbiBrKHQpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7bCh0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pbnZva2UoZSx0KX0pKX0pKX1mdW5jdGlvbiB6KHQsZSl7ZnVuY3Rpb24gcihpLGEsbyxzKXt2YXIgbD1jKHRbaV0sdCxhKTtpZigidGhyb3ciIT09bC50eXBlKXt2YXIgaD1sLmFyZyx1PWgudmFsdWU7cmV0dXJuIHUmJiJvYmplY3QiPT10eXBlb2YgdSYmbi5jYWxsKHUsIl9fYXdhaXQiKT9lLnJlc29sdmUodS5fX2F3YWl0KS50aGVuKChmdW5jdGlvbih0KXtyKCJuZXh0Iix0LG8scyl9KSwoZnVuY3Rpb24odCl7cigidGhyb3ciLHQsbyxzKX0pKTplLnJlc29sdmUodSkudGhlbigoZnVuY3Rpb24odCl7aC52YWx1ZT10LG8oaCl9KSwoZnVuY3Rpb24odCl7cmV0dXJuIHIoInRocm93Iix0LG8scyl9KSl9cyhsLmFyZyl9dmFyIGk7dGhpcy5faW52b2tlPWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gYSgpe3JldHVybiBuZXcgZSgoZnVuY3Rpb24oZSxpKXtyKHQsbixlLGkpfSkpfXJldHVybiBpPWk/aS50aGVuKGEsYSk6YSgpfX1mdW5jdGlvbiBBKHQscil7dmFyIG49dC5pdGVyYXRvcltyLm1ldGhvZF07aWYobj09PWUpe2lmKHIuZGVsZWdhdGU9bnVsbCwidGhyb3ciPT09ci5tZXRob2Qpe2lmKHQuaXRlcmF0b3IucmV0dXJuJiYoci5tZXRob2Q9InJldHVybiIsci5hcmc9ZSxBKHQsciksInRocm93Ij09PXIubWV0aG9kKSlyZXR1cm4gcDtyLm1ldGhvZD0idGhyb3ciLHIuYXJnPW5ldyBUeXBlRXJyb3IoIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2QiKX1yZXR1cm4gcH12YXIgaT1jKG4sdC5pdGVyYXRvcixyLmFyZyk7aWYoInRocm93Ij09PWkudHlwZSlyZXR1cm4gci5tZXRob2Q9InRocm93IixyLmFyZz1pLmFyZyxyLmRlbGVnYXRlPW51bGwscDt2YXIgYT1pLmFyZztyZXR1cm4gYT9hLmRvbmU/KHJbdC5yZXN1bHROYW1lXT1hLnZhbHVlLHIubmV4dD10Lm5leHRMb2MsInJldHVybiIhPT1yLm1ldGhvZCYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz1lKSxyLmRlbGVnYXRlPW51bGwscCk6YTooci5tZXRob2Q9InRocm93IixyLmFyZz1uZXcgVHlwZUVycm9yKCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdCIpLHIuZGVsZWdhdGU9bnVsbCxwKX1mdW5jdGlvbiBFKHQpe3ZhciBlPXt0cnlMb2M6dFswXX07MSBpbiB0JiYoZS5jYXRjaExvYz10WzFdKSwyIGluIHQmJihlLmZpbmFsbHlMb2M9dFsyXSxlLmFmdGVyTG9jPXRbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKGUpfWZ1bmN0aW9uIFModCl7dmFyIGU9dC5jb21wbGV0aW9ufHx7fTtlLnR5cGU9Im5vcm1hbCIsZGVsZXRlIGUuYXJnLHQuY29tcGxldGlvbj1lfWZ1bmN0aW9uIEIodCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLHQuZm9yRWFjaChFLHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIEwodCl7aWYodCl7dmFyIHI9dFthXTtpZihyKXJldHVybiByLmNhbGwodCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQubmV4dClyZXR1cm4gdDtpZighaXNOYU4odC5sZW5ndGgpKXt2YXIgaT0tMSxvPWZ1bmN0aW9uIHIoKXtmb3IoOysraTx0Lmxlbmd0aDspaWYobi5jYWxsKHQsaSkpcmV0dXJuIHIudmFsdWU9dFtpXSxyLmRvbmU9ITEscjtyZXR1cm4gci52YWx1ZT1lLHIuZG9uZT0hMCxyfTtyZXR1cm4gby5uZXh0PW99fXJldHVybntuZXh0OlJ9fWZ1bmN0aW9uIFIoKXtyZXR1cm57dmFsdWU6ZSxkb25lOiEwfX1yZXR1cm4geS5wcm90b3R5cGU9dixsKHgsImNvbnN0cnVjdG9yIix2KSxsKHYsImNvbnN0cnVjdG9yIix5KSx5LmRpc3BsYXlOYW1lPWwodixzLCJHZW5lcmF0b3JGdW5jdGlvbiIpLHQuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbih0KXt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdC5jb25zdHJ1Y3RvcjtyZXR1cm4hIWUmJihlPT09eXx8IkdlbmVyYXRvckZ1bmN0aW9uIj09PShlLmRpc3BsYXlOYW1lfHxlLm5hbWUpKX0sdC5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsdik6KHQuX19wcm90b19fPXYsbCh0LHMsIkdlbmVyYXRvckZ1bmN0aW9uIikpLHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeCksdH0sdC5hd3JhcD1mdW5jdGlvbih0KXtyZXR1cm57X19hd2FpdDp0fX0sayh6LnByb3RvdHlwZSksbCh6LnByb3RvdHlwZSxvLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLHQuQXN5bmNJdGVyYXRvcj16LHQuYXN5bmM9ZnVuY3Rpb24oZSxyLG4saSxhKXt2b2lkIDA9PT1hJiYoYT1Qcm9taXNlKTt2YXIgbz1uZXcgeihoKGUscixuLGkpLGEpO3JldHVybiB0LmlzR2VuZXJhdG9yRnVuY3Rpb24ocik/bzpvLm5leHQoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdC5kb25lP3QudmFsdWU6by5uZXh0KCl9KSl9LGsoeCksbCh4LHMsIkdlbmVyYXRvciIpLGwoeCxhLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLGwoeCwidG9TdHJpbmciLChmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSkpLHQua2V5cz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIHIgaW4gdCllLnB1c2gocik7cmV0dXJuIGUucmV2ZXJzZSgpLGZ1bmN0aW9uIHIoKXtmb3IoO2UubGVuZ3RoOyl7dmFyIG49ZS5wb3AoKTtpZihuIGluIHQpcmV0dXJuIHIudmFsdWU9bixyLmRvbmU9ITEscn1yZXR1cm4gci5kb25lPSEwLHJ9fSx0LnZhbHVlcz1MLEIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpCLHJlc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMucHJldj0wLHRoaXMubmV4dD0wLHRoaXMuc2VudD10aGlzLl9zZW50PWUsdGhpcy5kb25lPSExLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5hcmc9ZSx0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChTKSwhdClmb3IodmFyIHIgaW4gdGhpcykidCI9PT1yLmNoYXJBdCgwKSYmbi5jYWxsKHRoaXMscikmJiFpc05hTigrci5zbGljZSgxKSkmJih0aGlzW3JdPWUpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciB0PXRoaXMudHJ5RW50cmllc1swXS5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24odCl7aWYodGhpcy5kb25lKXRocm93IHQ7dmFyIHI9dGhpcztmdW5jdGlvbiBpKG4saSl7cmV0dXJuIHMudHlwZT0idGhyb3ciLHMuYXJnPXQsci5uZXh0PW4saSYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz1lKSwhIWl9Zm9yKHZhciBhPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTthPj0wOy0tYSl7dmFyIG89dGhpcy50cnlFbnRyaWVzW2FdLHM9by5jb21wbGV0aW9uO2lmKCJyb290Ij09PW8udHJ5TG9jKXJldHVybiBpKCJlbmQiKTtpZihvLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgbD1uLmNhbGwobywiY2F0Y2hMb2MiKSxoPW4uY2FsbChvLCJmaW5hbGx5TG9jIik7aWYobCYmaCl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIGkoby5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gaShvLmZpbmFsbHlMb2MpfWVsc2UgaWYobCl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIGkoby5jYXRjaExvYywhMCl9ZWxzZXtpZighaCl0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gaShvLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgaT10aGlzLnRyeUVudHJpZXNbcl07aWYoaS50cnlMb2M8PXRoaXMucHJldiYmbi5jYWxsKGksImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PGkuZmluYWxseUxvYyl7dmFyIGE9aTticmVha319YSYmKCJicmVhayI9PT10fHwiY29udGludWUiPT09dCkmJmEudHJ5TG9jPD1lJiZlPD1hLmZpbmFsbHlMb2MmJihhPW51bGwpO3ZhciBvPWE/YS5jb21wbGV0aW9uOnt9O3JldHVybiBvLnR5cGU9dCxvLmFyZz1lLGE/KHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLm5leHQ9YS5maW5hbGx5TG9jLHApOnRoaXMuY29tcGxldGUobyl9LGNvbXBsZXRlOmZ1bmN0aW9uKHQsZSl7aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4iYnJlYWsiPT09dC50eXBlfHwiY29udGludWUiPT09dC50eXBlP3RoaXMubmV4dD10LmFyZzoicmV0dXJuIj09PXQudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPXQuYXJnLHRoaXMubWV0aG9kPSJyZXR1cm4iLHRoaXMubmV4dD0iZW5kIik6Im5vcm1hbCI9PT10LnR5cGUmJmUmJih0aGlzLm5leHQ9ZSkscH0sZmluaXNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciByPXRoaXMudHJ5RW50cmllc1tlXTtpZihyLmZpbmFsbHlMb2M9PT10KXJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbixyLmFmdGVyTG9jKSxTKHIpLHB9fSxjYXRjaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci50cnlMb2M9PT10KXt2YXIgbj1yLmNvbXBsZXRpb247aWYoInRocm93Ij09PW4udHlwZSl7dmFyIGk9bi5hcmc7UyhyKX1yZXR1cm4gaX19dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbih0LHIsbil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOkwodCkscmVzdWx0TmFtZTpyLG5leHRMb2M6bn0sIm5leHQiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz1lKSxwfX0sdH0odC5leHBvcnRzKTt0cnl7Z2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWU9ZX1jYXRjaCh0KXsib2JqZWN0Ij09dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWU9ZTpGdW5jdGlvbigiciIsInJlZ2VuZXJhdG9yUnVudGltZSA9IHIiKShlKX19KHtleHBvcnRzOnt9fSk7dmFyIGU9e2V4cG9ydHM6e319OyhmdW5jdGlvbih0KXtjb25zdCBlPTQscj0wLG49MSxpPTI7ZnVuY3Rpb24gYSh0KXtsZXQgZT10Lmxlbmd0aDtmb3IoOy0tZT49MDspdFtlXT0wfWNvbnN0IG89MCxzPTEsbD0yLGg9MyxjPTI1OCx1PTI5LGQ9MjU2LGY9ZCsxK3UsXz0zMCxwPTE5LGc9MipmKzEseT0xNSx2PTE2LHc9NyxtPTI1NixiPTE2LHg9MTcsaz0xOCx6PW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDBdKSxBPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzXSksRT1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsN10pLFM9bmV3IFVpbnQ4QXJyYXkoWzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdKSxCPTUxMixMPW5ldyBBcnJheSgyKihmKzIpKTthKEwpO2NvbnN0IFI9bmV3IEFycmF5KDIqXyk7YShSKTtjb25zdCBEPW5ldyBBcnJheShCKTthKEQpO2NvbnN0IE89bmV3IEFycmF5KGMtaCsxKTthKE8pO2NvbnN0IFU9bmV3IEFycmF5KHUpO2EoVSk7Y29uc3QgQz1uZXcgQXJyYXkoXyk7ZnVuY3Rpb24gVCh0LGUscixuLGkpe3RoaXMuc3RhdGljX3RyZWU9dCx0aGlzLmV4dHJhX2JpdHM9ZSx0aGlzLmV4dHJhX2Jhc2U9cix0aGlzLmVsZW1zPW4sdGhpcy5tYXhfbGVuZ3RoPWksdGhpcy5oYXNfc3RyZWU9dCYmdC5sZW5ndGh9bGV0IEYsSCxaO2Z1bmN0aW9uIE0odCxlKXt0aGlzLmR5bl90cmVlPXQsdGhpcy5tYXhfY29kZT0wLHRoaXMuc3RhdF9kZXNjPWV9YShDKTtjb25zdCBOPXQ9PnQ8MjU2P0RbdF06RFsyNTYrKHQ+Pj43KV0sST0odCxlKT0+e3QucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZlLHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPWU+Pj44JjI1NX0sJD0odCxlLHIpPT57dC5iaV92YWxpZD52LXI/KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LEkodCx0LmJpX2J1ZiksdC5iaV9idWY9ZT4+di10LmJpX3ZhbGlkLHQuYmlfdmFsaWQrPXItdik6KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LHQuYmlfdmFsaWQrPXIpfSxQPSh0LGUscik9PnskKHQsclsyKmVdLHJbMiplKzFdKX0saj0odCxlKT0+e2xldCByPTA7ZG97cnw9MSZ0LHQ+Pj49MSxyPDw9MX13aGlsZSgtLWU+MCk7cmV0dXJuIHI+Pj4xfSxLPXQ9PnsxNj09PXQuYmlfdmFsaWQ/KEkodCx0LmJpX2J1ZiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTApOnQuYmlfdmFsaWQ+PTgmJih0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmdC5iaV9idWYsdC5iaV9idWY+Pj04LHQuYmlfdmFsaWQtPTgpfSxYPSh0LGUpPT57Y29uc3Qgcj1lLmR5bl90cmVlLG49ZS5tYXhfY29kZSxpPWUuc3RhdF9kZXNjLnN0YXRpY190cmVlLGE9ZS5zdGF0X2Rlc2MuaGFzX3N0cmVlLG89ZS5zdGF0X2Rlc2MuZXh0cmFfYml0cyxzPWUuc3RhdF9kZXNjLmV4dHJhX2Jhc2UsbD1lLnN0YXRfZGVzYy5tYXhfbGVuZ3RoO2xldCBoLGMsdSxkLGYsXyxwPTA7Zm9yKGQ9MDtkPD15O2QrKyl0LmJsX2NvdW50W2RdPTA7Zm9yKHJbMip0LmhlYXBbdC5oZWFwX21heF0rMV09MCxoPXQuaGVhcF9tYXgrMTtoPGc7aCsrKWM9dC5oZWFwW2hdLGQ9clsyKnJbMipjKzFdKzFdKzEsZD5sJiYoZD1sLHArKyksclsyKmMrMV09ZCxjPm58fCh0LmJsX2NvdW50W2RdKyssZj0wLGM+PXMmJihmPW9bYy1zXSksXz1yWzIqY10sdC5vcHRfbGVuKz1fKihkK2YpLGEmJih0LnN0YXRpY19sZW4rPV8qKGlbMipjKzFdK2YpKSk7aWYoMCE9PXApe2Rve2ZvcihkPWwtMTswPT09dC5ibF9jb3VudFtkXTspZC0tO3QuYmxfY291bnRbZF0tLSx0LmJsX2NvdW50W2QrMV0rPTIsdC5ibF9jb3VudFtsXS0tLHAtPTJ9d2hpbGUocD4wKTtmb3IoZD1sOzAhPT1kO2QtLSlmb3IoYz10LmJsX2NvdW50W2RdOzAhPT1jOyl1PXQuaGVhcFstLWhdLHU+bnx8KHJbMip1KzFdIT09ZCYmKHQub3B0X2xlbis9KGQtclsyKnUrMV0pKnJbMip1XSxyWzIqdSsxXT1kKSxjLS0pfX0scT0odCxlLHIpPT57Y29uc3Qgbj1uZXcgQXJyYXkoeSsxKTtsZXQgaSxhLG89MDtmb3IoaT0xO2k8PXk7aSsrKW5baV09bz1vK3JbaS0xXTw8MTtmb3IoYT0wO2E8PWU7YSsrKXtsZXQgZT10WzIqYSsxXTswIT09ZSYmKHRbMiphXT1qKG5bZV0rKyxlKSl9fSxHPSgpPT57bGV0IHQsZSxyLG4saTtjb25zdCBhPW5ldyBBcnJheSh5KzEpO2ZvcihyPTAsbj0wO248dS0xO24rKylmb3IoVVtuXT1yLHQ9MDt0PDE8PHpbbl07dCsrKU9bcisrXT1uO2ZvcihPW3ItMV09bixpPTAsbj0wO248MTY7bisrKWZvcihDW25dPWksdD0wO3Q8MTw8QVtuXTt0KyspRFtpKytdPW47Zm9yKGk+Pj03O248XztuKyspZm9yKENbbl09aTw8Nyx0PTA7dDwxPDxBW25dLTc7dCsrKURbMjU2K2krK109bjtmb3IoZT0wO2U8PXk7ZSsrKWFbZV09MDtmb3IodD0wO3Q8PTE0MzspTFsyKnQrMV09OCx0KyssYVs4XSsrO2Zvcig7dDw9MjU1OylMWzIqdCsxXT05LHQrKyxhWzldKys7Zm9yKDt0PD0yNzk7KUxbMip0KzFdPTcsdCsrLGFbN10rKztmb3IoO3Q8PTI4NzspTFsyKnQrMV09OCx0KyssYVs4XSsrO2ZvcihxKEwsZisxLGEpLHQ9MDt0PF87dCsrKVJbMip0KzFdPTUsUlsyKnRdPWoodCw1KTtGPW5ldyBUKEwseixkKzEsZix5KSxIPW5ldyBUKFIsQSwwLF8seSksWj1uZXcgVChuZXcgQXJyYXkoMCksRSwwLHAsdyl9LFc9dD0+e2xldCBlO2ZvcihlPTA7ZTxmO2UrKyl0LmR5bl9sdHJlZVsyKmVdPTA7Zm9yKGU9MDtlPF87ZSsrKXQuZHluX2R0cmVlWzIqZV09MDtmb3IoZT0wO2U8cDtlKyspdC5ibF90cmVlWzIqZV09MDt0LmR5bl9sdHJlZVsyKm1dPTEsdC5vcHRfbGVuPXQuc3RhdGljX2xlbj0wLHQubGFzdF9saXQ9dC5tYXRjaGVzPTB9LFk9dD0+e3QuYmlfdmFsaWQ+OD9JKHQsdC5iaV9idWYpOnQuYmlfdmFsaWQ+MCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPXQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MH0sVj0odCxlLHIsbik9PntZKHQpLG4mJihJKHQsciksSSh0LH5yKSksdC5wZW5kaW5nX2J1Zi5zZXQodC53aW5kb3cuc3ViYXJyYXkoZSxlK3IpLHQucGVuZGluZyksdC5wZW5kaW5nKz1yfSxRPSh0LGUscixuKT0+e2NvbnN0IGk9MiplLGE9MipyO3JldHVybiB0W2ldPHRbYV18fHRbaV09PT10W2FdJiZuW2VdPD1uW3JdfSxKPSh0LGUscik9Pntjb25zdCBuPXQuaGVhcFtyXTtsZXQgaT1yPDwxO2Zvcig7aTw9dC5oZWFwX2xlbiYmKGk8dC5oZWFwX2xlbiYmUShlLHQuaGVhcFtpKzFdLHQuaGVhcFtpXSx0LmRlcHRoKSYmaSsrLCFRKGUsbix0LmhlYXBbaV0sdC5kZXB0aCkpOyl0LmhlYXBbcl09dC5oZWFwW2ldLHI9aSxpPDw9MTt0LmhlYXBbcl09bn0sdHQ9KHQsZSxyKT0+e2xldCBuLGksYSxvLHM9MDtpZigwIT09dC5sYXN0X2xpdClkb3tuPXQucGVuZGluZ19idWZbdC5kX2J1ZisyKnNdPDw4fHQucGVuZGluZ19idWZbdC5kX2J1ZisyKnMrMV0saT10LnBlbmRpbmdfYnVmW3QubF9idWYrc10scysrLDA9PT1uP1AodCxpLGUpOihhPU9baV0sUCh0LGErZCsxLGUpLG89elthXSwwIT09byYmKGktPVVbYV0sJCh0LGksbykpLG4tLSxhPU4obiksUCh0LGEsciksbz1BW2FdLDAhPT1vJiYobi09Q1thXSwkKHQsbixvKSkpfXdoaWxlKHM8dC5sYXN0X2xpdCk7UCh0LG0sZSl9LGV0PSh0LGUpPT57Y29uc3Qgcj1lLmR5bl90cmVlLG49ZS5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsaT1lLnN0YXRfZGVzYy5oYXNfc3RyZWUsYT1lLnN0YXRfZGVzYy5lbGVtcztsZXQgbyxzLGwsaD0tMTtmb3IodC5oZWFwX2xlbj0wLHQuaGVhcF9tYXg9ZyxvPTA7bzxhO28rKykwIT09clsyKm9dPyh0LmhlYXBbKyt0LmhlYXBfbGVuXT1oPW8sdC5kZXB0aFtvXT0wKTpyWzIqbysxXT0wO2Zvcig7dC5oZWFwX2xlbjwyOylsPXQuaGVhcFsrK3QuaGVhcF9sZW5dPWg8Mj8rK2g6MCxyWzIqbF09MSx0LmRlcHRoW2xdPTAsdC5vcHRfbGVuLS0saSYmKHQuc3RhdGljX2xlbi09blsyKmwrMV0pO2ZvcihlLm1heF9jb2RlPWgsbz10LmhlYXBfbGVuPj4xO28+PTE7by0tKUoodCxyLG8pO2w9YTtkb3tvPXQuaGVhcFsxXSx0LmhlYXBbMV09dC5oZWFwW3QuaGVhcF9sZW4tLV0sSih0LHIsMSkscz10LmhlYXBbMV0sdC5oZWFwWy0tdC5oZWFwX21heF09byx0LmhlYXBbLS10LmhlYXBfbWF4XT1zLHJbMipsXT1yWzIqb10rclsyKnNdLHQuZGVwdGhbbF09KHQuZGVwdGhbb10+PXQuZGVwdGhbc10/dC5kZXB0aFtvXTp0LmRlcHRoW3NdKSsxLHJbMipvKzFdPXJbMipzKzFdPWwsdC5oZWFwWzFdPWwrKyxKKHQsciwxKX13aGlsZSh0LmhlYXBfbGVuPj0yKTt0LmhlYXBbLS10LmhlYXBfbWF4XT10LmhlYXBbMV0sWCh0LGUpLHEocixoLHQuYmxfY291bnQpfSxydD0odCxlLHIpPT57bGV0IG4saSxhPS0xLG89ZVsxXSxzPTAsbD03LGg9NDtmb3IoMD09PW8mJihsPTEzOCxoPTMpLGVbMioocisxKSsxXT02NTUzNSxuPTA7bjw9cjtuKyspaT1vLG89ZVsyKihuKzEpKzFdLCsrczxsJiZpPT09b3x8KHM8aD90LmJsX3RyZWVbMippXSs9czowIT09aT8oaSE9PWEmJnQuYmxfdHJlZVsyKmldKyssdC5ibF90cmVlWzIqYl0rKyk6czw9MTA/dC5ibF90cmVlWzIqeF0rKzp0LmJsX3RyZWVbMiprXSsrLHM9MCxhPWksMD09PW8/KGw9MTM4LGg9Myk6aT09PW8/KGw9NixoPTMpOihsPTcsaD00KSl9LG50PSh0LGUscik9PntsZXQgbixpLGE9LTEsbz1lWzFdLHM9MCxsPTcsaD00O2ZvcigwPT09byYmKGw9MTM4LGg9Myksbj0wO248PXI7bisrKWlmKGk9byxvPWVbMioobisxKSsxXSwhKCsrczxsJiZpPT09bykpe2lmKHM8aClkb3tQKHQsaSx0LmJsX3RyZWUpfXdoaWxlKDAhPS0tcyk7ZWxzZSAwIT09aT8oaSE9PWEmJihQKHQsaSx0LmJsX3RyZWUpLHMtLSksUCh0LGIsdC5ibF90cmVlKSwkKHQscy0zLDIpKTpzPD0xMD8oUCh0LHgsdC5ibF90cmVlKSwkKHQscy0zLDMpKTooUCh0LGssdC5ibF90cmVlKSwkKHQscy0xMSw3KSk7cz0wLGE9aSwwPT09bz8obD0xMzgsaD0zKTppPT09bz8obD02LGg9Myk6KGw9NyxoPTQpfX0saXQ9dD0+e2xldCBlO2ZvcihydCh0LHQuZHluX2x0cmVlLHQubF9kZXNjLm1heF9jb2RlKSxydCh0LHQuZHluX2R0cmVlLHQuZF9kZXNjLm1heF9jb2RlKSxldCh0LHQuYmxfZGVzYyksZT1wLTE7ZT49MyYmMD09PXQuYmxfdHJlZVsyKlNbZV0rMV07ZS0tKTtyZXR1cm4gdC5vcHRfbGVuKz0zKihlKzEpKzUrNSs0LGV9LGF0PSh0LGUscixuKT0+e2xldCBpO2ZvcigkKHQsZS0yNTcsNSksJCh0LHItMSw1KSwkKHQsbi00LDQpLGk9MDtpPG47aSsrKSQodCx0LmJsX3RyZWVbMipTW2ldKzFdLDMpO250KHQsdC5keW5fbHRyZWUsZS0xKSxudCh0LHQuZHluX2R0cmVlLHItMSl9LG90PXQ9PntsZXQgZSxpPTQwOTM2MjQ0NDc7Zm9yKGU9MDtlPD0zMTtlKyssaT4+Pj0xKWlmKDEmaSYmMCE9PXQuZHluX2x0cmVlWzIqZV0pcmV0dXJuIHI7aWYoMCE9PXQuZHluX2x0cmVlWzE4XXx8MCE9PXQuZHluX2x0cmVlWzIwXXx8MCE9PXQuZHluX2x0cmVlWzI2XSlyZXR1cm4gbjtmb3IoZT0zMjtlPGQ7ZSsrKWlmKDAhPT10LmR5bl9sdHJlZVsyKmVdKXJldHVybiBuO3JldHVybiByfTtsZXQgc3Q9ITE7Y29uc3QgbHQ9KHQsZSxyLG4pPT57JCh0LChvPDwxKSsobj8xOjApLDMpLFYodCxlLHIsITApfSxodD0odCxyLG4sYSk9PntsZXQgbyxoLGM9MDt0LmxldmVsPjA/KHQuc3RybS5kYXRhX3R5cGU9PT1pJiYodC5zdHJtLmRhdGFfdHlwZT1vdCh0KSksZXQodCx0LmxfZGVzYyksZXQodCx0LmRfZGVzYyksYz1pdCh0KSxvPXQub3B0X2xlbiszKzc+Pj4zLGg9dC5zdGF0aWNfbGVuKzMrNz4+PjMsaDw9byYmKG89aCkpOm89aD1uKzUsbis0PD1vJiYtMSE9PXI/bHQodCxyLG4sYSk6dC5zdHJhdGVneT09PWV8fGg9PT1vPygkKHQsKHM8PDEpKyhhPzE6MCksMyksdHQodCxMLFIpKTooJCh0LChsPDwxKSsoYT8xOjApLDMpLGF0KHQsdC5sX2Rlc2MubWF4X2NvZGUrMSx0LmRfZGVzYy5tYXhfY29kZSsxLGMrMSksdHQodCx0LmR5bl9sdHJlZSx0LmR5bl9kdHJlZSkpLFcodCksYSYmWSh0KX07dmFyIGN0PXtfdHJfaW5pdDp0PT57c3R8fChHKCksc3Q9ITApLHQubF9kZXNjPW5ldyBNKHQuZHluX2x0cmVlLEYpLHQuZF9kZXNjPW5ldyBNKHQuZHluX2R0cmVlLEgpLHQuYmxfZGVzYz1uZXcgTSh0LmJsX3RyZWUsWiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTAsVyh0KX0sX3RyX3N0b3JlZF9ibG9jazpsdCxfdHJfZmx1c2hfYmxvY2s6aHQsX3RyX3RhbGx5Oih0LGUscik9Pih0LnBlbmRpbmdfYnVmW3QuZF9idWYrMip0Lmxhc3RfbGl0XT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqdC5sYXN0X2xpdCsxXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QubF9idWYrdC5sYXN0X2xpdF09MjU1JnIsdC5sYXN0X2xpdCsrLDA9PT1lP3QuZHluX2x0cmVlWzIqcl0rKzoodC5tYXRjaGVzKyssZS0tLHQuZHluX2x0cmVlWzIqKE9bcl0rZCsxKV0rKyx0LmR5bl9kdHJlZVsyKk4oZSldKyspLHQubGFzdF9saXQ9PT10LmxpdF9idWZzaXplLTEpLF90cl9hbGlnbjp0PT57JCh0LHM8PDEsMyksUCh0LG0sTCksSyh0KX19LHV0PSh0LGUscixuKT0+e2xldCBpPTY1NTM1JnR8MCxhPXQ+Pj4xNiY2NTUzNXwwLG89MDtmb3IoOzAhPT1yOyl7bz1yPjJlMz8yZTM6cixyLT1vO2Rve2k9aStlW24rK118MCxhPWEraXwwfXdoaWxlKC0tbyk7aSU9NjU1MjEsYSU9NjU1MjF9cmV0dXJuIGl8YTw8MTZ8MH07Y29uc3QgZHQ9bmV3IFVpbnQzMkFycmF5KCgoKT0+e2xldCB0LGU9W107Zm9yKHZhciByPTA7cjwyNTY7cisrKXt0PXI7Zm9yKHZhciBuPTA7bjw4O24rKyl0PTEmdD8zOTg4MjkyMzg0XnQ+Pj4xOnQ+Pj4xO2Vbcl09dH1yZXR1cm4gZX0pKCkpO3ZhciBmdD0odCxlLHIsbik9Pntjb25zdCBpPWR0LGE9bityO3RePS0xO2ZvcihsZXQgcj1uO3I8YTtyKyspdD10Pj4+OF5pWzI1NSYodF5lW3JdKV07cmV0dXJuLTFedH0sX3Q9ezI6Im5lZWQgZGljdGlvbmFyeSIsMToic3RyZWFtIGVuZCIsMDoiIiwiLTEiOiJmaWxlIGVycm9yIiwiLTIiOiJzdHJlYW0gZXJyb3IiLCItMyI6ImRhdGEgZXJyb3IiLCItNCI6Imluc3VmZmljaWVudCBtZW1vcnkiLCItNSI6ImJ1ZmZlciBlcnJvciIsIi02IjoiaW5jb21wYXRpYmxlIHZlcnNpb24ifSxwdD17Wl9OT19GTFVTSDowLFpfUEFSVElBTF9GTFVTSDoxLFpfU1lOQ19GTFVTSDoyLFpfRlVMTF9GTFVTSDozLFpfRklOSVNIOjQsWl9CTE9DSzo1LFpfVFJFRVM6NixaX09LOjAsWl9TVFJFQU1fRU5EOjEsWl9ORUVEX0RJQ1Q6MixaX0VSUk5POi0xLFpfU1RSRUFNX0VSUk9SOi0yLFpfREFUQV9FUlJPUjotMyxaX01FTV9FUlJPUjotNCxaX0JVRl9FUlJPUjotNSxaX05PX0NPTVBSRVNTSU9OOjAsWl9CRVNUX1NQRUVEOjEsWl9CRVNUX0NPTVBSRVNTSU9OOjksWl9ERUZBVUxUX0NPTVBSRVNTSU9OOi0xLFpfRklMVEVSRUQ6MSxaX0hVRkZNQU5fT05MWToyLFpfUkxFOjMsWl9GSVhFRDo0LFpfREVGQVVMVF9TVFJBVEVHWTowLFpfQklOQVJZOjAsWl9URVhUOjEsWl9VTktOT1dOOjIsWl9ERUZMQVRFRDo4fTtjb25zdHtfdHJfaW5pdDpndCxfdHJfc3RvcmVkX2Jsb2NrOnl0LF90cl9mbHVzaF9ibG9jazp2dCxfdHJfdGFsbHk6d3QsX3RyX2FsaWduOm10fT1jdCx7Wl9OT19GTFVTSDpidCxaX1BBUlRJQUxfRkxVU0g6eHQsWl9GVUxMX0ZMVVNIOmt0LFpfRklOSVNIOnp0LFpfQkxPQ0s6QXQsWl9PSzpFdCxaX1NUUkVBTV9FTkQ6U3QsWl9TVFJFQU1fRVJST1I6QnQsWl9EQVRBX0VSUk9SOkx0LFpfQlVGX0VSUk9SOlJ0LFpfREVGQVVMVF9DT01QUkVTU0lPTjpEdCxaX0ZJTFRFUkVEOk90LFpfSFVGRk1BTl9PTkxZOlV0LFpfUkxFOkN0LFpfRklYRUQ6VHQsWl9ERUZBVUxUX1NUUkFURUdZOkZ0LFpfVU5LTk9XTjpIdCxaX0RFRkxBVEVEOlp0fT1wdCxNdD05LE50PTE1LEl0PTgsJHQ9Mjg2LFB0PTMwLGp0PTE5LEt0PTIqJHQrMSxYdD0xNSxxdD0zLEd0PTI1OCxXdD1HdCtxdCsxLFl0PTMyLFZ0PTQyLFF0PTY5LEp0PTczLHRlPTkxLGVlPTEwMyxyZT0xMTMsbmU9NjY2LGllPTEsYWU9MixvZT0zLHNlPTQsbGU9MyxoZT0odCxlKT0+KHQubXNnPV90W2VdLGUpLGNlPXQ9Pih0PDwxKS0odD40Pzk6MCksdWU9dD0+e2xldCBlPXQubGVuZ3RoO2Zvcig7LS1lPj0wOyl0W2VdPTB9O2xldCBkZT0odCxlLHIpPT4oZTw8dC5oYXNoX3NoaWZ0XnIpJnQuaGFzaF9tYXNrO2NvbnN0IGZlPXQ9Pntjb25zdCBlPXQuc3RhdGU7bGV0IHI9ZS5wZW5kaW5nO3I+dC5hdmFpbF9vdXQmJihyPXQuYXZhaWxfb3V0KSwwIT09ciYmKHQub3V0cHV0LnNldChlLnBlbmRpbmdfYnVmLnN1YmFycmF5KGUucGVuZGluZ19vdXQsZS5wZW5kaW5nX291dCtyKSx0Lm5leHRfb3V0KSx0Lm5leHRfb3V0Kz1yLGUucGVuZGluZ19vdXQrPXIsdC50b3RhbF9vdXQrPXIsdC5hdmFpbF9vdXQtPXIsZS5wZW5kaW5nLT1yLDA9PT1lLnBlbmRpbmcmJihlLnBlbmRpbmdfb3V0PTApKX0sX2U9KHQsZSk9Pnt2dCh0LHQuYmxvY2tfc3RhcnQ+PTA/dC5ibG9ja19zdGFydDotMSx0LnN0cnN0YXJ0LXQuYmxvY2tfc3RhcnQsZSksdC5ibG9ja19zdGFydD10LnN0cnN0YXJ0LGZlKHQuc3RybSl9LHBlPSh0LGUpPT57dC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109ZX0sZ2U9KHQsZSk9Pnt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109MjU1JmV9LHllPSh0LGUscixuKT0+e2xldCBpPXQuYXZhaWxfaW47cmV0dXJuIGk+biYmKGk9biksMD09PWk/MDoodC5hdmFpbF9pbi09aSxlLnNldCh0LmlucHV0LnN1YmFycmF5KHQubmV4dF9pbix0Lm5leHRfaW4raSksciksMT09PXQuc3RhdGUud3JhcD90LmFkbGVyPXV0KHQuYWRsZXIsZSxpLHIpOjI9PT10LnN0YXRlLndyYXAmJih0LmFkbGVyPWZ0KHQuYWRsZXIsZSxpLHIpKSx0Lm5leHRfaW4rPWksdC50b3RhbF9pbis9aSxpKX0sdmU9KHQsZSk9PntsZXQgcixuLGk9dC5tYXhfY2hhaW5fbGVuZ3RoLGE9dC5zdHJzdGFydCxvPXQucHJldl9sZW5ndGgscz10Lm5pY2VfbWF0Y2g7Y29uc3QgbD10LnN0cnN0YXJ0PnQud19zaXplLVd0P3Quc3Ryc3RhcnQtKHQud19zaXplLVd0KTowLGg9dC53aW5kb3csYz10LndfbWFzayx1PXQucHJldixkPXQuc3Ryc3RhcnQrR3Q7bGV0IGY9aFthK28tMV0sXz1oW2Erb107dC5wcmV2X2xlbmd0aD49dC5nb29kX21hdGNoJiYoaT4+PTIpLHM+dC5sb29rYWhlYWQmJihzPXQubG9va2FoZWFkKTtkb3tpZihyPWUsaFtyK29dPT09XyYmaFtyK28tMV09PT1mJiZoW3JdPT09aFthXSYmaFsrK3JdPT09aFthKzFdKXthKz0yLHIrKztkb3t9d2hpbGUoaFsrK2FdPT09aFsrK3JdJiZoWysrYV09PT1oWysrcl0mJmhbKythXT09PWhbKytyXSYmaFsrK2FdPT09aFsrK3JdJiZoWysrYV09PT1oWysrcl0mJmhbKythXT09PWhbKytyXSYmaFsrK2FdPT09aFsrK3JdJiZoWysrYV09PT1oWysrcl0mJmE8ZCk7aWYobj1HdC0oZC1hKSxhPWQtR3Qsbj5vKXtpZih0Lm1hdGNoX3N0YXJ0PWUsbz1uLG4+PXMpYnJlYWs7Zj1oW2Erby0xXSxfPWhbYStvXX19fXdoaWxlKChlPXVbZSZjXSk+bCYmMCE9LS1pKTtyZXR1cm4gbzw9dC5sb29rYWhlYWQ/bzp0Lmxvb2thaGVhZH0sd2U9dD0+e2NvbnN0IGU9dC53X3NpemU7bGV0IHIsbixpLGEsbztkb3tpZihhPXQud2luZG93X3NpemUtdC5sb29rYWhlYWQtdC5zdHJzdGFydCx0LnN0cnN0YXJ0Pj1lKyhlLVd0KSl7dC53aW5kb3cuc2V0KHQud2luZG93LnN1YmFycmF5KGUsZStlKSwwKSx0Lm1hdGNoX3N0YXJ0LT1lLHQuc3Ryc3RhcnQtPWUsdC5ibG9ja19zdGFydC09ZSxuPXQuaGFzaF9zaXplLHI9bjtkb3tpPXQuaGVhZFstLXJdLHQuaGVhZFtyXT1pPj1lP2ktZTowfXdoaWxlKC0tbik7bj1lLHI9bjtkb3tpPXQucHJldlstLXJdLHQucHJldltyXT1pPj1lP2ktZTowfXdoaWxlKC0tbik7YSs9ZX1pZigwPT09dC5zdHJtLmF2YWlsX2luKWJyZWFrO2lmKG49eWUodC5zdHJtLHQud2luZG93LHQuc3Ryc3RhcnQrdC5sb29rYWhlYWQsYSksdC5sb29rYWhlYWQrPW4sdC5sb29rYWhlYWQrdC5pbnNlcnQ+PXF0KWZvcihvPXQuc3Ryc3RhcnQtdC5pbnNlcnQsdC5pbnNfaD10LndpbmRvd1tvXSx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1tvKzFdKTt0Lmluc2VydCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W28rcXQtMV0pLHQucHJldltvJnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPW8sbysrLHQuaW5zZXJ0LS0sISh0Lmxvb2thaGVhZCt0Lmluc2VydDxxdCkpOyk7fXdoaWxlKHQubG9va2FoZWFkPFd0JiYwIT09dC5zdHJtLmF2YWlsX2luKX0sbWU9KHQsZSk9PntsZXQgcixuO2Zvcig7Oyl7aWYodC5sb29rYWhlYWQ8V3Qpe2lmKHdlKHQpLHQubG9va2FoZWFkPFd0JiZlPT09YnQpcmV0dXJuIGllO2lmKDA9PT10Lmxvb2thaGVhZClicmVha31pZihyPTAsdC5sb29rYWhlYWQ+PXF0JiYodC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCtxdC0xXSkscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0KSwwIT09ciYmdC5zdHJzdGFydC1yPD10Lndfc2l6ZS1XdCYmKHQubWF0Y2hfbGVuZ3RoPXZlKHQscikpLHQubWF0Y2hfbGVuZ3RoPj1xdClpZihuPXd0KHQsdC5zdHJzdGFydC10Lm1hdGNoX3N0YXJ0LHQubWF0Y2hfbGVuZ3RoLXF0KSx0Lmxvb2thaGVhZC09dC5tYXRjaF9sZW5ndGgsdC5tYXRjaF9sZW5ndGg8PXQubWF4X2xhenlfbWF0Y2gmJnQubG9va2FoZWFkPj1xdCl7dC5tYXRjaF9sZW5ndGgtLTtkb3t0LnN0cnN0YXJ0KyssdC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCtxdC0xXSkscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0fXdoaWxlKDAhPS0tdC5tYXRjaF9sZW5ndGgpO3Quc3Ryc3RhcnQrK31lbHNlIHQuc3Ryc3RhcnQrPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPTAsdC5pbnNfaD10LndpbmRvd1t0LnN0cnN0YXJ0XSx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1t0LnN0cnN0YXJ0KzFdKTtlbHNlIG49d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKztpZihuJiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9dC5zdHJzdGFydDxxdC0xP3Quc3Ryc3RhcnQ6cXQtMSxlPT09enQ/KF9lKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P29lOnNlKTp0Lmxhc3RfbGl0JiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSxiZT0odCxlKT0+e2xldCByLG4saTtmb3IoOzspe2lmKHQubG9va2FoZWFkPFd0KXtpZih3ZSh0KSx0Lmxvb2thaGVhZDxXdCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj1xdCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrcXQtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCksdC5wcmV2X2xlbmd0aD10Lm1hdGNoX2xlbmd0aCx0LnByZXZfbWF0Y2g9dC5tYXRjaF9zdGFydCx0Lm1hdGNoX2xlbmd0aD1xdC0xLDAhPT1yJiZ0LnByZXZfbGVuZ3RoPHQubWF4X2xhenlfbWF0Y2gmJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtV3QmJih0Lm1hdGNoX2xlbmd0aD12ZSh0LHIpLHQubWF0Y2hfbGVuZ3RoPD01JiYodC5zdHJhdGVneT09PU90fHx0Lm1hdGNoX2xlbmd0aD09PXF0JiZ0LnN0cnN0YXJ0LXQubWF0Y2hfc3RhcnQ+NDA5NikmJih0Lm1hdGNoX2xlbmd0aD1xdC0xKSksdC5wcmV2X2xlbmd0aD49cXQmJnQubWF0Y2hfbGVuZ3RoPD10LnByZXZfbGVuZ3RoKXtpPXQuc3Ryc3RhcnQrdC5sb29rYWhlYWQtcXQsbj13dCh0LHQuc3Ryc3RhcnQtMS10LnByZXZfbWF0Y2gsdC5wcmV2X2xlbmd0aC1xdCksdC5sb29rYWhlYWQtPXQucHJldl9sZW5ndGgtMSx0LnByZXZfbGVuZ3RoLT0yO2RveysrdC5zdHJzdGFydDw9aSYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrcXQtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCl9d2hpbGUoMCE9LS10LnByZXZfbGVuZ3RoKTtpZih0Lm1hdGNoX2F2YWlsYWJsZT0wLHQubWF0Y2hfbGVuZ3RoPXF0LTEsdC5zdHJzdGFydCsrLG4mJihfZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfWVsc2UgaWYodC5tYXRjaF9hdmFpbGFibGUpe2lmKG49d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnQtMV0pLG4mJl9lKHQsITEpLHQuc3Ryc3RhcnQrKyx0Lmxvb2thaGVhZC0tLDA9PT10LnN0cm0uYXZhaWxfb3V0KXJldHVybiBpZX1lbHNlIHQubWF0Y2hfYXZhaWxhYmxlPTEsdC5zdHJzdGFydCsrLHQubG9va2FoZWFkLS19cmV0dXJuIHQubWF0Y2hfYXZhaWxhYmxlJiYobj13dCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydC0xXSksdC5tYXRjaF9hdmFpbGFibGU9MCksdC5pbnNlcnQ9dC5zdHJzdGFydDxxdC0xP3Quc3Ryc3RhcnQ6cXQtMSxlPT09enQ/KF9lKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P29lOnNlKTp0Lmxhc3RfbGl0JiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSx4ZT0odCxlKT0+e2xldCByLG4saSxhO2NvbnN0IG89dC53aW5kb3c7Zm9yKDs7KXtpZih0Lmxvb2thaGVhZDw9R3Qpe2lmKHdlKHQpLHQubG9va2FoZWFkPD1HdCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYodC5tYXRjaF9sZW5ndGg9MCx0Lmxvb2thaGVhZD49cXQmJnQuc3Ryc3RhcnQ+MCYmKGk9dC5zdHJzdGFydC0xLG49b1tpXSxuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldKSl7YT10LnN0cnN0YXJ0K0d0O2Rve313aGlsZShuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZuPT09b1srK2ldJiZpPGEpO3QubWF0Y2hfbGVuZ3RoPUd0LShhLWkpLHQubWF0Y2hfbGVuZ3RoPnQubG9va2FoZWFkJiYodC5tYXRjaF9sZW5ndGg9dC5sb29rYWhlYWQpfWlmKHQubWF0Y2hfbGVuZ3RoPj1xdD8ocj13dCh0LDEsdC5tYXRjaF9sZW5ndGgtcXQpLHQubG9va2FoZWFkLT10Lm1hdGNoX2xlbmd0aCx0LnN0cnN0YXJ0Kz10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aD0wKToocj13dCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydF0pLHQubG9va2FoZWFkLS0sdC5zdHJzdGFydCsrKSxyJiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09enQ/KF9lKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P29lOnNlKTp0Lmxhc3RfbGl0JiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSxrZT0odCxlKT0+e2xldCByO2Zvcig7Oyl7aWYoMD09PXQubG9va2FoZWFkJiYod2UodCksMD09PXQubG9va2FoZWFkKSl7aWYoZT09PWJ0KXJldHVybiBpZTticmVha31pZih0Lm1hdGNoX2xlbmd0aD0wLHI9d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyxyJiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09enQ/KF9lKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P29lOnNlKTp0Lmxhc3RfbGl0JiYoX2UodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfTtmdW5jdGlvbiB6ZSh0LGUscixuLGkpe3RoaXMuZ29vZF9sZW5ndGg9dCx0aGlzLm1heF9sYXp5PWUsdGhpcy5uaWNlX2xlbmd0aD1yLHRoaXMubWF4X2NoYWluPW4sdGhpcy5mdW5jPWl9Y29uc3QgQWU9W25ldyB6ZSgwLDAsMCwwLCgodCxlKT0+e2xldCByPTY1NTM1O2ZvcihyPnQucGVuZGluZ19idWZfc2l6ZS01JiYocj10LnBlbmRpbmdfYnVmX3NpemUtNSk7Oyl7aWYodC5sb29rYWhlYWQ8PTEpe2lmKHdlKHQpLDA9PT10Lmxvb2thaGVhZCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9dC5zdHJzdGFydCs9dC5sb29rYWhlYWQsdC5sb29rYWhlYWQ9MDtjb25zdCBuPXQuYmxvY2tfc3RhcnQrcjtpZigoMD09PXQuc3Ryc3RhcnR8fHQuc3Ryc3RhcnQ+PW4pJiYodC5sb29rYWhlYWQ9dC5zdHJzdGFydC1uLHQuc3Ryc3RhcnQ9bixfZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllO2lmKHQuc3Ryc3RhcnQtdC5ibG9ja19zdGFydD49dC53X3NpemUtV3QmJihfZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfXJldHVybiB0Lmluc2VydD0wLGU9PT16dD8oX2UodCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/b2U6c2UpOih0LnN0cnN0YXJ0PnQuYmxvY2tfc3RhcnQmJihfZSh0LCExKSx0LnN0cm0uYXZhaWxfb3V0KSxpZSl9KSksbmV3IHplKDQsNCw4LDQsbWUpLG5ldyB6ZSg0LDUsMTYsOCxtZSksbmV3IHplKDQsNiwzMiwzMixtZSksbmV3IHplKDQsNCwxNiwxNixiZSksbmV3IHplKDgsMTYsMzIsMzIsYmUpLG5ldyB6ZSg4LDE2LDEyOCwxMjgsYmUpLG5ldyB6ZSg4LDMyLDEyOCwyNTYsYmUpLG5ldyB6ZSgzMiwxMjgsMjU4LDEwMjQsYmUpLG5ldyB6ZSgzMiwyNTgsMjU4LDQwOTYsYmUpXSxFZT10PT57dC53aW5kb3dfc2l6ZT0yKnQud19zaXplLHVlKHQuaGVhZCksdC5tYXhfbGF6eV9tYXRjaD1BZVt0LmxldmVsXS5tYXhfbGF6eSx0Lmdvb2RfbWF0Y2g9QWVbdC5sZXZlbF0uZ29vZF9sZW5ndGgsdC5uaWNlX21hdGNoPUFlW3QubGV2ZWxdLm5pY2VfbGVuZ3RoLHQubWF4X2NoYWluX2xlbmd0aD1BZVt0LmxldmVsXS5tYXhfY2hhaW4sdC5zdHJzdGFydD0wLHQuYmxvY2tfc3RhcnQ9MCx0Lmxvb2thaGVhZD0wLHQuaW5zZXJ0PTAsdC5tYXRjaF9sZW5ndGg9dC5wcmV2X2xlbmd0aD1xdC0xLHQubWF0Y2hfYXZhaWxhYmxlPTAsdC5pbnNfaD0wfTtmdW5jdGlvbiBTZSgpe3RoaXMuc3RybT1udWxsLHRoaXMuc3RhdHVzPTAsdGhpcy5wZW5kaW5nX2J1Zj1udWxsLHRoaXMucGVuZGluZ19idWZfc2l6ZT0wLHRoaXMucGVuZGluZ19vdXQ9MCx0aGlzLnBlbmRpbmc9MCx0aGlzLndyYXA9MCx0aGlzLmd6aGVhZD1udWxsLHRoaXMuZ3ppbmRleD0wLHRoaXMubWV0aG9kPVp0LHRoaXMubGFzdF9mbHVzaD0tMSx0aGlzLndfc2l6ZT0wLHRoaXMud19iaXRzPTAsdGhpcy53X21hc2s9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMud2luZG93X3NpemU9MCx0aGlzLnByZXY9bnVsbCx0aGlzLmhlYWQ9bnVsbCx0aGlzLmluc19oPTAsdGhpcy5oYXNoX3NpemU9MCx0aGlzLmhhc2hfYml0cz0wLHRoaXMuaGFzaF9tYXNrPTAsdGhpcy5oYXNoX3NoaWZ0PTAsdGhpcy5ibG9ja19zdGFydD0wLHRoaXMubWF0Y2hfbGVuZ3RoPTAsdGhpcy5wcmV2X21hdGNoPTAsdGhpcy5tYXRjaF9hdmFpbGFibGU9MCx0aGlzLnN0cnN0YXJ0PTAsdGhpcy5tYXRjaF9zdGFydD0wLHRoaXMubG9va2FoZWFkPTAsdGhpcy5wcmV2X2xlbmd0aD0wLHRoaXMubWF4X2NoYWluX2xlbmd0aD0wLHRoaXMubWF4X2xhenlfbWF0Y2g9MCx0aGlzLmxldmVsPTAsdGhpcy5zdHJhdGVneT0wLHRoaXMuZ29vZF9tYXRjaD0wLHRoaXMubmljZV9tYXRjaD0wLHRoaXMuZHluX2x0cmVlPW5ldyBVaW50MTZBcnJheSgyKkt0KSx0aGlzLmR5bl9kdHJlZT1uZXcgVWludDE2QXJyYXkoMiooMipQdCsxKSksdGhpcy5ibF90cmVlPW5ldyBVaW50MTZBcnJheSgyKigyKmp0KzEpKSx1ZSh0aGlzLmR5bl9sdHJlZSksdWUodGhpcy5keW5fZHRyZWUpLHVlKHRoaXMuYmxfdHJlZSksdGhpcy5sX2Rlc2M9bnVsbCx0aGlzLmRfZGVzYz1udWxsLHRoaXMuYmxfZGVzYz1udWxsLHRoaXMuYmxfY291bnQ9bmV3IFVpbnQxNkFycmF5KFh0KzEpLHRoaXMuaGVhcD1uZXcgVWludDE2QXJyYXkoMiokdCsxKSx1ZSh0aGlzLmhlYXApLHRoaXMuaGVhcF9sZW49MCx0aGlzLmhlYXBfbWF4PTAsdGhpcy5kZXB0aD1uZXcgVWludDE2QXJyYXkoMiokdCsxKSx1ZSh0aGlzLmRlcHRoKSx0aGlzLmxfYnVmPTAsdGhpcy5saXRfYnVmc2l6ZT0wLHRoaXMubGFzdF9saXQ9MCx0aGlzLmRfYnVmPTAsdGhpcy5vcHRfbGVuPTAsdGhpcy5zdGF0aWNfbGVuPTAsdGhpcy5tYXRjaGVzPTAsdGhpcy5pbnNlcnQ9MCx0aGlzLmJpX2J1Zj0wLHRoaXMuYmlfdmFsaWQ9MH1jb25zdCBCZT10PT57aWYoIXR8fCF0LnN0YXRlKXJldHVybiBoZSh0LEJ0KTt0LnRvdGFsX2luPXQudG90YWxfb3V0PTAsdC5kYXRhX3R5cGU9SHQ7Y29uc3QgZT10LnN0YXRlO3JldHVybiBlLnBlbmRpbmc9MCxlLnBlbmRpbmdfb3V0PTAsZS53cmFwPDAmJihlLndyYXA9LWUud3JhcCksZS5zdGF0dXM9ZS53cmFwP1Z0OnJlLHQuYWRsZXI9Mj09PWUud3JhcD8wOjEsZS5sYXN0X2ZsdXNoPWJ0LGd0KGUpLEV0fSxMZT10PT57Y29uc3QgZT1CZSh0KTtyZXR1cm4gZT09PUV0JiZFZSh0LnN0YXRlKSxlfSxSZT0odCxlLHIsbixpLGEpPT57aWYoIXQpcmV0dXJuIEJ0O2xldCBvPTE7aWYoZT09PUR0JiYoZT02KSxuPDA/KG89MCxuPS1uKTpuPjE1JiYobz0yLG4tPTE2KSxpPDF8fGk+TXR8fHIhPT1adHx8bjw4fHxuPjE1fHxlPDB8fGU+OXx8YTwwfHxhPlR0KXJldHVybiBoZSh0LEJ0KTs4PT09biYmKG49OSk7Y29uc3Qgcz1uZXcgU2U7cmV0dXJuIHQuc3RhdGU9cyxzLnN0cm09dCxzLndyYXA9byxzLmd6aGVhZD1udWxsLHMud19iaXRzPW4scy53X3NpemU9MTw8cy53X2JpdHMscy53X21hc2s9cy53X3NpemUtMSxzLmhhc2hfYml0cz1pKzcscy5oYXNoX3NpemU9MTw8cy5oYXNoX2JpdHMscy5oYXNoX21hc2s9cy5oYXNoX3NpemUtMSxzLmhhc2hfc2hpZnQ9fn4oKHMuaGFzaF9iaXRzK3F0LTEpL3F0KSxzLndpbmRvdz1uZXcgVWludDhBcnJheSgyKnMud19zaXplKSxzLmhlYWQ9bmV3IFVpbnQxNkFycmF5KHMuaGFzaF9zaXplKSxzLnByZXY9bmV3IFVpbnQxNkFycmF5KHMud19zaXplKSxzLmxpdF9idWZzaXplPTE8PGkrNixzLnBlbmRpbmdfYnVmX3NpemU9NCpzLmxpdF9idWZzaXplLHMucGVuZGluZ19idWY9bmV3IFVpbnQ4QXJyYXkocy5wZW5kaW5nX2J1Zl9zaXplKSxzLmRfYnVmPTEqcy5saXRfYnVmc2l6ZSxzLmxfYnVmPTMqcy5saXRfYnVmc2l6ZSxzLmxldmVsPWUscy5zdHJhdGVneT1hLHMubWV0aG9kPXIsTGUodCl9O3ZhciBEZT17ZGVmbGF0ZUluaXQ6KHQsZSk9PlJlKHQsZSxadCxOdCxJdCxGdCksZGVmbGF0ZUluaXQyOlJlLGRlZmxhdGVSZXNldDpMZSxkZWZsYXRlUmVzZXRLZWVwOkJlLGRlZmxhdGVTZXRIZWFkZXI6KHQsZSk9PnQmJnQuc3RhdGU/MiE9PXQuc3RhdGUud3JhcD9CdDoodC5zdGF0ZS5nemhlYWQ9ZSxFdCk6QnQsZGVmbGF0ZToodCxlKT0+e2xldCByLG47aWYoIXR8fCF0LnN0YXRlfHxlPkF0fHxlPDApcmV0dXJuIHQ/aGUodCxCdCk6QnQ7Y29uc3QgaT10LnN0YXRlO2lmKCF0Lm91dHB1dHx8IXQuaW5wdXQmJjAhPT10LmF2YWlsX2lufHxpLnN0YXR1cz09PW5lJiZlIT09enQpcmV0dXJuIGhlKHQsMD09PXQuYXZhaWxfb3V0P1J0OkJ0KTtpLnN0cm09dDtjb25zdCBhPWkubGFzdF9mbHVzaDtpZihpLmxhc3RfZmx1c2g9ZSxpLnN0YXR1cz09PVZ0KWlmKDI9PT1pLndyYXApdC5hZGxlcj0wLHBlKGksMzEpLHBlKGksMTM5KSxwZShpLDgpLGkuZ3poZWFkPyhwZShpLChpLmd6aGVhZC50ZXh0PzE6MCkrKGkuZ3poZWFkLmhjcmM/MjowKSsoaS5nemhlYWQuZXh0cmE/NDowKSsoaS5nemhlYWQubmFtZT84OjApKyhpLmd6aGVhZC5jb21tZW50PzE2OjApKSxwZShpLDI1NSZpLmd6aGVhZC50aW1lKSxwZShpLGkuZ3poZWFkLnRpbWU+PjgmMjU1KSxwZShpLGkuZ3poZWFkLnRpbWU+PjE2JjI1NSkscGUoaSxpLmd6aGVhZC50aW1lPj4yNCYyNTUpLHBlKGksOT09PWkubGV2ZWw/MjppLnN0cmF0ZWd5Pj1VdHx8aS5sZXZlbDwyPzQ6MCkscGUoaSwyNTUmaS5nemhlYWQub3MpLGkuZ3poZWFkLmV4dHJhJiZpLmd6aGVhZC5leHRyYS5sZW5ndGgmJihwZShpLDI1NSZpLmd6aGVhZC5leHRyYS5sZW5ndGgpLHBlKGksaS5nemhlYWQuZXh0cmEubGVuZ3RoPj44JjI1NSkpLGkuZ3poZWFkLmhjcmMmJih0LmFkbGVyPWZ0KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmcsMCkpLGkuZ3ppbmRleD0wLGkuc3RhdHVzPVF0KToocGUoaSwwKSxwZShpLDApLHBlKGksMCkscGUoaSwwKSxwZShpLDApLHBlKGksOT09PWkubGV2ZWw/MjppLnN0cmF0ZWd5Pj1VdHx8aS5sZXZlbDwyPzQ6MCkscGUoaSxsZSksaS5zdGF0dXM9cmUpO2Vsc2V7bGV0IGU9WnQrKGkud19iaXRzLTg8PDQpPDw4LHI9LTE7cj1pLnN0cmF0ZWd5Pj1VdHx8aS5sZXZlbDwyPzA6aS5sZXZlbDw2PzE6Nj09PWkubGV2ZWw/MjozLGV8PXI8PDYsMCE9PWkuc3Ryc3RhcnQmJihlfD1ZdCksZSs9MzEtZSUzMSxpLnN0YXR1cz1yZSxnZShpLGUpLDAhPT1pLnN0cnN0YXJ0JiYoZ2UoaSx0LmFkbGVyPj4+MTYpLGdlKGksNjU1MzUmdC5hZGxlcikpLHQuYWRsZXI9MX1pZihpLnN0YXR1cz09PVF0KWlmKGkuZ3poZWFkLmV4dHJhKXtmb3Iocj1pLnBlbmRpbmc7aS5nemluZGV4PCg2NTUzNSZpLmd6aGVhZC5leHRyYS5sZW5ndGgpJiYoaS5wZW5kaW5nIT09aS5wZW5kaW5nX2J1Zl9zaXplfHwoaS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPWZ0KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksZmUodCkscj1pLnBlbmRpbmcsaS5wZW5kaW5nIT09aS5wZW5kaW5nX2J1Zl9zaXplKSk7KXBlKGksMjU1JmkuZ3poZWFkLmV4dHJhW2kuZ3ppbmRleF0pLGkuZ3ppbmRleCsrO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1mdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLGkuZ3ppbmRleD09PWkuZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGkuZ3ppbmRleD0wLGkuc3RhdHVzPUp0KX1lbHNlIGkuc3RhdHVzPUp0O2lmKGkuc3RhdHVzPT09SnQpaWYoaS5nemhlYWQubmFtZSl7cj1pLnBlbmRpbmc7ZG97aWYoaS5wZW5kaW5nPT09aS5wZW5kaW5nX2J1Zl9zaXplJiYoaS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPWZ0KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksZmUodCkscj1pLnBlbmRpbmcsaS5wZW5kaW5nPT09aS5wZW5kaW5nX2J1Zl9zaXplKSl7bj0xO2JyZWFrfW49aS5nemluZGV4PGkuZ3poZWFkLm5hbWUubGVuZ3RoPzI1NSZpLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQoaS5nemluZGV4KyspOjAscGUoaSxuKX13aGlsZSgwIT09bik7aS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPWZ0KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksMD09PW4mJihpLmd6aW5kZXg9MCxpLnN0YXR1cz10ZSl9ZWxzZSBpLnN0YXR1cz10ZTtpZihpLnN0YXR1cz09PXRlKWlmKGkuZ3poZWFkLmNvbW1lbnQpe3I9aS5wZW5kaW5nO2Rve2lmKGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSYmKGkuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1mdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLGZlKHQpLHI9aS5wZW5kaW5nLGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSkpe249MTticmVha31uPWkuZ3ppbmRleDxpLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmaS5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KGkuZ3ppbmRleCsrKTowLHBlKGksbil9d2hpbGUoMCE9PW4pO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1mdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLDA9PT1uJiYoaS5zdGF0dXM9ZWUpfWVsc2UgaS5zdGF0dXM9ZWU7aWYoaS5zdGF0dXM9PT1lZSYmKGkuZ3poZWFkLmhjcmM/KGkucGVuZGluZysyPmkucGVuZGluZ19idWZfc2l6ZSYmZmUodCksaS5wZW5kaW5nKzI8PWkucGVuZGluZ19idWZfc2l6ZSYmKHBlKGksMjU1JnQuYWRsZXIpLHBlKGksdC5hZGxlcj4+OCYyNTUpLHQuYWRsZXI9MCxpLnN0YXR1cz1yZSkpOmkuc3RhdHVzPXJlKSwwIT09aS5wZW5kaW5nKXtpZihmZSh0KSwwPT09dC5hdmFpbF9vdXQpcmV0dXJuIGkubGFzdF9mbHVzaD0tMSxFdH1lbHNlIGlmKDA9PT10LmF2YWlsX2luJiZjZShlKTw9Y2UoYSkmJmUhPT16dClyZXR1cm4gaGUodCxSdCk7aWYoaS5zdGF0dXM9PT1uZSYmMCE9PXQuYXZhaWxfaW4pcmV0dXJuIGhlKHQsUnQpO2lmKDAhPT10LmF2YWlsX2lufHwwIT09aS5sb29rYWhlYWR8fGUhPT1idCYmaS5zdGF0dXMhPT1uZSl7bGV0IHI9aS5zdHJhdGVneT09PVV0P2tlKGksZSk6aS5zdHJhdGVneT09PUN0P3hlKGksZSk6QWVbaS5sZXZlbF0uZnVuYyhpLGUpO2lmKHIhPT1vZSYmciE9PXNlfHwoaS5zdGF0dXM9bmUpLHI9PT1pZXx8cj09PW9lKXJldHVybiAwPT09dC5hdmFpbF9vdXQmJihpLmxhc3RfZmx1c2g9LTEpLEV0O2lmKHI9PT1hZSYmKGU9PT14dD9tdChpKTplIT09QXQmJih5dChpLDAsMCwhMSksZT09PWt0JiYodWUoaS5oZWFkKSwwPT09aS5sb29rYWhlYWQmJihpLnN0cnN0YXJ0PTAsaS5ibG9ja19zdGFydD0wLGkuaW5zZXJ0PTApKSksZmUodCksMD09PXQuYXZhaWxfb3V0KSlyZXR1cm4gaS5sYXN0X2ZsdXNoPS0xLEV0fXJldHVybiBlIT09enQ/RXQ6aS53cmFwPD0wP1N0OigyPT09aS53cmFwPyhwZShpLDI1NSZ0LmFkbGVyKSxwZShpLHQuYWRsZXI+PjgmMjU1KSxwZShpLHQuYWRsZXI+PjE2JjI1NSkscGUoaSx0LmFkbGVyPj4yNCYyNTUpLHBlKGksMjU1JnQudG90YWxfaW4pLHBlKGksdC50b3RhbF9pbj4+OCYyNTUpLHBlKGksdC50b3RhbF9pbj4+MTYmMjU1KSxwZShpLHQudG90YWxfaW4+PjI0JjI1NSkpOihnZShpLHQuYWRsZXI+Pj4xNiksZ2UoaSw2NTUzNSZ0LmFkbGVyKSksZmUodCksaS53cmFwPjAmJihpLndyYXA9LWkud3JhcCksMCE9PWkucGVuZGluZz9FdDpTdCl9LGRlZmxhdGVFbmQ6dD0+e2lmKCF0fHwhdC5zdGF0ZSlyZXR1cm4gQnQ7Y29uc3QgZT10LnN0YXRlLnN0YXR1cztyZXR1cm4gZSE9PVZ0JiZlIT09UXQmJmUhPT1KdCYmZSE9PXRlJiZlIT09ZWUmJmUhPT1yZSYmZSE9PW5lP2hlKHQsQnQpOih0LnN0YXRlPW51bGwsZT09PXJlP2hlKHQsTHQpOkV0KX0sZGVmbGF0ZVNldERpY3Rpb25hcnk6KHQsZSk9PntsZXQgcj1lLmxlbmd0aDtpZighdHx8IXQuc3RhdGUpcmV0dXJuIEJ0O2NvbnN0IG49dC5zdGF0ZSxpPW4ud3JhcDtpZigyPT09aXx8MT09PWkmJm4uc3RhdHVzIT09VnR8fG4ubG9va2FoZWFkKXJldHVybiBCdDtpZigxPT09aSYmKHQuYWRsZXI9dXQodC5hZGxlcixlLHIsMCkpLG4ud3JhcD0wLHI+PW4ud19zaXplKXswPT09aSYmKHVlKG4uaGVhZCksbi5zdHJzdGFydD0wLG4uYmxvY2tfc3RhcnQ9MCxuLmluc2VydD0wKTtsZXQgdD1uZXcgVWludDhBcnJheShuLndfc2l6ZSk7dC5zZXQoZS5zdWJhcnJheShyLW4ud19zaXplLHIpLDApLGU9dCxyPW4ud19zaXplfWNvbnN0IGE9dC5hdmFpbF9pbixvPXQubmV4dF9pbixzPXQuaW5wdXQ7Zm9yKHQuYXZhaWxfaW49cix0Lm5leHRfaW49MCx0LmlucHV0PWUsd2Uobik7bi5sb29rYWhlYWQ+PXF0Oyl7bGV0IHQ9bi5zdHJzdGFydCxlPW4ubG9va2FoZWFkLShxdC0xKTtkb3tuLmluc19oPWRlKG4sbi5pbnNfaCxuLndpbmRvd1t0K3F0LTFdKSxuLnByZXZbdCZuLndfbWFza109bi5oZWFkW24uaW5zX2hdLG4uaGVhZFtuLmluc19oXT10LHQrK313aGlsZSgtLWUpO24uc3Ryc3RhcnQ9dCxuLmxvb2thaGVhZD1xdC0xLHdlKG4pfXJldHVybiBuLnN0cnN0YXJ0Kz1uLmxvb2thaGVhZCxuLmJsb2NrX3N0YXJ0PW4uc3Ryc3RhcnQsbi5pbnNlcnQ9bi5sb29rYWhlYWQsbi5sb29rYWhlYWQ9MCxuLm1hdGNoX2xlbmd0aD1uLnByZXZfbGVuZ3RoPXF0LTEsbi5tYXRjaF9hdmFpbGFibGU9MCx0Lm5leHRfaW49byx0LmlucHV0PXMsdC5hdmFpbF9pbj1hLG4ud3JhcD1pLEV0fSxkZWZsYXRlSW5mbzoicGFrbyBkZWZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSJ9O2NvbnN0IE9lPSh0LGUpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKTt2YXIgVWU9ZnVuY3Rpb24odCl7Y29uc3QgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7Zm9yKDtlLmxlbmd0aDspe2NvbnN0IHI9ZS5zaGlmdCgpO2lmKHIpe2lmKCJvYmplY3QiIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKHIrIm11c3QgYmUgbm9uLW9iamVjdCIpO2Zvcihjb25zdCBlIGluIHIpT2UocixlKSYmKHRbZV09cltlXSl9fXJldHVybiB0fSxDZT17YXNzaWduOlVlLGZsYXR0ZW5DaHVua3M6dD0+e2xldCBlPTA7Zm9yKGxldCByPTAsbj10Lmxlbmd0aDtyPG47cisrKWUrPXRbcl0ubGVuZ3RoO2NvbnN0IHI9bmV3IFVpbnQ4QXJyYXkoZSk7Zm9yKGxldCBlPTAsbj0wLGk9dC5sZW5ndGg7ZTxpO2UrKyl7bGV0IGk9dFtlXTtyLnNldChpLG4pLG4rPWkubGVuZ3RofXJldHVybiByfX07bGV0IFRlPSEwO3RyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKHQpe1RlPSExfWNvbnN0IEZlPW5ldyBVaW50OEFycmF5KDI1Nik7Zm9yKGxldCB0PTA7dDwyNTY7dCsrKUZlW3RdPXQ+PTI1Mj82OnQ+PTI0OD81OnQ+PTI0MD80OnQ+PTIyND8zOnQ+PTE5Mj8yOjE7RmVbMjU0XT1GZVsyNTRdPTE7Y29uc3QgSGU9KHQsZSk9PntpZihlPDY1NTM0JiZ0LnN1YmFycmF5JiZUZSlyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHQubGVuZ3RoPT09ZT90OnQuc3ViYXJyYXkoMCxlKSk7bGV0IHI9IiI7Zm9yKGxldCBuPTA7bjxlO24rKylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO3JldHVybiByfTt2YXIgWmU9e3N0cmluZzJidWY6dD0+e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBUZXh0RW5jb2RlciYmVGV4dEVuY29kZXIucHJvdG90eXBlLmVuY29kZSlyZXR1cm4obmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCk7bGV0IGUscixuLGksYSxvPXQubGVuZ3RoLHM9MDtmb3IoaT0wO2k8bztpKyspcj10LmNoYXJDb2RlQXQoaSksNTUyOTY9PSg2NDUxMiZyKSYmaSsxPG8mJihuPXQuY2hhckNvZGVBdChpKzEpLDU2MzIwPT0oNjQ1MTImbikmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGkrKykpLHMrPXI8MTI4PzE6cjwyMDQ4PzI6cjw2NTUzNj8zOjQ7Zm9yKGU9bmV3IFVpbnQ4QXJyYXkocyksYT0wLGk9MDthPHM7aSsrKXI9dC5jaGFyQ29kZUF0KGkpLDU1Mjk2PT0oNjQ1MTImcikmJmkrMTxvJiYobj10LmNoYXJDb2RlQXQoaSsxKSw1NjMyMD09KDY0NTEyJm4pJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxpKyspKSxyPDEyOD9lW2ErK109cjpyPDIwNDg/KGVbYSsrXT0xOTJ8cj4+PjYsZVthKytdPTEyOHw2MyZyKTpyPDY1NTM2PyhlW2ErK109MjI0fHI+Pj4xMixlW2ErK109MTI4fHI+Pj42JjYzLGVbYSsrXT0xMjh8NjMmcik6KGVbYSsrXT0yNDB8cj4+PjE4LGVbYSsrXT0xMjh8cj4+PjEyJjYzLGVbYSsrXT0xMjh8cj4+PjYmNjMsZVthKytdPTEyOHw2MyZyKTtyZXR1cm4gZX0sYnVmMnN0cmluZzoodCxlKT0+e2NvbnN0IHI9ZXx8dC5sZW5ndGg7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFRleHREZWNvZGVyJiZUZXh0RGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlKXJldHVybihuZXcgVGV4dERlY29kZXIpLmRlY29kZSh0LnN1YmFycmF5KDAsZSkpO2xldCBuLGk7Y29uc3QgYT1uZXcgQXJyYXkoMipyKTtmb3IoaT0wLG49MDtuPHI7KXtsZXQgZT10W24rK107aWYoZTwxMjgpe2FbaSsrXT1lO2NvbnRpbnVlfWxldCBvPUZlW2VdO2lmKG8+NClhW2krK109NjU1MzMsbis9by0xO2Vsc2V7Zm9yKGUmPTI9PT1vPzMxOjM9PT1vPzE1Ojc7bz4xJiZuPHI7KWU9ZTw8Nnw2MyZ0W24rK10sby0tO28+MT9hW2krK109NjU1MzM6ZTw2NTUzNj9hW2krK109ZTooZS09NjU1MzYsYVtpKytdPTU1Mjk2fGU+PjEwJjEwMjMsYVtpKytdPTU2MzIwfDEwMjMmZSl9fXJldHVybiBIZShhLGkpfSx1dGY4Ym9yZGVyOih0LGUpPT57KGU9ZXx8dC5sZW5ndGgpPnQubGVuZ3RoJiYoZT10Lmxlbmd0aCk7bGV0IHI9ZS0xO2Zvcig7cj49MCYmMTI4PT0oMTkyJnRbcl0pOylyLS07cmV0dXJuIHI8MHx8MD09PXI/ZTpyK0ZlW3Rbcl1dPmU/cjplfX07ZnVuY3Rpb24gTWUoKXt0aGlzLmlucHV0PW51bGwsdGhpcy5uZXh0X2luPTAsdGhpcy5hdmFpbF9pbj0wLHRoaXMudG90YWxfaW49MCx0aGlzLm91dHB1dD1udWxsLHRoaXMubmV4dF9vdXQ9MCx0aGlzLmF2YWlsX291dD0wLHRoaXMudG90YWxfb3V0PTAsdGhpcy5tc2c9IiIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfXZhciBOZT1NZTtjb25zdCBJZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLHtaX05PX0ZMVVNIOiRlLFpfU1lOQ19GTFVTSDpQZSxaX0ZVTExfRkxVU0g6amUsWl9GSU5JU0g6S2UsWl9PSzpYZSxaX1NUUkVBTV9FTkQ6cWUsWl9ERUZBVUxUX0NPTVBSRVNTSU9OOkdlLFpfREVGQVVMVF9TVFJBVEVHWTpXZSxaX0RFRkxBVEVEOlllfT1wdDtmdW5jdGlvbiBWZSh0KXt0aGlzLm9wdGlvbnM9Q2UuYXNzaWduKHtsZXZlbDpHZSxtZXRob2Q6WWUsY2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MTUsbWVtTGV2ZWw6OCxzdHJhdGVneTpXZX0sdHx8e30pO2xldCBlPXRoaXMub3B0aW9ucztlLnJhdyYmZS53aW5kb3dCaXRzPjA/ZS53aW5kb3dCaXRzPS1lLndpbmRvd0JpdHM6ZS5nemlwJiZlLndpbmRvd0JpdHM+MCYmZS53aW5kb3dCaXRzPDE2JiYoZS53aW5kb3dCaXRzKz0xNiksdGhpcy5lcnI9MCx0aGlzLm1zZz0iIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcgTmUsdGhpcy5zdHJtLmF2YWlsX291dD0wO2xldCByPURlLmRlZmxhdGVJbml0Mih0aGlzLnN0cm0sZS5sZXZlbCxlLm1ldGhvZCxlLndpbmRvd0JpdHMsZS5tZW1MZXZlbCxlLnN0cmF0ZWd5KTtpZihyIT09WGUpdGhyb3cgbmV3IEVycm9yKF90W3JdKTtpZihlLmhlYWRlciYmRGUuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sZS5oZWFkZXIpLGUuZGljdGlvbmFyeSl7bGV0IHQ7aWYodD0ic3RyaW5nIj09dHlwZW9mIGUuZGljdGlvbmFyeT9aZS5zdHJpbmcyYnVmKGUuZGljdGlvbmFyeSk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PUllLmNhbGwoZS5kaWN0aW9uYXJ5KT9uZXcgVWludDhBcnJheShlLmRpY3Rpb25hcnkpOmUuZGljdGlvbmFyeSxyPURlLmRlZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSx0KSxyIT09WGUpdGhyb3cgbmV3IEVycm9yKF90W3JdKTt0aGlzLl9kaWN0X3NldD0hMH19ZnVuY3Rpb24gUWUodCxlKXtjb25zdCByPW5ldyBWZShlKTtpZihyLnB1c2godCwhMCksci5lcnIpdGhyb3cgci5tc2d8fF90W3IuZXJyXTtyZXR1cm4gci5yZXN1bHR9ZnVuY3Rpb24gSmUodCxlKXtyZXR1cm4oZT1lfHx7fSkucmF3PSEwLFFlKHQsZSl9ZnVuY3Rpb24gdHIodCxlKXtyZXR1cm4oZT1lfHx7fSkuZ3ppcD0hMCxRZSh0LGUpfVZlLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgcj10aGlzLnN0cm0sbj10aGlzLm9wdGlvbnMuY2h1bmtTaXplO2xldCBpLGE7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtmb3IoYT1lPT09fn5lP2U6ITA9PT1lP0tlOiRlLCJzdHJpbmciPT10eXBlb2YgdD9yLmlucHV0PVplLnN0cmluZzJidWYodCk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PUllLmNhbGwodCk/ci5pbnB1dD1uZXcgVWludDhBcnJheSh0KTpyLmlucHV0PXQsci5uZXh0X2luPTAsci5hdmFpbF9pbj1yLmlucHV0Lmxlbmd0aDs7KWlmKDA9PT1yLmF2YWlsX291dCYmKHIub3V0cHV0PW5ldyBVaW50OEFycmF5KG4pLHIubmV4dF9vdXQ9MCxyLmF2YWlsX291dD1uKSwoYT09PVBlfHxhPT09amUpJiZyLmF2YWlsX291dDw9Nil0aGlzLm9uRGF0YShyLm91dHB1dC5zdWJhcnJheSgwLHIubmV4dF9vdXQpKSxyLmF2YWlsX291dD0wO2Vsc2V7aWYoaT1EZS5kZWZsYXRlKHIsYSksaT09PXFlKXJldHVybiByLm5leHRfb3V0PjAmJnRoaXMub25EYXRhKHIub3V0cHV0LnN1YmFycmF5KDAsci5uZXh0X291dCkpLGk9RGUuZGVmbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQoaSksdGhpcy5lbmRlZD0hMCxpPT09WGU7aWYoMCE9PXIuYXZhaWxfb3V0KXtpZihhPjAmJnIubmV4dF9vdXQ+MCl0aGlzLm9uRGF0YShyLm91dHB1dC5zdWJhcnJheSgwLHIubmV4dF9vdXQpKSxyLmF2YWlsX291dD0wO2Vsc2UgaWYoMD09PXIuYXZhaWxfaW4pYnJlYWt9ZWxzZSB0aGlzLm9uRGF0YShyLm91dHB1dCl9cmV0dXJuITB9LFZlLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24odCl7dGhpcy5jaHVua3MucHVzaCh0KX0sVmUucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKHQpe3Q9PT1YZSYmKHRoaXMucmVzdWx0PUNlLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSx0aGlzLmNodW5rcz1bXSx0aGlzLmVycj10LHRoaXMubXNnPXRoaXMuc3RybS5tc2d9O3ZhciBlcj1WZSxycj1RZSxucj1KZSxpcj10cixhcj1wdCxvcj17RGVmbGF0ZTplcixkZWZsYXRlOnJyLGRlZmxhdGVSYXc6bnIsZ3ppcDppcixjb25zdGFudHM6YXJ9O3QuRGVmbGF0ZT1lcix0LmNvbnN0YW50cz1hcix0LmRlZmF1bHQ9b3IsdC5kZWZsYXRlPXJyLHQuZGVmbGF0ZVJhdz1ucix0Lmd6aXA9aXIsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSkoZS5leHBvcnRzKTt2YXIgcixuPXtleHBvcnRzOnt9fSxpPXtleHBvcnRzOnt9fTtpLmV4cG9ydHM9KHI9cnx8ZnVuY3Rpb24oZSxyKXt2YXIgbjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LmNyeXB0byYmKG49d2luZG93LmNyeXB0byksInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLmNyeXB0byYmKG49c2VsZi5jcnlwdG8pLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcy5jcnlwdG8mJihuPWdsb2JhbFRoaXMuY3J5cHRvKSwhbiYmInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5tc0NyeXB0byYmKG49d2luZG93Lm1zQ3J5cHRvKSwhbiYmdm9pZCAwIT09dCYmdC5jcnlwdG8mJihuPXQuY3J5cHRvKSwhbil0cnl7bj11bmRlZmluZWR9Y2F0Y2godCl7fXZhciBpPWZ1bmN0aW9uKCl7aWYobil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4uZ2V0UmFuZG9tVmFsdWVzKXRyeXtyZXR1cm4gbi5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQzMkFycmF5KDEpKVswXX1jYXRjaCh0KXt9aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4ucmFuZG9tQnl0ZXMpdHJ5e3JldHVybiBuLnJhbmRvbUJ5dGVzKDQpLnJlYWRJbnQzMkxFKCl9Y2F0Y2godCl7fX10aHJvdyBuZXcgRXJyb3IoIk5hdGl2ZSBjcnlwdG8gbW9kdWxlIGNvdWxkIG5vdCBiZSB1c2VkIHRvIGdldCBzZWN1cmUgcmFuZG9tIG51bWJlci4iKX0sYT1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByO3JldHVybiB0LnByb3RvdHlwZT1lLHI9bmV3IHQsdC5wcm90b3R5cGU9bnVsbCxyfX0oKSxvPXt9LHM9by5saWI9e30sbD1zLkJhc2U9e2V4dGVuZDpmdW5jdGlvbih0KXt2YXIgZT1hKHRoaXMpO3JldHVybiB0JiZlLm1peEluKHQpLGUuaGFzT3duUHJvcGVydHkoImluaXQiKSYmdGhpcy5pbml0IT09ZS5pbml0fHwoZS5pbml0PWZ1bmN0aW9uKCl7ZS4kc3VwZXIuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSxlLmluaXQucHJvdG90eXBlPWUsZS4kc3VwZXI9dGhpcyxlfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmV4dGVuZCgpO3JldHVybiB0LmluaXQuYXBwbHkodCxhcmd1bWVudHMpLHR9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJih0aGlzW2VdPXRbZV0pO3QuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPXQudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LGg9cy5Xb3JkQXJyYXk9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxlKXt0PXRoaXMud29yZHM9dHx8W10sdGhpcy5zaWdCeXRlcz1lIT1yP2U6NCp0Lmxlbmd0aH0sdG9TdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuKHR8fHUpLnN0cmluZ2lmeSh0aGlzKX0sY29uY2F0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMud29yZHMscj10LndvcmRzLG49dGhpcy5zaWdCeXRlcyxpPXQuc2lnQnl0ZXM7aWYodGhpcy5jbGFtcCgpLG4lNClmb3IodmFyIGE9MDthPGk7YSsrKXt2YXIgbz1yW2E+Pj4yXT4+PjI0LWElNCo4JjI1NTtlW24rYT4+PjJdfD1vPDwyNC0obithKSU0Kjh9ZWxzZSBmb3IodmFyIHM9MDtzPGk7cys9NCllW24rcz4+PjJdPXJbcz4+PjJdO3JldHVybiB0aGlzLnNpZ0J5dGVzKz1pLHRoaXN9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy53b3JkcyxyPXRoaXMuc2lnQnl0ZXM7dFtyPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLXIlNCo4LHQubGVuZ3RoPWUuY2VpbChyLzQpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWwuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLHR9LHJhbmRvbTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10scj0wO3I8dDtyKz00KWUucHVzaChpKCkpO3JldHVybiBuZXcgaC5pbml0KGUsdCl9fSksYz1vLmVuYz17fSx1PWMuSGV4PXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49W10saT0wO2k8cjtpKyspe3ZhciBhPWVbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O24ucHVzaCgoYT4+PjQpLnRvU3RyaW5nKDE2KSksbi5wdXNoKCgxNSZhKS50b1N0cmluZygxNikpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgscj1bXSxuPTA7bjxlO24rPTIpcltuPj4+M118PXBhcnNlSW50KHQuc3Vic3RyKG4sMiksMTYpPDwyNC1uJTgqNDtyZXR1cm4gbmV3IGguaW5pdChyLGUvMil9fSxkPWMuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49W10saT0wO2k8cjtpKyspe3ZhciBhPWVbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O24ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKX1yZXR1cm4gbi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLHI9W10sbj0wO248ZTtuKyspcltuPj4+Ml18PSgyNTUmdC5jaGFyQ29kZUF0KG4pKTw8MjQtbiU0Kjg7cmV0dXJuIG5ldyBoLmluaXQocixlKX19LGY9Yy5VdGY4PXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGQuc3RyaW5naWZ5KHQpKSl9Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKCJNYWxmb3JtZWQgVVRGLTggZGF0YSIpfX0scGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIGQucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHQpKSl9fSxfPXMuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1sLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBoLmluaXQsdGhpcy5fbkRhdGFCeXRlcz0wfSxfYXBwZW5kOmZ1bmN0aW9uKHQpeyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9Zi5wYXJzZSh0KSksdGhpcy5fZGF0YS5jb25jYXQodCksdGhpcy5fbkRhdGFCeXRlcys9dC5zaWdCeXRlc30sX3Byb2Nlc3M6ZnVuY3Rpb24odCl7dmFyIHIsbj10aGlzLl9kYXRhLGk9bi53b3JkcyxhPW4uc2lnQnl0ZXMsbz10aGlzLmJsb2NrU2l6ZSxzPWEvKDQqbyksbD0ocz10P2UuY2VpbChzKTplLm1heCgoMHxzKS10aGlzLl9taW5CdWZmZXJTaXplLDApKSpvLGM9ZS5taW4oNCpsLGEpO2lmKGwpe2Zvcih2YXIgdT0wO3U8bDt1Kz1vKXRoaXMuX2RvUHJvY2Vzc0Jsb2NrKGksdSk7cj1pLnNwbGljZSgwLGwpLG4uc2lnQnl0ZXMtPWN9cmV0dXJuIG5ldyBoLmluaXQocixjKX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1sLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpLHR9LF9taW5CdWZmZXJTaXplOjB9KTtzLkhhc2hlcj1fLmV4dGVuZCh7Y2ZnOmwuZXh0ZW5kKCksaW5pdDpmdW5jdGlvbih0KXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQodCksdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe18ucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYXBwZW5kKHQpLHRoaXMuX3Byb2Nlc3MoKSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdGhpcy5fYXBwZW5kKHQpLHRoaXMuX2RvRmluYWxpemUoKX0sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUscil7cmV0dXJuIG5ldyB0LmluaXQocikuZmluYWxpemUoZSl9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IHAuSE1BQy5pbml0KHQscikuZmluYWxpemUoZSl9fX0pO3ZhciBwPW8uYWxnbz17fTtyZXR1cm4gb30oTWF0aCksciksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLldvcmRBcnJheTtmdW5jdGlvbiBuKHQsZSxuKXtmb3IodmFyIGk9W10sYT0wLG89MDtvPGU7bysrKWlmKG8lNCl7dmFyIHM9blt0LmNoYXJDb2RlQXQoby0xKV08PG8lNCoyfG5bdC5jaGFyQ29kZUF0KG8pXT4+PjYtbyU0KjI7aVthPj4+Ml18PXM8PDI0LWElNCo4LGErK31yZXR1cm4gci5jcmVhdGUoaSxhKX1lLmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt2YXIgZT10LndvcmRzLHI9dC5zaWdCeXRlcyxuPXRoaXMuX21hcDt0LmNsYW1wKCk7Zm9yKHZhciBpPVtdLGE9MDthPHI7YSs9Mylmb3IodmFyIG89KGVbYT4+PjJdPj4+MjQtYSU0KjgmMjU1KTw8MTZ8KGVbYSsxPj4+Ml0+Pj4yNC0oYSsxKSU0KjgmMjU1KTw8OHxlW2ErMj4+PjJdPj4+MjQtKGErMiklNCo4JjI1NSxzPTA7czw0JiZhKy43NSpzPHI7cysrKWkucHVzaChuLmNoYXJBdChvPj4+NiooMy1zKSY2MykpO3ZhciBsPW4uY2hhckF0KDY0KTtpZihsKWZvcig7aS5sZW5ndGglNDspaS5wdXNoKGwpO3JldHVybiBpLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aCxyPXRoaXMuX21hcCxpPXRoaXMuX3JldmVyc2VNYXA7aWYoIWkpe2k9dGhpcy5fcmV2ZXJzZU1hcD1bXTtmb3IodmFyIGE9MDthPHIubGVuZ3RoO2ErKylpW3IuY2hhckNvZGVBdChhKV09YX12YXIgbz1yLmNoYXJBdCg2NCk7aWYobyl7dmFyIHM9dC5pbmRleE9mKG8pOy0xIT09cyYmKGU9cyl9cmV0dXJuIG4odCxlLGkpfSxfbWFwOiJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSJ9fSgpLHQuZW5jLkJhc2U2NH0oaS5leHBvcnRzKX0obik7dmFyIGE9bi5leHBvcnRzLG89e2V4cG9ydHM6e319LHM9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dCxuPXIubGliLGk9bi5Xb3JkQXJyYXksYT1uLkhhc2hlcixvPXIuYWxnbyxzPVtdOyFmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8NjQ7dCsrKXNbdF09NDI5NDk2NzI5NiplLmFicyhlLnNpbih0KzEpKXwwfSgpO3ZhciBsPW8uTUQ1PWEuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGkuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4XSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0wO3I8MTY7cisrKXt2YXIgbj1lK3IsaT10W25dO3Rbbl09MTY3MTE5MzUmKGk8PDh8aT4+PjI0KXw0Mjc4MjU1MzYwJihpPDwyNHxpPj4+OCl9dmFyIGE9dGhpcy5faGFzaC53b3JkcyxvPXRbZSswXSxsPXRbZSsxXSxmPXRbZSsyXSxfPXRbZSszXSxwPXRbZSs0XSxnPXRbZSs1XSx5PXRbZSs2XSx2PXRbZSs3XSx3PXRbZSs4XSxtPXRbZSs5XSxiPXRbZSsxMF0seD10W2UrMTFdLGs9dFtlKzEyXSx6PXRbZSsxM10sQT10W2UrMTRdLEU9dFtlKzE1XSxTPWFbMF0sQj1hWzFdLEw9YVsyXSxSPWFbM107Uz1oKFMsQixMLFIsbyw3LHNbMF0pLFI9aChSLFMsQixMLGwsMTIsc1sxXSksTD1oKEwsUixTLEIsZiwxNyxzWzJdKSxCPWgoQixMLFIsUyxfLDIyLHNbM10pLFM9aChTLEIsTCxSLHAsNyxzWzRdKSxSPWgoUixTLEIsTCxnLDEyLHNbNV0pLEw9aChMLFIsUyxCLHksMTcsc1s2XSksQj1oKEIsTCxSLFMsdiwyMixzWzddKSxTPWgoUyxCLEwsUix3LDcsc1s4XSksUj1oKFIsUyxCLEwsbSwxMixzWzldKSxMPWgoTCxSLFMsQixiLDE3LHNbMTBdKSxCPWgoQixMLFIsUyx4LDIyLHNbMTFdKSxTPWgoUyxCLEwsUixrLDcsc1sxMl0pLFI9aChSLFMsQixMLHosMTIsc1sxM10pLEw9aChMLFIsUyxCLEEsMTcsc1sxNF0pLFM9YyhTLEI9aChCLEwsUixTLEUsMjIsc1sxNV0pLEwsUixsLDUsc1sxNl0pLFI9YyhSLFMsQixMLHksOSxzWzE3XSksTD1jKEwsUixTLEIseCwxNCxzWzE4XSksQj1jKEIsTCxSLFMsbywyMCxzWzE5XSksUz1jKFMsQixMLFIsZyw1LHNbMjBdKSxSPWMoUixTLEIsTCxiLDksc1syMV0pLEw9YyhMLFIsUyxCLEUsMTQsc1syMl0pLEI9YyhCLEwsUixTLHAsMjAsc1syM10pLFM9YyhTLEIsTCxSLG0sNSxzWzI0XSksUj1jKFIsUyxCLEwsQSw5LHNbMjVdKSxMPWMoTCxSLFMsQixfLDE0LHNbMjZdKSxCPWMoQixMLFIsUyx3LDIwLHNbMjddKSxTPWMoUyxCLEwsUix6LDUsc1syOF0pLFI9YyhSLFMsQixMLGYsOSxzWzI5XSksTD1jKEwsUixTLEIsdiwxNCxzWzMwXSksUz11KFMsQj1jKEIsTCxSLFMsaywyMCxzWzMxXSksTCxSLGcsNCxzWzMyXSksUj11KFIsUyxCLEwsdywxMSxzWzMzXSksTD11KEwsUixTLEIseCwxNixzWzM0XSksQj11KEIsTCxSLFMsQSwyMyxzWzM1XSksUz11KFMsQixMLFIsbCw0LHNbMzZdKSxSPXUoUixTLEIsTCxwLDExLHNbMzddKSxMPXUoTCxSLFMsQix2LDE2LHNbMzhdKSxCPXUoQixMLFIsUyxiLDIzLHNbMzldKSxTPXUoUyxCLEwsUix6LDQsc1s0MF0pLFI9dShSLFMsQixMLG8sMTEsc1s0MV0pLEw9dShMLFIsUyxCLF8sMTYsc1s0Ml0pLEI9dShCLEwsUixTLHksMjMsc1s0M10pLFM9dShTLEIsTCxSLG0sNCxzWzQ0XSksUj11KFIsUyxCLEwsaywxMSxzWzQ1XSksTD11KEwsUixTLEIsRSwxNixzWzQ2XSksUz1kKFMsQj11KEIsTCxSLFMsZiwyMyxzWzQ3XSksTCxSLG8sNixzWzQ4XSksUj1kKFIsUyxCLEwsdiwxMCxzWzQ5XSksTD1kKEwsUixTLEIsQSwxNSxzWzUwXSksQj1kKEIsTCxSLFMsZywyMSxzWzUxXSksUz1kKFMsQixMLFIsayw2LHNbNTJdKSxSPWQoUixTLEIsTCxfLDEwLHNbNTNdKSxMPWQoTCxSLFMsQixiLDE1LHNbNTRdKSxCPWQoQixMLFIsUyxsLDIxLHNbNTVdKSxTPWQoUyxCLEwsUix3LDYsc1s1Nl0pLFI9ZChSLFMsQixMLEUsMTAsc1s1N10pLEw9ZChMLFIsUyxCLHksMTUsc1s1OF0pLEI9ZChCLEwsUixTLHosMjEsc1s1OV0pLFM9ZChTLEIsTCxSLHAsNixzWzYwXSksUj1kKFIsUyxCLEwseCwxMCxzWzYxXSksTD1kKEwsUixTLEIsZiwxNSxzWzYyXSksQj1kKEIsTCxSLFMsbSwyMSxzWzYzXSksYVswXT1hWzBdK1N8MCxhWzFdPWFbMV0rQnwwLGFbMl09YVsyXStMfDAsYVszXT1hWzNdK1J8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLHI9dC53b3JkcyxuPTgqdGhpcy5fbkRhdGFCeXRlcyxpPTgqdC5zaWdCeXRlcztyW2k+Pj41XXw9MTI4PDwyNC1pJTMyO3ZhciBhPWUuZmxvb3Iobi80Mjk0OTY3Mjk2KSxvPW47clsxNSsoaSs2ND4+Pjk8PDQpXT0xNjcxMTkzNSYoYTw8OHxhPj4+MjQpfDQyNzgyNTUzNjAmKGE8PDI0fGE+Pj44KSxyWzE0KyhpKzY0Pj4+OTw8NCldPTE2NzExOTM1JihvPDw4fG8+Pj4yNCl8NDI3ODI1NTM2MCYobzw8MjR8bz4+PjgpLHQuc2lnQnl0ZXM9NCooci5sZW5ndGgrMSksdGhpcy5fcHJvY2VzcygpO2Zvcih2YXIgcz10aGlzLl9oYXNoLGw9cy53b3JkcyxoPTA7aDw0O2grKyl7dmFyIGM9bFtoXTtsW2hdPTE2NzExOTM1JihjPDw4fGM+Pj4yNCl8NDI3ODI1NTM2MCYoYzw8MjR8Yz4+PjgpfXJldHVybiBzfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWEuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksdH19KTtmdW5jdGlvbiBoKHQsZSxyLG4saSxhLG8pe3ZhciBzPXQrKGUmcnx+ZSZuKStpK287cmV0dXJuKHM8PGF8cz4+PjMyLWEpK2V9ZnVuY3Rpb24gYyh0LGUscixuLGksYSxvKXt2YXIgcz10KyhlJm58ciZ+bikraStvO3JldHVybihzPDxhfHM+Pj4zMi1hKStlfWZ1bmN0aW9uIHUodCxlLHIsbixpLGEsbyl7dmFyIHM9dCsoZV5yXm4pK2krbztyZXR1cm4oczw8YXxzPj4+MzItYSkrZX1mdW5jdGlvbiBkKHQsZSxyLG4saSxhLG8pe3ZhciBzPXQrKHJeKGV8fm4pKStpK287cmV0dXJuKHM8PGF8cz4+PjMyLWEpK2V9ci5NRDU9YS5fY3JlYXRlSGVscGVyKGwpLHIuSG1hY01ENT1hLl9jcmVhdGVIbWFjSGVscGVyKGwpfShNYXRoKSx0Lk1ENX0oaS5leHBvcnRzKX0ocyk7dmFyIGw9e2V4cG9ydHM6e319LGg9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIsbj1yLldvcmRBcnJheSxpPXIuSGFzaGVyLGE9ZS5hbGdvLG89W10scz1hLlNIQTE9aS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgbi5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy5faGFzaC53b3JkcyxuPXJbMF0saT1yWzFdLGE9clsyXSxzPXJbM10sbD1yWzRdLGg9MDtoPDgwO2grKyl7aWYoaDwxNilvW2hdPTB8dFtlK2hdO2Vsc2V7dmFyIGM9b1toLTNdXm9baC04XV5vW2gtMTRdXm9baC0xNl07b1toXT1jPDwxfGM+Pj4zMX12YXIgdT0objw8NXxuPj4+MjcpK2wrb1toXTt1Kz1oPDIwPzE1MTg1MDAyNDkrKGkmYXx+aSZzKTpoPDQwPzE4NTk3NzUzOTMrKGleYV5zKTpoPDYwPyhpJmF8aSZzfGEmcyktMTg5NDAwNzU4ODooaV5hXnMpLTg5OTQ5NzUxNCxsPXMscz1hLGE9aTw8MzB8aT4+PjIsaT1uLG49dX1yWzBdPXJbMF0rbnwwLHJbMV09clsxXStpfDAsclsyXT1yWzJdK2F8MCxyWzNdPXJbM10rc3wwLHJbNF09cls0XStsfDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YSxlPXQud29yZHMscj04KnRoaXMuX25EYXRhQnl0ZXMsbj04KnQuc2lnQnl0ZXM7cmV0dXJuIGVbbj4+PjVdfD0xMjg8PDI0LW4lMzIsZVsxNCsobis2ND4+Pjk8PDQpXT1NYXRoLmZsb29yKHIvNDI5NDk2NzI5NiksZVsxNSsobis2ND4+Pjk8PDQpXT1yLHQuc2lnQnl0ZXM9NCplLmxlbmd0aCx0aGlzLl9wcm9jZXNzKCksdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1pLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLHR9fSk7ZS5TSEExPWkuX2NyZWF0ZUhlbHBlcihzKSxlLkhtYWNTSEExPWkuX2NyZWF0ZUhtYWNIZWxwZXIocyl9KCksdC5TSEExfShpLmV4cG9ydHMpfShoKTt2YXIgYz17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlLHIsbjtyPShlPXQpLmxpYi5CYXNlLG49ZS5lbmMuVXRmOCxlLmFsZ28uSE1BQz1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LGUpe3Q9dGhpcy5faGFzaGVyPW5ldyB0LmluaXQsInN0cmluZyI9PXR5cGVvZiBlJiYoZT1uLnBhcnNlKGUpKTt2YXIgcj10LmJsb2NrU2l6ZSxpPTQqcjtlLnNpZ0J5dGVzPmkmJihlPXQuZmluYWxpemUoZSkpLGUuY2xhbXAoKTtmb3IodmFyIGE9dGhpcy5fb0tleT1lLmNsb25lKCksbz10aGlzLl9pS2V5PWUuY2xvbmUoKSxzPWEud29yZHMsbD1vLndvcmRzLGg9MDtoPHI7aCsrKXNbaF1ePTE1NDk1NTY4MjgsbFtoXV49OTA5NTIyNDg2O2Euc2lnQnl0ZXM9by5zaWdCeXRlcz1pLHRoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9oYXNoZXI7dC5yZXNldCgpLHQudXBkYXRlKHRoaXMuX2lLZXkpfSx1cGRhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2hhc2hlci51cGRhdGUodCksdGhpc30sZmluYWxpemU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faGFzaGVyLHI9ZS5maW5hbGl6ZSh0KTtyZXR1cm4gZS5yZXNldCgpLGUuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChyKSl9fSl9KGkuZXhwb3J0cyl9KGMpLGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXQscj1lLmxpYixuPXIuQmFzZSxpPXIuV29yZEFycmF5LGE9ZS5hbGdvLG89YS5NRDUscz1hLkV2cEtERj1uLmV4dGVuZCh7Y2ZnOm4uZXh0ZW5kKHtrZXlTaXplOjQsaGFzaGVyOm8saXRlcmF0aW9uczoxfSksaW5pdDpmdW5jdGlvbih0KXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQodCl9LGNvbXB1dGU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbj10aGlzLmNmZyxhPW4uaGFzaGVyLmNyZWF0ZSgpLG89aS5jcmVhdGUoKSxzPW8ud29yZHMsbD1uLmtleVNpemUsaD1uLml0ZXJhdGlvbnM7cy5sZW5ndGg8bDspe3ImJmEudXBkYXRlKHIpLHI9YS51cGRhdGUodCkuZmluYWxpemUoZSksYS5yZXNldCgpO2Zvcih2YXIgYz0xO2M8aDtjKyspcj1hLmZpbmFsaXplKHIpLGEucmVzZXQoKTtvLmNvbmNhdChyKX1yZXR1cm4gby5zaWdCeXRlcz00Kmwsb319KTtlLkV2cEtERj1mdW5jdGlvbih0LGUscil7cmV0dXJuIHMuY3JlYXRlKHIpLmNvbXB1dGUodCxlKX19KCksdC5FdnBLREZ9KGkuZXhwb3J0cyl9KGwpO3ZhciB1PXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dC5saWIuQ2lwaGVyfHxmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsaT1uLkJhc2UsYT1uLldvcmRBcnJheSxvPW4uQnVmZmVyZWRCbG9ja0FsZ29yaXRobSxzPXIuZW5jO3MuVXRmODt2YXIgbD1zLkJhc2U2NCxoPXIuYWxnby5FdnBLREYsYz1uLkNpcGhlcj1vLmV4dGVuZCh7Y2ZnOmkuZXh0ZW5kKCksY3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLHQsZSl9LGNyZWF0ZURlY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9ERUNfWEZPUk1fTU9ERSx0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSxyKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQociksdGhpcy5feGZvcm1Nb2RlPXQsdGhpcy5fa2V5PWUsdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe28ucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHByb2Nlc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2FwcGVuZCh0KSx0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3c6eX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJue2VuY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmVuY3J5cHQoZSxyLG4saSl9LGRlY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmRlY3J5cHQoZSxyLG4saSl9fX19KCl9KTtuLlN0cmVhbUNpcGhlcj1jLmV4dGVuZCh7X2RvRmluYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvY2VzcyghMCl9LGJsb2NrU2l6ZToxfSk7dmFyIHU9ci5tb2RlPXt9LGQ9bi5CbG9ja0NpcGhlck1vZGU9aS5leHRlbmQoe2NyZWF0ZUVuY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLkVuY3J5cHRvci5jcmVhdGUodCxlKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuRGVjcnlwdG9yLmNyZWF0ZSh0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSl7dGhpcy5fY2lwaGVyPXQsdGhpcy5faXY9ZX19KSxmPXUuQ0JDPWZ1bmN0aW9uKCl7dmFyIHQ9ZC5leHRlbmQoKTtmdW5jdGlvbiByKHQscixuKXt2YXIgaSxhPXRoaXMuX2l2O2E/KGk9YSx0aGlzLl9pdj1lKTppPXRoaXMuX3ByZXZCbG9jaztmb3IodmFyIG89MDtvPG47bysrKXRbcitvXV49aVtvXX1yZXR1cm4gdC5FbmNyeXB0b3I9dC5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2NpcGhlcixpPW4uYmxvY2tTaXplO3IuY2FsbCh0aGlzLHQsZSxpKSxuLmVuY3J5cHRCbG9jayh0LGUpLHRoaXMuX3ByZXZCbG9jaz10LnNsaWNlKGUsZStpKX19KSx0LkRlY3J5cHRvcj10LmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fY2lwaGVyLGk9bi5ibG9ja1NpemUsYT10LnNsaWNlKGUsZStpKTtuLmRlY3J5cHRCbG9jayh0LGUpLHIuY2FsbCh0aGlzLHQsZSxpKSx0aGlzLl9wcmV2QmxvY2s9YX19KSx0fSgpLF89KHIucGFkPXt9KS5Qa2NzNz17cGFkOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTQqZSxuPXItdC5zaWdCeXRlcyVyLGk9bjw8MjR8bjw8MTZ8bjw8OHxuLG89W10scz0wO3M8bjtzKz00KW8ucHVzaChpKTt2YXIgbD1hLmNyZWF0ZShvLG4pO3QuY29uY2F0KGwpfSx1bnBhZDpmdW5jdGlvbih0KXt2YXIgZT0yNTUmdC53b3Jkc1t0LnNpZ0J5dGVzLTE+Pj4yXTt0LnNpZ0J5dGVzLT1lfX07bi5CbG9ja0NpcGhlcj1jLmV4dGVuZCh7Y2ZnOmMuY2ZnLmV4dGVuZCh7bW9kZTpmLHBhZGRpbmc6X30pLHJlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ7Yy5yZXNldC5jYWxsKHRoaXMpO3ZhciBlPXRoaXMuY2ZnLHI9ZS5pdixuPWUubW9kZTt0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFP3Q9bi5jcmVhdGVFbmNyeXB0b3I6KHQ9bi5jcmVhdGVEZWNyeXB0b3IsdGhpcy5fbWluQnVmZmVyU2l6ZT0xKSx0aGlzLl9tb2RlJiZ0aGlzLl9tb2RlLl9fY3JlYXRvcj09dD90aGlzLl9tb2RlLmluaXQodGhpcyxyJiZyLndvcmRzKToodGhpcy5fbW9kZT10LmNhbGwobix0aGlzLHImJnIud29yZHMpLHRoaXMuX21vZGUuX19jcmVhdG9yPXQpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXt0aGlzLl9tb2RlLnByb2Nlc3NCbG9jayh0LGUpfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5jZmcucGFkZGluZztyZXR1cm4gdGhpcy5feGZvcm1Nb2RlPT10aGlzLl9FTkNfWEZPUk1fTU9ERT8oZS5wYWQodGhpcy5fZGF0YSx0aGlzLmJsb2NrU2l6ZSksdD10aGlzLl9wcm9jZXNzKCEwKSk6KHQ9dGhpcy5fcHJvY2VzcyghMCksZS51bnBhZCh0KSksdH0sYmxvY2tTaXplOjR9KTt2YXIgcD1uLkNpcGhlclBhcmFtcz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt0aGlzLm1peEluKHQpfSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8dGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKX19KSxnPShyLmZvcm1hdD17fSkuT3BlblNTTD17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQuY2lwaGVydGV4dCxyPXQuc2FsdDtyZXR1cm4ocj9hLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KHIpLmNvbmNhdChlKTplKS50b1N0cmluZyhsKX0scGFyc2U6ZnVuY3Rpb24odCl7dmFyIGUscj1sLnBhcnNlKHQpLG49ci53b3JkcztyZXR1cm4gMTM5ODg5MzY4ND09blswXSYmMTcwMTA3NjgzMT09blsxXSYmKGU9YS5jcmVhdGUobi5zbGljZSgyLDQpKSxuLnNwbGljZSgwLDQpLHIuc2lnQnl0ZXMtPTE2KSxwLmNyZWF0ZSh7Y2lwaGVydGV4dDpyLHNhbHQ6ZX0pfX0seT1uLlNlcmlhbGl6YWJsZUNpcGhlcj1pLmV4dGVuZCh7Y2ZnOmkuZXh0ZW5kKHtmb3JtYXQ6Z30pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobik7dmFyIGk9dC5jcmVhdGVFbmNyeXB0b3IocixuKSxhPWkuZmluYWxpemUoZSksbz1pLmNmZztyZXR1cm4gcC5jcmVhdGUoe2NpcGhlcnRleHQ6YSxrZXk6cixpdjpvLml2LGFsZ29yaXRobTp0LG1vZGU6by5tb2RlLHBhZGRpbmc6by5wYWRkaW5nLGJsb2NrU2l6ZTp0LmJsb2NrU2l6ZSxmb3JtYXR0ZXI6bi5mb3JtYXR9KX0sZGVjcnlwdDpmdW5jdGlvbih0LGUscixuKXtyZXR1cm4gbj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KSx0LmNyZWF0ZURlY3J5cHRvcihyLG4pLmZpbmFsaXplKGUuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdD9lLnBhcnNlKHQsdGhpcyk6dH19KSx2PShyLmtkZj17fSkuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbih0LGUscixuKXtufHwobj1hLnJhbmRvbSg4KSk7dmFyIGk9aC5jcmVhdGUoe2tleVNpemU6ZStyfSkuY29tcHV0ZSh0LG4pLG89YS5jcmVhdGUoaS53b3Jkcy5zbGljZShlKSw0KnIpO3JldHVybiBpLnNpZ0J5dGVzPTQqZSxwLmNyZWF0ZSh7a2V5OmksaXY6byxzYWx0Om59KX19LHc9bi5QYXNzd29yZEJhc2VkQ2lwaGVyPXkuZXh0ZW5kKHtjZmc6eS5jZmcuZXh0ZW5kKHtrZGY6dn0pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9KG49dGhpcy5jZmcuZXh0ZW5kKG4pKS5rZGYuZXhlY3V0ZShyLHQua2V5U2l6ZSx0Lml2U2l6ZSk7bi5pdj1pLml2O3ZhciBhPXkuZW5jcnlwdC5jYWxsKHRoaXMsdCxlLGkua2V5LG4pO3JldHVybiBhLm1peEluKGkpLGF9LGRlY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KTt2YXIgaT1uLmtkZi5leGVjdXRlKHIsdC5rZXlTaXplLHQuaXZTaXplLGUuc2FsdCk7cmV0dXJuIG4uaXY9aS5pdix5LmRlY3J5cHQuY2FsbCh0aGlzLHQsZSxpLmtleSxuKX19KX0oKX0oaS5leHBvcnRzKX0odSksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLkJsb2NrQ2lwaGVyLG49ZS5hbGdvLGk9W10sYT1bXSxvPVtdLHM9W10sbD1bXSxoPVtdLGM9W10sdT1bXSxkPVtdLGY9W107IWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPDI1NjtlKyspdFtlXT1lPDEyOD9lPDwxOmU8PDFeMjgzO3ZhciByPTAsbj0wO2ZvcihlPTA7ZTwyNTY7ZSsrKXt2YXIgXz1uXm48PDFebjw8Ml5uPDwzXm48PDQ7Xz1fPj4+OF4yNTUmX145OSxpW3JdPV8sYVtfXT1yO3ZhciBwPXRbcl0sZz10W3BdLHk9dFtnXSx2PTI1Nyp0W19dXjE2ODQzMDA4Kl87b1tyXT12PDwyNHx2Pj4+OCxzW3JdPXY8PDE2fHY+Pj4xNixsW3JdPXY8PDh8dj4+PjI0LGhbcl09dix2PTE2ODQzMDA5KnleNjU1MzcqZ14yNTcqcF4xNjg0MzAwOCpyLGNbX109djw8MjR8dj4+PjgsdVtfXT12PDwxNnx2Pj4+MTYsZFtfXT12PDw4fHY+Pj4yNCxmW19dPXYscj8ocj1wXnRbdFt0W3lecF1dXSxuXj10W3Rbbl1dKTpyPW49MX19KCk7dmFyIF89WzAsMSwyLDQsOCwxNiwzMiw2NCwxMjgsMjcsNTRdLHA9bi5BRVM9ci5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX25Sb3VuZHN8fHRoaXMuX2tleVByaW9yUmVzZXQhPT10aGlzLl9rZXkpe2Zvcih2YXIgdD10aGlzLl9rZXlQcmlvclJlc2V0PXRoaXMuX2tleSxlPXQud29yZHMscj10LnNpZ0J5dGVzLzQsbj00KigodGhpcy5fblJvdW5kcz1yKzYpKzEpLGE9dGhpcy5fa2V5U2NoZWR1bGU9W10sbz0wO288bjtvKyspbzxyP2Fbb109ZVtvXTooaD1hW28tMV0sbyVyP3I+NiYmbyVyPT00JiYoaD1pW2g+Pj4yNF08PDI0fGlbaD4+PjE2JjI1NV08PDE2fGlbaD4+PjgmMjU1XTw8OHxpWzI1NSZoXSk6KGg9aVsoaD1oPDw4fGg+Pj4yNCk+Pj4yNF08PDI0fGlbaD4+PjE2JjI1NV08PDE2fGlbaD4+PjgmMjU1XTw8OHxpWzI1NSZoXSxoXj1fW28vcnwwXTw8MjQpLGFbb109YVtvLXJdXmgpO2Zvcih2YXIgcz10aGlzLl9pbnZLZXlTY2hlZHVsZT1bXSxsPTA7bDxuO2wrKyl7aWYobz1uLWwsbCU0KXZhciBoPWFbb107ZWxzZSBoPWFbby00XTtzW2xdPWw8NHx8bzw9ND9oOmNbaVtoPj4+MjRdXV51W2lbaD4+PjE2JjI1NV1dXmRbaVtoPj4+OCYyNTVdXV5mW2lbMjU1JmhdXX19fSxlbmNyeXB0QmxvY2s6ZnVuY3Rpb24odCxlKXt0aGlzLl9kb0NyeXB0QmxvY2sodCxlLHRoaXMuX2tleVNjaGVkdWxlLG8scyxsLGgsaSl9LGRlY3J5cHRCbG9jazpmdW5jdGlvbih0LGUpe3ZhciByPXRbZSsxXTt0W2UrMV09dFtlKzNdLHRbZSszXT1yLHRoaXMuX2RvQ3J5cHRCbG9jayh0LGUsdGhpcy5faW52S2V5U2NoZWR1bGUsYyx1LGQsZixhKSxyPXRbZSsxXSx0W2UrMV09dFtlKzNdLHRbZSszXT1yfSxfZG9DcnlwdEJsb2NrOmZ1bmN0aW9uKHQsZSxyLG4saSxhLG8scyl7Zm9yKHZhciBsPXRoaXMuX25Sb3VuZHMsaD10W2VdXnJbMF0sYz10W2UrMV1eclsxXSx1PXRbZSsyXV5yWzJdLGQ9dFtlKzNdXnJbM10sZj00LF89MTtfPGw7XysrKXt2YXIgcD1uW2g+Pj4yNF1eaVtjPj4+MTYmMjU1XV5hW3U+Pj44JjI1NV1eb1syNTUmZF1ecltmKytdLGc9bltjPj4+MjRdXmlbdT4+PjE2JjI1NV1eYVtkPj4+OCYyNTVdXm9bMjU1JmhdXnJbZisrXSx5PW5bdT4+PjI0XV5pW2Q+Pj4xNiYyNTVdXmFbaD4+PjgmMjU1XV5vWzI1NSZjXV5yW2YrK10sdj1uW2Q+Pj4yNF1eaVtoPj4+MTYmMjU1XV5hW2M+Pj44JjI1NV1eb1syNTUmdV1ecltmKytdO2g9cCxjPWcsdT15LGQ9dn1wPShzW2g+Pj4yNF08PDI0fHNbYz4+PjE2JjI1NV08PDE2fHNbdT4+PjgmMjU1XTw8OHxzWzI1NSZkXSlecltmKytdLGc9KHNbYz4+PjI0XTw8MjR8c1t1Pj4+MTYmMjU1XTw8MTZ8c1tkPj4+OCYyNTVdPDw4fHNbMjU1JmhdKV5yW2YrK10seT0oc1t1Pj4+MjRdPDwyNHxzW2Q+Pj4xNiYyNTVdPDwxNnxzW2g+Pj44JjI1NV08PDh8c1syNTUmY10pXnJbZisrXSx2PShzW2Q+Pj4yNF08PDI0fHNbaD4+PjE2JjI1NV08PDE2fHNbYz4+PjgmMjU1XTw8OHxzWzI1NSZ1XSlecltmKytdLHRbZV09cCx0W2UrMV09Zyx0W2UrMl09eSx0W2UrM109dn0sa2V5U2l6ZTo4fSk7ZS5BRVM9ci5fY3JlYXRlSGVscGVyKHApfSgpLHQuQUVTfShpLmV4cG9ydHMpfShvKTt2YXIgZD1vLmV4cG9ydHMsZj17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsaT1uLldvcmRBcnJheSxhPW4uSGFzaGVyLG89ci5hbGdvLHM9W10sbD1bXTshZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe2Zvcih2YXIgcj1lLnNxcnQodCksbj0yO248PXI7bisrKWlmKCEodCVuKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiByKHQpe3JldHVybiA0Mjk0OTY3Mjk2Kih0LSgwfHQpKXwwfWZvcih2YXIgbj0yLGk9MDtpPDY0Oyl0KG4pJiYoaTw4JiYoc1tpXT1yKGUucG93KG4sLjUpKSksbFtpXT1yKGUucG93KG4sMS8zKSksaSsrKSxuKyt9KCk7dmFyIGg9W10sYz1vLlNIQTI1Nj1hLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBpLmluaXQocy5zbGljZSgwKSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj10aGlzLl9oYXNoLndvcmRzLG49clswXSxpPXJbMV0sYT1yWzJdLG89clszXSxzPXJbNF0sYz1yWzVdLHU9cls2XSxkPXJbN10sZj0wO2Y8NjQ7ZisrKXtpZihmPDE2KWhbZl09MHx0W2UrZl07ZWxzZXt2YXIgXz1oW2YtMTVdLHA9KF88PDI1fF8+Pj43KV4oXzw8MTR8Xz4+PjE4KV5fPj4+MyxnPWhbZi0yXSx5PShnPDwxNXxnPj4+MTcpXihnPDwxM3xnPj4+MTkpXmc+Pj4xMDtoW2ZdPXAraFtmLTddK3kraFtmLTE2XX12YXIgdj1uJmlebiZhXmkmYSx3PShuPDwzMHxuPj4+MileKG48PDE5fG4+Pj4xMyleKG48PDEwfG4+Pj4yMiksbT1kKygoczw8MjZ8cz4+PjYpXihzPDwyMXxzPj4+MTEpXihzPDw3fHM+Pj4yNSkpKyhzJmNefnMmdSkrbFtmXStoW2ZdO2Q9dSx1PWMsYz1zLHM9byttfDAsbz1hLGE9aSxpPW4sbj1tKyh3K3YpfDB9clswXT1yWzBdK258MCxyWzFdPXJbMV0raXwwLHJbMl09clsyXSthfDAsclszXT1yWzNdK298MCxyWzRdPXJbNF0rc3wwLHJbNV09cls1XStjfDAscls2XT1yWzZdK3V8MCxyWzddPXJbN10rZHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEscj10LndvcmRzLG49OCp0aGlzLl9uRGF0YUJ5dGVzLGk9OCp0LnNpZ0J5dGVzO3JldHVybiByW2k+Pj41XXw9MTI4PDwyNC1pJTMyLHJbMTQrKGkrNjQ+Pj45PDw0KV09ZS5mbG9vcihuLzQyOTQ5NjcyOTYpLHJbMTUrKGkrNjQ+Pj45PDw0KV09bix0LnNpZ0J5dGVzPTQqci5sZW5ndGgsdGhpcy5fcHJvY2VzcygpLHRoaXMuX2hhc2h9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9YS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pO3IuU0hBMjU2PWEuX2NyZWF0ZUhlbHBlcihjKSxyLkhtYWNTSEEyNTY9YS5fY3JlYXRlSG1hY0hlbHBlcihjKX0oTWF0aCksdC5TSEEyNTZ9KGkuZXhwb3J0cyl9KGYpO3ZhciBfPWYuZXhwb3J0cyxwPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIEFycmF5QnVmZmVyKXt2YXIgZT10LmxpYi5Xb3JkQXJyYXkscj1lLmluaXQsbj1lLmluaXQ9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyJiYodD1uZXcgVWludDhBcnJheSh0KSksKHQgaW5zdGFuY2VvZiBJbnQ4QXJyYXl8fCJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXkmJnQgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheXx8dCBpbnN0YW5jZW9mIEludDE2QXJyYXl8fHQgaW5zdGFuY2VvZiBVaW50MTZBcnJheXx8dCBpbnN0YW5jZW9mIEludDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBVaW50MzJBcnJheXx8dCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheXx8dCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkmJih0PW5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCx0LmJ5dGVMZW5ndGgpKSx0IGluc3RhbmNlb2YgVWludDhBcnJheSl7Zm9yKHZhciBlPXQuYnl0ZUxlbmd0aCxuPVtdLGk9MDtpPGU7aSsrKW5baT4+PjJdfD10W2ldPDwyNC1pJTQqODtyLmNhbGwodGhpcyxuLGUpfWVsc2Ugci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O24ucHJvdG90eXBlPWV9fSgpLHQubGliLldvcmRBcnJheX0oaS5leHBvcnRzKX0ocCk7dmFyIGc9cC5leHBvcnRzLHk9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdC5IbWFjU0hBMjU2fShpLmV4cG9ydHMpfSh5KTt2YXIgdj15LmV4cG9ydHM7Y29uc3Qgdz0hMTtsZXQgbSxiO29ubWVzc2FnZT1mdW5jdGlvbih0KXtjb25zdHtqb2I6cixjbWQ6bixzZXJ2ZXI6aSxwYXRoOm8sYnVmZmVyOnMsa2V5QmFzZTY0OmwsZ3ppcDpoLHJlZmVycmVyOmMsaWQ6dSxhcHBJZDpmLHBlcnNpc3RlbnRJZDpwLENST1FVRVRfVkVSU0lPTjp5LGRlYnVnOmssd2hhdDp6LG9mZmxpbmU6QX09dC5kYXRhO0EmJihtPUQpO3N3aXRjaChuKXtjYXNlInVwbG9hZEVuY3J5cHRlZCI6UihvKTticmVhaztjYXNlImdldE9mZmxpbmVGaWxlIjpPKHQuZGF0YS51cmwpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5rbm93biB3b3JrZXIgY29tbWFuZCIsbil9ZnVuY3Rpb24gRSh0KXtjb25zdCBlPURhdGUubm93KCkscj1nLmNyZWF0ZSh0KSxuPWEucGFyc2UobCksaT12KHIsbiksbz1nLnJhbmRvbSgxNikse2NpcGhlcnRleHQ6c309ZC5lbmNyeXB0KHIsbix7aXY6b30pLGg9bmV3IEFycmF5QnVmZmVyKDQrby5zaWdCeXRlcytpLnNpZ0J5dGVzK3Muc2lnQnl0ZXMpLGM9bmV3IERhdGFWaWV3KGgpO2xldCBmPTA7Yy5zZXRVaW50MzIoZiwxMTI5NDY4MjA5LCExKSxmKz00O2Zvcihjb25zdCB0IG9mW28saSxzXSlmb3IoY29uc3QgZSBvZiB0LndvcmRzKWMuc2V0SW50MzIoZixlLCExKSxmKz00O3JldHVybiBrJiZjb25zb2xlLmxvZyhgJHt1fSAke3p9IGVuY3J5cHRlZCAoJHtoLmJ5dGVMZW5ndGh9IGJ5dGVzKSBpbiAke0RhdGUubm93KCktZX1tc2ApLGh9ZnVuY3Rpb24gUyh0KXtjb25zdCByPURhdGUubm93KCksbj1lLmV4cG9ydHMuZGVmbGF0ZSh0LHtnemlwOiEwLGxldmVsOjF9KTtyZXR1cm4gayYmY29uc29sZS5sb2coYCR7dX0gJHt6fSBjb21wcmVzc2VkICgke24ubGVuZ3RofSBieXRlcykgaW4gJHtEYXRlLm5vdygpLXJ9bXNgKSxufWZ1bmN0aW9uIEIodCl7Y29uc3QgZT1EYXRlLm5vdygpLHI9XyhnLmNyZWF0ZSh0KSksbj1hLnN0cmluZ2lmeShyKS5yZXBsYWNlKC89L2csIiIpLnJlcGxhY2UoL1wrL2csIi0iKS5yZXBsYWNlKC9cLy9nLCJfIik7cmV0dXJuIGsmJmNvbnNvbGUubG9nKGAke3V9ICR7en0gaGFzaGVkICgke3QubGVuZ3RofSBieXRlcykgaW4gJHtEYXRlLm5vdygpLWV9bXNgKSxufWFzeW5jIGZ1bmN0aW9uIEwodCl7aWYoQSl7Y29uc3QgZT1gb2ZmbGluZTovLy8ke3R9YDtyZXR1cm57dXJsOmUsdXBsb2FkVXJsOmV9fWNvbnN0IGU9RGF0ZS5ub3coKSxyPWAke2kudXJsfS8ke3R9YDtpZighaS5hcGlLZXkpcmV0dXJue3VybDpyLHVwbG9hZFVybDpyfTtjb25zdCBuPWF3YWl0IG0ocix7aGVhZGVyczp7IlgtQ3JvcXVldC1BdXRoIjppLmFwaUtleSwiWC1Dcm9xdWV0LUFwcCI6ZiwiWC1Dcm9xdWV0LUlkIjpwLCJYLUNyb3F1ZXQtU2Vzc2lvbiI6dSwiWC1Dcm9xdWV0LVZlcnNpb24iOnksIlgtQ3JvcXVldC1QYXRoIjpuZXcgVVJMKGMpLnBhdGhuYW1lfSxyZWZlcnJlcjpjfSkse29rOmEsc3RhdHVzOm8sc3RhdHVzVGV4dDpzfT1uO2lmKCFhKXRocm93IEVycm9yKGBFcnJvciBpbiBzaWduaW5nIFVSTDogJHtvfSAtICR7c31gKTtjb25zdHtlcnJvcjpsLHJlYWQ6aCx3cml0ZTpkfT1hd2FpdCBuLmpzb24oKTtpZihsKXRocm93IEVycm9yKGwpO3JldHVybiBrJiZjb25zb2xlLmxvZyhgJHt1fSAke3p9IGF1dGhvcml6ZWQgaW4gJHtEYXRlLm5vdygpLWV9bXNgKSx7dXJsOmgsdXBsb2FkVXJsOmR9fWFzeW5jIGZ1bmN0aW9uIFIodCl7dHJ5e2xldCBlPUUoaD9TKHMpOnMpO3csdC5pbmNsdWRlcygiJUhBU0glIikmJih0PXQucmVwbGFjZSgiJUhBU0glIixCKGUpKSk7Y29uc3R7dXBsb2FkVXJsOm4sdXJsOml9PWF3YWl0IEwodCksYT1EYXRlLm5vdygpLHtvazpvLHN0YXR1czpsLHN0YXR1c1RleHQ6ZH09YXdhaXQgbShuLHttZXRob2Q6IlBVVCIsbW9kZToiY29ycyIsaGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIsIlgtQ3JvcXVldC1BcHAiOmYsIlgtQ3JvcXVldC1JZCI6cCwiWC1Dcm9xdWV0LVNlc3Npb24iOnUsIlgtQ3JvcXVldC1WZXJzaW9uIjp5fSxyZWZlcnJlcjpjLGJvZHk6ZX0pO2lmKCFvKXRocm93IEVycm9yKGBzZXJ2ZXIgcmV0dXJuZWQgJHtsfSAke2R9IGZvciBQVVQgJHtufWApO2smJmNvbnNvbGUubG9nKGAke3V9ICR7en0gdXBsb2FkZWQgKCR7bH0pIGluICR7RGF0ZS5ub3coKS1hfW1zICR7aX1gKSxiKHtqb2I6cix1cmw6aSxvazpvLHN0YXR1czpsLHN0YXR1c1RleHQ6ZCxieXRlczplLmJ5dGVMZW5ndGh9KX1jYXRjaCh0KXtrJiZjb25zb2xlLmVycm9yKGAke3V9IHVwbG9hZCBlcnJvciAke3QubWVzc2FnZX1gKSxiKHtqb2I6cixvazohMSxzdGF0dXM6LTEsc3RhdHVzVGV4dDp0Lm1lc3NhZ2V9KX19ZnVuY3Rpb24gRCh0LGUpe3JldHVybiBrJiZjb25zb2xlLmxvZyhgJHt1fSBzdG9yaW5nICR7dH1gKSx4LnNldCh0LGUuYm9keSkse29rOiEwLHN0YXR1czoyMDEsc3RhdHVzVGV4dDoiT2ZmbGluZSBjcmVhdGVkIn19ZnVuY3Rpb24gTyh0KXtjb25zdCBlPXguZ2V0KHQpO2lmKCFlKXJldHVybiBrJiZjb25zb2xlLmVycm9yKGAke3V9IGZpbGUgbm90IGZvdW5kICR7dH1gKSx2b2lkIGIoe2pvYjpyLG9rOiExLHN0YXR1czotMSxzdGF0dXNUZXh0OiJPZmZsaW5lIGZpbGUgbm90IGZvdW5kIn0pO2smJmNvbnNvbGUubG9nKGAke3V9IHJldHJpZXZlZCAke3R9YCksYih7am9iOnIsb2s6ITAsc3RhdHVzOjIwMCxzdGF0dXNUZXh0OiJPZmZsaW5lIGZpbGUgZm91bmQiLGJvZHk6ZSxieXRlczplLmJ5dGVMZW5ndGh9KX19LG09ZmV0Y2gsYj1wb3N0TWVzc2FnZTtjb25zdCB4PW5ldyBNYXB9KCk7Cgo=",null,false),new Worker(il,a)});const rl=R.CROQUET_VERSION,al="node"===R.CROQUET_PLATFORM;al||window.location.hostname.match(/co?de?pe?n\.io/)?console.log("Croquet "+rl):console.log("%cCroquet%c %c"+rl,"color:#F0493E","color:inherit","color:"+(rl.includes("+")?"#909":"inherit"));const fl=!al&&!!window.location.hostname.match(/^(.*\.)?croquet\.io$/i)&&window.location.pathname.startsWith("/dev/"),Gl=!al&&!!window.location.hostname.match(/^(.*\.)?croquet\.dev$/i);let xl=null;function Ra(a){var Y;const K=a.lastIndexOf(":"),P=-1===K?a:a.slice(K+1),R=-1===K?"":a.slice(0,K);let v=I.backend||R;const H=null===(Y=I.reflector)||void 0===Y?void 0:Y.includes("/");if("none"===v||H||xl.offline)return{apiKey:P,signServer:"none",reflector:"overridden"};if(!v&&!al)switch(window.location.hostname){case"croquet.dev":v="dev";break;case"staging.croquet.io":v="staging"}let M;switch(v){case"":case"prod":M="croquet.io";break;case"staging":M="staging.croquet.io";break;case"dev":M="croquet.dev";break;default:M=`${v}.croquet.dev`}return{apiKey:P,signServer:`https://api.${M}/sign`,reflector:`wss://api.${M}/reflector/v1`}}const Wl=I.nocheat,Sl=[0];let gl;const Tl=new ll;Tl.onerror=a=>console.error(`UploadWorker error: ${a.message}`);let Yl=0;const Hl=new Set;function Na(a){for(const Y of Hl)if(Y.id===a){const{appId:a,persistentId:K}=Y.sessionSpec;return{appId:a,persistentId:K,uploadEncrypted:a=>Y.uploadEncrypted(a),downloadEncrypted:a=>Y.downloadEncrypted(a)}}return{}}class Fa{constructor(){!function(){const a=I.dev||!1!==I.dev&&"localhost",Y=I.dev||!1!==I.dev&&(fl||Gl);xl={messages:I.has("debug","messages",!1),sends:I.has("debug","sends",!1),ticks:I.has("debug","ticks",!1),pong:I.has("debug","pong",!1),snapshot:I.has("debug","snapshot",!1),session:I.has("debug","session",!1),initsnapshot:I.has("debug","initsnapshot",a),reflector:I.has("debug","reflector",Y),offline:I.has("debug","offline",I.offline)},xl.offline&&ce.showMessage("Croquet: offline mode enabled, no multiuser",{level:"warning"})}(),this.reset()}reset(){globalThis.CROQUETVM===this.vm&&delete globalThis.CROQUETVM,this.vm=null,this.session=null,this.connection=this.connection||new _a(this),this.networkQueue=[],this.reflectorTime=0,this.msPerTick=this.msPerTick||0,this.tickMultiplier=this.tickMultiplier||1,this.extrapolatedTimeBase=Date.now(),this.key=this.key||null,this.tove=this.tove||null,this.viewId=this.viewId||Math.floor(Math.random()*36**10).toString(36),this.timeline="",this.rejoinTimeout&&clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0,this.sendBuffer=[],this.users=0,this.usersTotal=0,this.cpuTime=0,this.triggeringCpuTime=null,this.synced=null,this.latency=0,this.latencyHistory&&(this.latencyHistory=[]),this.localTicker&&(globalThis.clearInterval(this.localTicker),delete this.localTicker),this.syncTimer&&(globalThis.clearTimeout(this.syncTimer),delete this.syncTimer),this.tuttiHistory=[],this.lastAnimationEnd=0,this.animationGapCheck=[],this.rateLimitedSendTimes=[],this.rateLimitBuffer=[],this.rateLimitSoftWarned=!1,this.rateLimitBufferWarned=!1,this.rateLimitLastLogged=0,this.payloadSizeWarned=!1,he.removeAllSubscriptionsFor(this.viewId),he.addSubscription(this.viewId,"__peers__",this.viewId,(a=>bt(`users now ${a.count}`)),"oncePerFrameWhileSynced"),this.leaving||ce.showSyncWait(!0)}get id(){return this.vm?this.vm.id:this.sessionSpec.id}get persistentId(){return this.sessionSpec.persistentId}get versionId(){return this.sessionSpec.codeHash}get extrapolatedTime(){return Date.now()-this.extrapolatedTimeBase}get viewOnly(){return this.sessionSpec.viewOnly}get backlog(){return this.vm?this.reflectorTime-this.vm.time:0}get starvation(){return Date.now()-this.lastReceived}get lag(){return this.vm?Math.max(0,this.extrapolatedTime-this.vm.time-this.msPerTick):0}get activity(){return Date.now()-this.lastSent}get viewed(){return!(!this.session||!this.session.view)}get connected(){return this.connection.connected}get shouldLeaveWhenDisconnected(){return this.leaving||!this.canRejoinSeamlessly||0===this.sessionSpec.rejoinLimit}get canRejoinSeamlessly(){return!!this.timeline}checkForConnection(a){this.connection.checkForConnection(a)}dormantDisconnect(){this.connected&&this.connection.dormantDisconnect()}async initFromSessionSpec(a){const{name:Y,optionsFromUrl:K,password:P,appId:R,apiKey:v,viewIdDebugSuffix:H}=a,M=R?`${R}/${Y}`:Y;H&&(this.viewId=this.viewId.replace(/_.*$/,"")+"_"+encodeURIComponent((""+H).slice(0,16)).replace(/[^a-z0-9]/gi,(a=>`_${"%"===a?"":a.charCodeAt(0).toString(16).toUpperCase()}`)));const z={...a.options};if(K)for(const a of K)a in I&&(z[a]=I[a]);const F={};for(const Y of["hashOverride"])Y in I?F[Y]=I[Y]:Y in a&&(F[Y]=a[Y]);this.key=fi(P,"",{keySize:8});const N=await async function(a,Y){return V(a+y(Y))}(M,z),{developerId:Q,token:j}=await this.verifyApiKey(v,R,N),{id:U,codeHash:D,computedCodeHash:E}=await async function(a,Y,K,P){let R,v;const H=at[a];let M="";H?(R=H.codeHashes,v=H.computedCodeHash,M=" (code hashing from cache)"):(R=await Promise.all(rt),v=await V([P,...R].join("|")),at[a]={codeHashes:R,computedCodeHash:v});const{hashOverride:I,...z}=K,F=I||v,N=await V(a+"|"+Y+y(z)+F);if(W()&&!dt.has(N)){(it?"utf-8":[...document.getElementsByTagName("meta")].find((a=>a.getAttribute("charset"))))||console.warn('Croquet: Missing <meta charset="..."> declaration. Croquet model code hashing might differ between browsers.'),ot[v].what="Version ID",ot[a].what="Persistent ID",ot[N].what="Session ID",F!==v&&(R.push(v),ot[v].what="Computed Version ID (replaced by overrideHash)",ot[F]={what:"Version ID (as specified by overrideHash)"});const Y=[...R,F,a,N].map((a=>({hash:a,...ot[a]})));console.log(`Croquet: Debug Hashing for session ${N}${M}`,Y),dt.add(N)}return{id:N,persistentId:a,codeHash:F,computedCodeHash:v}}(N,Q,F,rl);this.tove=await this.encrypt(U),xl.session&&console.log(`Croquet session "${M}":\n        sessionId=${U}${R?`\n        persistentId=${N}`:""}\n        versionId=${D===E?D:`${D} (specified in hashOverride)\n        versionId=${E} (computed)`}\n        viewId=${this.viewId}`),this.eventRateLimit=a.eventRateLimit,this.eventHistoryLimit=this.eventRateLimit,this.eventMaxBundles=this.eventRateLimit,this.sessionSpec={...a,options:z,name:M,id:U,persistentId:N,developerId:Q,token:j,codeHash:D,computedCodeHash:E};const{msPerTick:B,multiplier:O}=this.getTickAndMultiplier();this.msPerTick=B,this.tickMultiplier=O,this.setUpActivityChecks()}async establishSession(){const{id:a,persistentId:Y,codeHash:K}=this.sessionSpec;this.sessionSpec.snapshot={id:a,time:0,meta:{id:a,persistentId:Y,codeHash:K,created:(new Date).toISOString()}};const P=new Promise((a=>this.sessionSpec.sessionJoined=a));this.checkForConnection(!1),xl.session&&console.log(a,"waiting for SYNC"),await P}async verifyApiKey(a,Y,K){const{signServer:P,apiKey:R}=Ra(a);if("none"===P)return{developerId:"unknown_dev_id"};try{const a=await fetch(`${P}/join?meta=login`,{method:"GET",mode:"cors",headers:{"X-Croquet-Auth":R,"X-Croquet-App":Y,"X-Croquet-Id":K,"X-Croquet-Version":rl,"X-Croquet-Path":new URL(ce.referrerURL()).pathname},referrer:ce.referrerURL(),referrerPolicy:"no-referrer-when-downgrade"}),{error:v,developerId:H,token:M}=await a.json();if(v)throw Error(v);return xl.session&&console.log("Croquet: verified API key"),{developerId:H,token:M}}catch(Y){throw Error(`Croquet API key validation failed for "${a}": ${Y.message}`)}}lastKnownTime(a){return Math.max(a.time,a.externalTime)}takeSnapshot(){const a=this.vm.snapshot(),Y=this.lastKnownTime(a),K=a.externalSeq;return a.meta={...this.sessionSpec.snapshot.meta,options:this.sessionSpec.options,time:Y,seq:K,date:(new globalThis.CroquetViewDate).toISOString(),host:al?"localhost":window.location.hostname,sdk:rl},delete a.meta.hash,a}takeSnapshotHandleErrors(){let a,Y,K;try{a=Bt.begin("snapshot"),K=this.takeSnapshot()}catch(a){return yt("snapshot",a),null}finally{Y=Bt.end("snapshot")-a}return xl.snapshot&&console.log(this.id,`snapshot taken in ${Math.ceil(Y)} ms`),K}scheduleSnapshot(){if(!this.connected||!this.vm||this.viewOnly)return;const a=this.vm.time,Y=a-this.vm.lastSnapshotPoll;if(Y<5e3)return void(xl.snapshot&&console.log(`not requesting snapshot poll (${Y}ms since poll scheduled)`));const K=new pl(a,0,"_","handlePollForSnapshot",[]);this.sendTagged(K,{debounce:5e3,msgID:"pollForSnapshot"}),xl.snapshot&&console.log(this.id,"requesting snapshot poll via reflector")}handlePollForSnapshot(a){if(!0!==this.synced||this.viewOnly)return void(this.triggeringCpuTime=null);const Y=this.triggeringCpuTime||this.cpuTime;let K,P,R;this.triggeringCpuTime=null,this.cpuTime=0;try{K=Bt.begin("snapshot"),P={cpuTime:Y,hash:this.vm.getSummaryHash(),viewId:this.viewId}}catch(a){return void yt("snapshot",a)}finally{R=Bt.end("snapshot")-K,this.cpuTime-=R}xl.snapshot&&console.log(this.id,`Summary hashing took ${Math.ceil(R)}ms`),Promise.resolve().then((()=>this.pollForSnapshot(a,P)))}pollForSnapshot(a,Y){Y.cpuTime+=Math.random(),xl.snapshot&&console.log(this.id,"sending snapshot vote",Y),this.sendTutti({time:a,topic:"snapshot",data:Y,tallyTarget:["handleSnapshotVote"]})}handleSnapshotVote(a){if(!0!==this.synced)return void(xl.snapshot&&console.log(this.id,"Ignoring snapshot vote during sync"));const{tally:Y}=a;xl.snapshot&&console.log(this.id,"received snapshot votes",Y);const{numberOfGroups:K,shouldUpload:P,dissidentFlag:R}=this.analyzeTally(Y,"cpuTime");if(K>1&&console.error(this.id,`Session diverged! Snapshots fall into ${K} groups`),P){const a=this.takeSnapshotHandleErrors();a&&Promise.resolve().then((()=>this.uploadSnapshot(a,R)))}}analyzeTally(a,Y){let K=!1,P=null;const R=[],v={};let H=null;Object.keys(a).forEach(((a,Y)=>{const K=JSON.parse(a);R.push(K);const{hash:P,viewId:M}=K;M===this.viewId&&(H=Y),v[P]||(v[P]=[]),v[P].push(Y)}));const M=Object.keys(v),I=M.length;let z=0;I>1&&(M.sort(((a,Y)=>v[Y].length-v[a].length)),v[M[0]].length===v[M[1]].length&&(xl.snapshot&&console.log(this.id,"Deciding consensus by tie-break"),M[1]<M[0]&&(z=1)));const F=M[z];if(null!==H){const a=R[H].hash,M=v[a];M.length>1&&M.sort(((a,K)=>R[a][Y]-R[K][Y])),M[0]===H&&(K=!0,a!==F&&(P={groupVotes:M.length,allVotes:R.length}))}return{numberOfGroups:I,shouldUpload:K,dissidentFlag:P}}snapshotPath(a,Y,K){const P=Math.ceil(a).toString().padStart(10,"0"),{appId:R,persistentId:v,codeHash:H,apiKey:M}=this.sessionSpec;return M?`apps/${R}/snap/${H}/${v}.${this.id}/${P}_${Y}.${K}`:`snapshots/${this.id}/${P}_${Y}-${K}.snap`}hashSnapshot(a){return a.meta.hash?a.meta.hash:(a.meta.hashPromise||(a.meta.hashPromise=new Promise((Y=>{const K={...a};delete K.meta,V(JSON.stringify(K)).then((K=>{a.meta.hash=K,delete a.meta.hashPromise,Y(K)}))}))),a.meta.hashPromise)}uploadServer(a){if("string"==typeof I.files){let a=new URL(I.files,window.location).href;return a.endsWith("/")&&(a=a.slice(0,-1)),{url:a,apiKey:null}}const{apiKey:Y,signServer:K}=Ra(a);if("none"===K&&!xl.offline)throw Error("no file server configured");return{url:K,apiKey:Y}}async uploadSnapshot(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;await this.hashSnapshot(a);const K=Bt.begin("snapshot"),P=JSON.stringify(a),R=Bt.end("snapshot")-K;xl.snapshot&&console.log(this.id,`snapshot stringified (${P.length} bytes) in ${Math.ceil(R)}ms`);const{time:v,seq:H,hash:M}=a.meta,I=this.connection.socket;try{const a=await this.uploadEncrypted({content:P,path:this.snapshotPath(v,H,M),key:this.key,gzip:!0,debug:xl.snapshot,what:"snapshot"});return this.connection.socket!==I?(console.warn(this.id,"Controller was reset while trying to upload snapshot"),!1):(this.announceSnapshotUrl(v,H,M,a,Y),!0)}catch(a){return console.error(this.id,"Failed to upload snapshot"),!1}}announceSnapshotUrl(a,Y,K,P,R){if(xl.snapshot){let v=`time: ${a}, seq: ${Y}, hash: ${K}`;R&&(v+=", as dissident; "+JSON.stringify(R)),console.log(this.id,`sending snapshot url to reflector (${v}): ${P}`)}try{this.connection.send(JSON.stringify({id:this.id,action:"SNAP",args:{time:a,seq:Y,hash:K,url:P,dissident:R}}))}catch(a){console.error("ERROR while sending",a)}}async downloadEncrypted(a){let{url:Y,gzip:K,key:P,debug:R,json:v,what:H}=a;Y.startsWith("https://croquet.io/files/v1")&&(Y=Y.replace("https://croquet.io/files/v1","https://files.croquet.io"));const M=Y.startsWith("offline:");let I=Date.now();const z=await(M?this.fetchOffline(Y,H,R):fetch(Y,{method:"GET",mode:"cors",headers:{"X-Croquet-App":this.sessionSpec.appId,"X-Croquet-Id":this.sessionSpec.persistentId,"X-Croquet-Session":this.sessionSpec.id,"X-Croquet-Version":rl},referrer:ce.referrerURL()})),F=await z.arrayBuffer();R&&console.log(this.id,`${H} fetched (${F.byteLength} bytes) in ${-I+(I=Date.now())}ms`),Bt.addNetworkTraffic(`${H}_in`,F.byteLength);const N=this.decryptBinary(F,P);R&&console.log(this.id,`${H} decrypted (${N.length} bytes) in ${-I+(I=Date.now())}ms`);const Q=K?tl.inflate(N):N;return R&&K&&console.log(this.id,`${H} inflated (${Q.length} bytes) in ${-I+(I=Date.now())}ms`),v?JSON.parse((new TextDecoder).decode(Q)):Q}async fetchOffline(a,Y,K){const P=++Yl;return new Promise(((R,v)=>{const H=al?"addListener":"addEventListener",M=al?"removeListener":"removeEventListener";Tl.postMessage({job:P,cmd:"getOfflineFile",url:a,id:this.id,what:Y,debug:K,offline:xl.offline});const l=a=>{if(P!==a.data.job)return;const{ok:K,status:H,statusText:I,body:z,bytes:F}=a.data;Bt.addNetworkTraffic(`${Y}_out`,F),Tl[M]("message",l),K?R({arrayBuffer:()=>z}):v(Error(`${H}: ${I}`))};try{Tl[H]("message",l)}catch(a){console.log("failed to add listener",a)}}))}async uploadEncrypted(a){let{content:Y,path:K,key:P,gzip:R,keep:v,debug:H,what:M}=a;const I="string"==typeof Y?(new TextEncoder).encode(Y).buffer:Y,z=v?void 0:[I],F="string"==typeof P?P:yi.stringify(P),{apiKey:N,appId:Q,persistentId:j}=this.sessionSpec,U=++Yl;return new Promise(((a,Y)=>{const P=al?"addListener":"addEventListener",v=al?"removeListener":"removeEventListener";Tl.postMessage({job:U,cmd:"uploadEncrypted",server:this.uploadServer(N),path:K,buffer:I,keyBase64:F,gzip:R,referrer:ce.referrerURL(),id:this.id,appId:Q,persistentId:j,CROQUET_VERSION:rl,debug:H,what:M,offline:xl.offline},z);const f=K=>{if(U!==K.data.job)return;const{url:P,ok:R,status:H,statusText:I,bytes:z}=K.data;Bt.addNetworkTraffic(`${M}_out`,z),Tl[v]("message",f),R?a(P):Y(Error(`${H}: ${I}`))};try{Tl[P]("message",f)}catch(a){console.log("failed to add listener",a)}}))}persistentPath(a){const{appId:Y,persistentId:K}=this.sessionSpec;return`apps/${Y}/${K}/save/${a}`}pollForPersist(a,Y,K,P,R){if(!this.synced)return;if(!this.sessionSpec.appId)throw Error("Persistence API requires appId");if(xl.offline)return;const v={viewId:this.viewId,hash:P,ms:R+.001*Math.random()},H={persistTime:Y,persistentHash:P,persistentString:K};xl.snapshot&&console.log(this.id,`sending persistence vote for time @${Y}`,v),this.sendTutti({time:a,topic:"persist",data:v,localContext:H,tallyTarget:["handlePersistVote"]})}async handlePersistVote(a){const{tally:Y,localContext:K}=a;if(xl.snapshot){const a=K?`for time @${K.persistTime}`:"that we didn't participate in";console.log(this.id,`received persistence vote ${a}`,Y)}const{numberOfGroups:P,shouldUpload:R,dissidentFlag:v}=this.analyzeTally(Y,"ms");if(P>1&&console.warn(this.id,`Persistence records fall into ${P} groups`),!R||!K)return;const{persistTime:H,persistentHash:M,persistentString:I}=K,z=await this.uploadEncrypted({path:this.persistentPath(M),content:I,key:this.key,gzip:!0,debug:xl.snapshot,what:"persistence"});if(xl.snapshot){const a=v?` (as dissident; ${JSON.stringify(v)})`:"";console.log(this.id,`sending persistent data url to reflector${a}: ${z}`)}try{this.connection.send(JSON.stringify({id:this.id,action:"SAVE",args:{persistTime:H,url:z,dissident:v}}))}catch(a){console.error("ERROR while sending",a)}}convertReflectorMessage(a){let Y="noop",K=[];switch(a[2].what){case"users":{const{joined:P,left:R,active:v,total:H}=a[2];this.users=v,this.usersTotal=H;const M="__peers__",I={entered:P||[],exited:R||[],count:v};Y="publishFromModelOnly",K=["__VM__",M,I],he.handleEvent(this.viewId+":"+M,I);break}case"tally":{const{tuttiSeq:P,tuttiKey:R,tally:v,tallyTarget:H,missingClients:M}=a[2];(xl.messages||xl.snapshot)&&M&&console.log(`${M} ${1===M?"client":"clients"} failed to participate in tally ${R||P}`),Y="handleTuttiResult",K=[{tuttiSeq:P,tuttiKey:R,tally:v,tallyTarget:H}];break}}const P=new pl(0,0,"_",Y,K);a[2]=P.asState()[2]}handleTuttiResult(a){const{tuttiSeq:Y,tuttiKey:K,tally:P,tallyTarget:R}=a,v=K?a=>a.tuttiKey===K:a=>a.dummyTuttiSeq===Y,H=this.tuttiHistory.findIndex(v),M=-1!==H&&this.tuttiHistory.splice(H,1)[0];let I=null,z=null;if(M&&(I=M.payload,z=M.localContext),R){const[a,...Y]=R,K=[...Y,{tally:P,localPayload:I,localContext:z}],v=new pl(0,0,"_",a,K);this.vm.verifyExternal(v),v.executeOn(this.vm,!0)}}async receive(a,Y){const K=this.lastReceived;switch(this.lastReceived=this.connection.lastReceived,a){case"SYNC":{this.syncReceived=!0,this.clearSyncReceiptTimeout(),Hl.add(this);const{progressReporter:K}=this.sessionSpec,P=K||(()=>{}),{messages:R,url:v,persisted:H,time:M,seq:I,snapshotSeq:z,tove:F,reflector:N,flags:Q}=Y;if(F&&F!==this.tove)try{if(this.decrypt(F)!==this.id)throw Error("wrong sessionId in tove?!")}catch(a){return this.connection.closeConnectionWithError("SYNC",Error(`session password check: ${a.message}`),4200),void P(-1)}const j=Y.timeline||Y.reflectorSession;this.flags=Q||{};const U=H?"persistence":"snapshot";xl.session&&console.log(this.id,`received SYNC from ${N} reflector: time ${M}, ${R.length} messages, ${U} ${v||"<none>"}`);let D=!!this.vm;if(D){this.networkQueue.length=0;const a=!!j&&j===this.timeline,Y=R[0],K=I,P=void 0!==z?z:Y?Y[1]:K;xl.messages&&console.log(this.id,`rejoin: we have #${this.vm.seq} SYNC has #${P}-#${K}`);let v=a&&ml(P,this.vm.seq)&&ml(this.vm.seq,K)&&M>=this.reflectorTime;if(v){let a=0;Y&&ml(Y[1],this.vm.seq)&&(a=this.vm.seq-Y[1]+1>>>0);for(let Y=a;v&&Y<R.length;Y++){const a=R[Y][2];"string"!=typeof a&&"users"===a.what&&a.left&&a.left.includes(this.viewId)&&(xl.session&&console.log(this.id,"reflector reports that this view has left"),v=!1)}v&&a&&(xl.messages&&console.log(this.id,`rejoin: discarding ${a} messages #${Y[1]}-#${this.vm.seq}`),R.splice(0,a))}if(v){if(this.sendBuffer.length>0){const a=this.sendBuffer;this.sendBuffer=[],xl.session&&console.log(this.id,`rejoin: sending ${a.length} messages buffered while disconnected`);for(const Y of a)Y()}}else xl.session&&console.log(this.id,"cannot rejoin seamlessly; rebooting model/view"),this.leave(!0),D=!1}const E=this.networkQueue;this.networkQueue=[];for(const Y of R){if("string"!=typeof Y[2])this.convertReflectorMessage(Y);else try{Y[2]=this.decryptPayload(Y[2])[0]}catch(a){return this.connection.closeConnectionWithError("SYNC",Error(`session password decrypt: ${a.message}`),4200),void P(-1)}xl.messages&&console.log(this.id,"received in SYNC "+JSON.stringify(Y)),this.networkQueue.push(Y)}if(this.networkQueue.push(...E),M>this.reflectorTime&&this.timeFromReflector(M,"reflector"),D)return xl.session&&console.log(this.id,"seamless rejoin successful"),void this.sessionSpec.sessionJoined();let B;if(this.timeline=j||"",xl.snapshot&&v&&console.log(`${this.id} fetching ${U} ${v}`),v)try{B=await this.downloadEncrypted({url:v,gzip:!0,key:this.key,debug:xl.snapshot,json:!0,what:U})}catch(a){return this.connection.closeConnectionWithError("SYNC",Error(`failed to fetch ${U}: ${a.message}`),4200),void P(-1)}if(!this.connected)return console.log(this.id,"disconnected during SYNC"),void P(-1);H?this.install(B):(B&&(this.sessionSpec.snapshot=B),this.install()),xl.session&&console.log(`${this.id} fast-forwarding from ${Math.round(this.vm.time)} to at least ${M}`);const O=this.vm.time,_=await new Promise((a=>{const{port1:Y,port2:K}=new MessageChannel;Y.onmessage=()=>{let Y=!0;if(this.vm.time===this.reflectorTime)this.viewId in this.vm.views&&(P(1),a(!0),Y=!1);else{const a=(this.vm.time-O)/(this.reflectorTime-O);P(a)}Y&&this.stepSession("fastForward",{budget:200})},this.fastForwardHandler=Y=>{this.connected&&this.vm?"error"===Y?(P(-1),a(!1)):K.postMessage("tick"):(console.log(this.id,"disconnected during SYNC fast-forwarding"),P(-1),a(!1))},Promise.resolve().then((()=>this.stepSession("fastForward",{budget:200})))}));return delete this.fastForwardHandler,_&&xl.session&&console.log(`${this.id} fast-forwarded to ${Math.round(this.vm.time)}`),void(_&&this.sessionSpec.sessionJoined())}case"RECV":{const K=Y;if(K[1]>>>=0,"string"!=typeof K[2])xl.messages&&console.log(this.id,"received META "+JSON.stringify(K)),this.convertReflectorMessage(K),xl.messages&&console.log(this.id,"converted to "+JSON.stringify(K));else try{const[a,Y,P]=this.decryptPayload(K[2]);K[2]=a,Y===this.viewId&&this.addToStatistics(P,this.lastReceived),xl.messages&&console.log(this.id,"received "+JSON.stringify(K))}catch(a){return void this.connection.closeConnectionWithError("RECV",Error(`session password decrypt: ${a.message}`),4200)}let P;return this.networkQueue.push(K),this.flags.rawtime&&(P=K[K.length-1]),this.timeFromReflector(K[0],"reflector",P),void(this.simulateIfNeeded&&Promise.resolve().then((()=>this.simulateIfNeeded())))}case"TICK":{if(!this.vm)return;const a="number"==typeof Y?Y:Y.time;if(xl.ticks){const Y=K&&this.lastReceived-K-this.msPerTick*this.tickMultiplier|0;console.log(this.id,`Controller received TICK ${a} ${Math.abs(Y)<5?"on time":Y<0?"early":"late"} (${Y} ms)`)}return this.timeFromReflector(a,"reflector"),this.tickMultiplier>1&&this.multiplyTick(a),void(this.simulateIfNeeded&&Promise.resolve().then((()=>this.simulateIfNeeded())))}case"INFO":{const{msg:a,options:K}=Y;return void ce.showMessage(a,K)}case"REQU":return xl.snapshot&&console.log("received REQU (snapshot request) from reflector"),void(this.cpuTime=12345);default:console.warn("Unknown action:",a,Y)}}install(a){const Y=Date.now(),{snapshot:K,initFn:P,options:R}=this.sessionSpec,[v,H]=K.modelsById?["deserializ","snapshot"]:["initializ","root model"];xl.session&&console.log(`${this.id} ${v}ing ${H}`);let M=new hl(K,(()=>{try{return P(R,a)}catch(a){throw yt("init",a,"fatal"),a}}));if((xl.session||xl.snapshot&&K.modelsById)&&console.log(`${this.id} ${H} ${v}ed in ${Date.now()-Y}ms`),xl.initsnapshot&&!K.modelsById){xl.snapshot&&console.log(`${this.id} exercising snapshot and restore after init()`);let Y=null;try{Y=JSON.stringify(M.snapshot())}catch(a){throw yt("initial snapshot",a,"fatal"),a}try{M=new hl(JSON.parse(Y),(()=>P(R)))}catch(a){throw yt("initial snapshot resume",a,"fatal"),a}}const I=this.lastKnownTime(M);this.reflectorTime=Math.max(this.reflectorTime,I),this.setVM(M)}setVM(a){this.vm=a,this.vm.controller=this}sendJoin(){this.syncReceived=!1,delete this.fastForwardHandler,this.rejoinTimeout&&(clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0),xl.session&&console.log(this.id,"Controller sending JOIN");const{tick:a,delay:Y}=this.getTickAndMultiplier(),{name:K,codeHash:P,appId:R,apiKey:v,persistentId:H,developerId:M,heraldUrl:I,rejoinLimit:z,autoSleep:F,computedCodeHash:N,location:Q,flags:j}=this.sessionSpec,{apiKey:U}=Ra(v),D=Q?[this.viewId]:this.viewId,E={name:K,apiKey:U,appId:R,persistentId:H,url:ce.referrerURL(),sdk:rl,developerId:M,version:1,user:D,location:Q,ticks:{tick:a,delay:Y},dormantDelay:F,tove:this.tove,codeHash:P};I&&Object.assign(E,{heraldUrl:I}),z&&Object.assign(E,{leaveDelay:z+250}),N!==P&&Object.assign(E,{computedCodeHash:N}),j&&Object.assign(E,{flags:j}),this.connection.send(JSON.stringify({id:this.id,action:"JOIN",args:E})),this.syncReceiptTimeout=setTimeout((()=>{delete this.syncReceiptTimeout,this.syncReceived||this.connection.closeConnectionWithError("JOIN",Error("Initial reflector connection timed out"))}),5e3)}clearSyncReceiptTimeout(){this.syncReceiptTimeout&&(clearTimeout(this.syncReceiptTimeout),delete this.syncReceiptTimeout)}connectionInterrupted(){this.syncReceived&&(this.shouldLeaveWhenDisconnected?this.leave():this.rejoinTimeout||(this.rejoinTimeout=setTimeout((()=>{xl.session&&console.log(this.id,"rejoin timed out"),this.rejoinTimeout=0,this.leave()}),this.sessionSpec.rejoinLimit)))}leave(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{rebootModelView:Y}=this.sessionSpec;if(this.reset(),xl.session&&console.log(this.id,`resetting ${a?"(but keeping)":"and discarding"} controller`),a||Hl.delete(this),!this.sessionSpec)throw Error("do not discard sessionSpec!");Y()}async encrypt(a){const Y=A.random(16),K=Gi.encrypt(a,this.key,{iv:Y}),P=Li(a,this.key);return`${yi.stringify(Y)}${yi.stringify(P)}${K}`}get deprecatedDefaultKey(){return gl||(gl=fi("THIS SHOULDN'T BE IN LOGS","",{keySize:8})),gl}decrypt(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.key;const K=yi.parse(a.slice(0,24)),P=yi.parse(a.slice(24,68)),R=a.slice(68),v=Gi.decrypt(R,Y,{iv:K});let H="";try{H=Xi.stringify(v)}catch(a){}const M=Li(H,this.key);if(this.compareHmacs(P.words,M.words))return H;if(Y!==this.deprecatedDefaultKey)return this.decrypt(a,this.deprecatedDefaultKey);throw Error("Decryption error")}decryptBinary(a,Y){const K=(new TextDecoder).decode(new Uint8Array(a,0,4));let P,R,v,H,M;switch("string"==typeof Y&&(Y=yi.parse(Y)),K){case"CRQ0":P=(new TextDecoder).decode(a),R=yi.parse(P.slice(4,28)),v=yi.parse(P.slice(28,72)),H=P.slice(72),M=Gi.decrypt(H,Y,{iv:R});break;case"CRQ1":P=new Uint8Array(a),R=A.create(P.subarray(4,20)),v=A.create(P.subarray(20,52)),H=A.create(P.subarray(52)),M=Gi.decrypt({ciphertext:H},Y,{iv:R});break;default:throw Error(`${this.id} unknown encryption version ${K}`)}M.clamp();const I=Li(M,Y);if(this.compareHmacs(v.words,I.words))return G(M);if(Y!==this.deprecatedDefaultKey)return this.decryptBinary(a,this.deprecatedDefaultKey);throw Error("Decryption error")}async encryptMessage(a,Y,K){const[P,R,v]=a.asState();return[P,R,await this.encryptPayload([v,Y,K])]}async encryptPayload(a){return this.encrypt(JSON.stringify(a))}decryptPayload(a){return JSON.parse(this.decrypt(a))}compareHmacs(a,Y){let K=a.length===Y.length;for(let P=0;P<a.length;P++)a[P]!==Y[P]&&(K=!1);return K}sendMessage(a){if(this.viewOnly||!this.vm)return;const Y=a.asState()[2].length;if(Y>16384)return void console.warn(`${this.id} Message with payload of ${Y} bytes exceeds maximum 16384 and will not be sent to reflector.`);!this.payloadSizeWarned&&Y>4096&&(console.log(`${this.id} Message with payload of ${Y} bytes being sent to reflector. Maximum recommended is 4096.`),this.payloadSizeWarned=!0);const K=Date.now(),P=this.rateLimitedSendTimes,R=this.rateLimitBuffer;if(Bt.perSecondTally({requestedMessages:1}),R.length)return void this.addToRateLimitBuffer(a);let v=0;if(P.length&&this.synced){const a=P[P.length-1],Y=1e3/this.eventRateLimit-(K-a);Y>1&&(v=Math.ceil(Y))}v?(this.addToRateLimitBuffer(a),setTimeout((()=>this.serviceRateLimitBuffer()),v)):(this.recordRateLimitedSend(K),this.socketSendMessage(a),Bt.perSecondTally({sentSingleMessages:1,sentMessagesTotal:1,sentPayloadTotal:Y}))}recordRateLimitedSend(a){const Y=this.rateLimitedSendTimes;!this.synced&&Y.length&&Y[Y.length-1]===a||(Y.push(a),Y.length>this.eventHistoryLimit&&Y.shift()),!this.rateLimitSoftWarned&&Y.length===this.eventHistoryLimit&&a-Y[0]<1010&&(console.warn(`${this.id} Sends to reflector are at or above recommended limit of ${this.eventHistoryLimit} within one second. Events will be bundled as necessary to keep to the limit.`),this.rateLimitSoftWarned=!0)}addToRateLimitBuffer(a){Bt.perSecondTally({bundledMessages:1});const Y=Date.now(),K=a.asState(),P=K[2].length,R=this.rateLimitBuffer;if(R.length){const a=R[R.length-1],{msgStates:v,totalPayload:H}=a;if(H<4096)return v.push({msgState:K,bufferTime:Y}),void(a.totalPayload+=P)}Bt.perSecondTally({newBundles:1}),R.push({msgStates:[{msgState:K,bufferTime:Y}],totalPayload:P});const v=R.length;xl.session&&v%5==0&&v!==this.rateLimitLastLogged&&(console.log(`${this.id} SEND rate-limit buffer grew to ${v} event bundles (max ${this.eventMaxBundles})`),this.rateLimitLastLogged=v),v>this.eventMaxBundles?(console.error(`${this.id} Disconnecting after overflow of SEND rate-limit buffer.`),this.connection.closeConnectionWithError("SEND",Error("Send rate exceeded"),4200)):!this.rateLimitBufferWarned&&v>this.eventMaxBundles/2&&(console.warn(`${this.id} SEND rate-limit buffer is 50% full. If send rate does not drop, the app will be disconnected.`),this.rateLimitBufferWarned=!0)}serviceRateLimitBuffer(){if(!this.connected)return;const a=this.rateLimitBuffer;if(!a.length)return;const Y=Date.now(),K=1e3/this.eventRateLimit,P=this.rateLimitedSendTimes;if(P.length){const a=P[P.length-1];if(K-(Y-a)>0)return}const R=a.shift(),{msgStates:v,totalPayload:H}=R,M=[];let I=0;if(v.forEach((a=>{M.push(a.msgState),I+=Y-a.bufferTime})),1===M.length){const a=pl.fromState(M[0],this.vm);this.socketSendMessage(a)}else{const a=new pl(this.vm.time,0,"_","handleBundledEvents",[M]);this.socketSendMessage(a)}if(this.recordRateLimitedSend(Y),Bt.perSecondTally({sentBundles:1,sentMessagesTotal:v.length,sendDelay:I,sentBundlePayload:H,sentPayloadTotal:H}),xl.session&&this.connected){const Y=a.length;Y&&Y%5==0&&Y!==this.rateLimitLastLogged&&(console.log(`${this.id} SEND rate-limit buffer dropped to ${Y} event bundles`),this.rateLimitLastLogged=Y)}a.length&&setTimeout((()=>this.serviceRateLimitBuffer()),K)}async socketSendMessage(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const K=await this.encryptMessage(a,this.viewId,Date.now()),P=Y?`tagged SEND ${a.asState()} with tags ${JSON.stringify(Y)}`:`SEND ${a.asState()}`;if(!this.connected)return void(this.vm&&(xl.sends&&console.log(this.id,`buffering ${P}`),this.sendBuffer.push((()=>this.socketSendMessage(a,Y)))));xl.sends&&console.log(this.id,`sending ${P}`);const R={id:this.id,action:"SEND",args:[...K,this.latency]};Y&&(R.tags=Y),this.lastSent=Date.now(),this.connection.send(JSON.stringify(R))}async sendTagged(a,Y){this.viewOnly||this.socketSendMessage(a,Y)}async sendTutti(a){let{time:Y,topic:K,data:P,localContext:R=null,firstMessage:v=null,wantsVote:H=!0,tallyTarget:M=null}=a;if(this.viewOnly)return;const I=v&&await this.encryptMessage(v,this.viewId,Date.now()),z=y(P);if(!this.connected)return void(this.vm&&(xl.sends&&console.log(this.id,`buffering "${K}" TUTTI ${z} ${v&&v.asState()}`),this.sendBuffer.push((()=>this.sendTutti({time:Y,topic:K,data:P,localContext:R,firstMessage:v,wantsVote:H,tallyTarget:M})))));xl.sends&&console.log(this.id,`sending "${K}" TUTTI ${z} ${v&&v.asState()}`),this.lastSent=Date.now();const F=`${K}@${Y}`;this.connection.send(JSON.stringify({id:this.id,action:"TUTTI",args:[Y,0,z,I,H,M,F]})),this.tuttiHistory.length>100&&this.tuttiHistory.shift(),this.tuttiHistory.push({time:Y,tuttiKey:F,dummyTuttiSeq:0,payload:z,localContext:R})}sendLog(){for(var a=arguments.length,Y=new Array(a),K=0;K<a;K++)Y[K]=arguments[K];this.connected?(xl.sends&&console.log(this.id,"sending LOG"),Y.length<2&&(Y=Y[0]),this.connection.send(JSON.stringify({action:"LOG",args:Y}))):this.vm&&(xl.sends&&console.log(this.id,"buffering LOG"),this.sendBuffer.push((()=>this.sendLog(...Y))))}addToStatistics(a,Y){this.latency=Y-a,this.latencyHistory&&(this.latencyHistory.length>=100&&this.latencyHistory.shift(),this.latencyHistory.push({time:Y,ms:this.latency}))}get latencies(){return this.latencyHistory||(this.latencyHistory=[]),this.latencyHistory}getTickAndMultiplier(){const a=this.sessionSpec.options,Y=["number","string"].includes(typeof a.tps)?a.tps:["number","string"].includes(typeof this.sessionSpec.tps)?this.sessionSpec.tps:20,[K,P]=(Y+"x").split("x").map((a=>Number.parseFloat("0"+a))),R=1e3/Math.max(1/30,Math.min(60,K)),v=Math.max(1,P);let H=R,M=0;return v>1&&!Wl&&(H=R/v,M=Math.ceil(H*(v-1))),{msPerTick:H,multiplier:v,tick:R,delay:M}}simulate(a){if(!this.vm)return!0;try{let Y=!0;if(this.networkQueue.length+this.vm.messages.size===0)Y=this.vm.advanceTo(this.reflectorTime,a);else{const K=Bt.begin("simulate");for(;Y;){const K=this.networkQueue[0];if(!K)break;if(Y=this.vm.advanceTo(K[0],a),!Y)break;this.networkQueue.shift();const P=this.vm.scheduleExternalMessage(K);Y=this.vm.advanceTo(P.time,a),this.cpuTime+=5}Y&&(Y=this.vm.advanceTo(this.reflectorTime,a)),this.cpuTime+=Math.max(.01,Bt.end("simulate")-K)}Bt.backlog(this.backlog);const K=this.lag,P=Math.max(200,.1*this.msPerTick),R=Math.max(2e3,.2*this.msPerTick);return"boolean"==typeof this.synced&&this.viewed&&(this.synced&&K>R||!this.synced&&K<P)&&(this.synced?this.applySyncChange(!1):this.syncTimer||(this.syncTimer=setTimeout((()=>{delete this.syncTimer,this.connected&&this.lag<P&&this.applySyncChange(!0)}),200))),this.synced&&Y&&this.cpuTime>5e3&&!xl.offline&&(this.triggeringCpuTime=this.cpuTime,this.cpuTime=0,this.isBeingAnimated()?setTimeout((()=>this.scheduleSnapshot()),Math.floor(2e3*Math.random())):this.scheduleSnapshot()),Y}catch(a){return yt("simulate",a),this.connection.closeConnectionWithError("simulate",a),"error"}}stepSession(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const K=Bt.stepSession(Y.frameTime,!0);K&&console.log(K);const{backlog:P,latency:R,starvation:v,activity:H}=this;if("animation"===a){Bt.animationFrame(Y.frameTime,{backlog:P,starvation:v,latency:R,activity:H,users:this.users});const a=Date.now();if(this.lastAnimationEnd){const Y=a-this.lastAnimationEnd;if(!0===this.animationGapCheck&&Y>200&&(this.animationGapCheck=[],xl.session&&console.log(`${this.id} animation has stopped (too long between steps)`)),!0!==this.animationGapCheck){const a=this.animationGapCheck;a.push(Y),a.length>4&&a.shift(),4===a.length&&a.reduce(((a,Y)=>a+Y),0)<=400&&(this.animationGapCheck=!0,xl.session&&console.log(`${this.id} animation has started`))}}this.lastAnimationEnd=a}if(!this.connected)return void(this.isInBackground()||this.checkForConnection(!0));if(!this.vm)return;let M;switch(a){case"animation":{const a=Y.expectedSimFPS,K=Date.now(),P=Sl.reduce(((a,Y)=>a+Y),0)/Sl.length;if(M=this.simulate(K+Math.min(P,200)),!1===M){const Y=0===a?0:1e3/a*4;this.backlog>Y&&(M=this.simulate(K+200-P))}"error"!==M&&(Sl.push(Date.now()-K),Sl.length>4&&Sl.shift());break}case"fastForward":case"background":M=this.simulate(Date.now()+Y.budget);break;default:console.warn(a)}this.fastForwardHandler&&this.fastForwardHandler(M),"error"!==M&&(Bt.begin("update"),this.processModelViewEvents("animation"===a),Bt.end("update"),this.serviceRateLimitBuffer(),"animation"===a&&(Y.view&&(Bt.begin("render"),this.inViewRealm((()=>Y.view.update(Y.frameTime))),Bt.end("render")),this.lastAnimationEnd=Date.now()))}applySyncChange(a){xl.session&&console.log(this.id,`synced=${a}`),this.synced=a,ce.showSyncWait(!a),this.vm.publishFromView(this.viewId,"synced",a)}inViewRealm(a){return Ft(this.vm,(()=>a(this.vm)))}processModelViewEvents(a){return this.vm?this.vm.processModelViewEvents(a):0}timeFromReflector(a,Y,K){a<this.reflectorTime?("controller"!==Y||xl.ticks)&&console.warn(`time is ${this.reflectorTime}, ignoring time ${a} from ${Y}`):("boolean"!=typeof this.synced&&(this.synced=!1),this.reflectorTime=a,this.extrapolatedTimeBase=Date.now()-a,this.vm&&Bt.backlog(this.backlog),this.tickHook&&this.tickHook(a,K))}multiplyTick(a){this.localTicker&&globalThis.clearInterval(this.localTicker);const Y=this.msPerTick,K=this.tickMultiplier;let P=1;this.localTicker=globalThis.setInterval((()=>{this.timeFromReflector(Math.round(a+P*Y),"controller"),xl.ticks&&console.log(this.id,"Controller generate TICK "+this.reflectorTime,P),++P>=K&&(globalThis.clearInterval(this.localTicker),this.localTicker=0)}),Y)}startStepping(a){const e=Y=>{this.leaving||(this.isOutOfSight()||a(Y),window.requestAnimationFrame(e))};window.requestAnimationFrame(e)}setUpActivityChecks(){let a=null;this.isOutOfSight=()=>!(al||"hidden"!==document.visibilityState&&a),this.isBeingAnimated=()=>{const a=!0===this.animationGapCheck,Y=Date.now()-this.lastAnimationEnd<200;return a&&!Y&&(this.animationGapCheck=[],xl.session&&console.log(`${this.id} animation has stopped (too long since last step)`)),a&&Y},this.isInBackground=()=>this.isOutOfSight()||!this.isBeingAnimated(),al||new IntersectionObserver(((Y,K)=>a=Y[0].isIntersecting)).observe(document.body);const Y=this.sessionSpec.autoSleep;let K;if(Y){const a=1e3*Y;let P=0,R=0;K=()=>{const Y=Date.now();Y-P<980||(P=Y,this.isOutOfSight()?R?Y-R>a&&(this.dormantDisconnect(),R=0):R=Y:R=0)}}const i=()=>{this.leaving?P&&(clearInterval(P),P=null):this.connected&&this.vm&&(K&&K(),this.isBeingAnimated()||this.connection.keepAlive(Date.now()))};let P=setInterval(i,1e3);this.simulateIfNeeded=()=>{if(!this.isBeingAnimated()&&(i(),!this.fastForwardHandler&&this.connected)){let a=.9*this.msPerTick;Y&&(a=Math.min(a,200));const K=this.synced?"background":"fastForward";this.stepSession(K,{budget:a})}}}toString(){return`Controller[${this.id}]`}[Symbol.toPrimitive](){return this.toString()}}class _a{constructor(a){this.controller=a,this.socketLastSent=0,this.connectBlocked=!1,this.connectRestricted=!1,this.connectHasBeenCalled=!1,this.reconnectDelay=0,this.missingTickThreshold=1/0}get id(){return this.controller.id}setTick(a){this.missingTickThreshold=Math.min(3*a,45e3)}get connected(){return!(!this.socket||this.socket.readyState!==WebSocket.OPEN)}checkForConnection(a){this.socket||this.connectHasBeenCalled||this.connectBlocked||this.connectRestricted&&!a||this.connectToReflector()}connectToReflector(){if(this.socket||this.connectHasBeenCalled)return;let a;if(this.connectHasBeenCalled=!0,this.connectBlocked=!1,this.connectRestricted=!1,xl.offline)a=new Xa;else{let Y=Ra(this.controller.sessionSpec.apiKey).reflector;const K=al?void 0:window.location.href,P={},R=this.controller.sessionSpec.token;if(R&&(P.token=R),I.reflector){const a=I.reflector.toUpperCase();"CF"===a||a.match(/^[A-Z]{3}$/)?(Y=xl.reflector?"wss://croquet.network/reflector/dev/":"wss://croquet.network/reflector/",3===a.length&&(P.colo=a)):I.reflector.match(/^[-a-z0-9]+$/i)?P.region=I.reflector:Y=new URL(I.reflector,K).href.replace(/^http/,"ws")}if(!Y.match(/^wss?:/))throw Error("Cannot interpret reflector address "+Y);Y.endsWith("/")||(Y+="/");const v=new URL(Y+this.id,K);for(const[a,Y]of Object.entries(P))v.searchParams.append(a,Y);a=new WebSocket(v)}a.onopen=Y=>{const K=this.socket;K&&(K.onopen=K.onmessage=K.onerror=K.onclose=null),this.socket=a,this.connectHasBeenCalled=!1,xl.session&&console.log(this.id,this.socket.constructor.name,"connected to",this.socket.url),this.reconnectDelay=0,Bt.connected(!0),this.controller.sendJoin()},a.onmessage=Y=>{Bt.addNetworkTraffic("reflector_in",Y.data.length),a===this.socket&&this.receive(Y.data)},a.onerror=Y=>{xl.session&&console.log(this.id,a.constructor.name,"connection error"),this.connectHasBeenCalled=!1,this.controller.clearSyncReceiptTimeout()},a.onclose=a=>{this.socketClosed(a.code,a.reason)}}socketClosed(a,Y){this.controller.clearSyncReceiptTimeout();const K=1e3!==a&&a<4100,P=4110===a;P||1e3===a||this.reconnectDelay||setTimeout((()=>{this.connected||ce.showMessage(`Connection closed: ${a} ${Y}`,{level:K?"error":"fatal"})}),500),xl.session&&console.log(this.id,`${this.socket?this.socket.constructor.name+" closed":"closed before opening,"} with code: ${a} ${Y}`),Bt.connected(!1),P?this.connectRestricted=!0:this.connectBlocked=!0,this.disconnected(),K&&(xl.session&&console.log(this.id,`reconnecting in ${this.reconnectDelay} ms`),this.reconnectTimeout=globalThis.setTimeout((()=>{delete this.reconnectTimeout,this.connectToReflector()}),this.reconnectDelay),this.reconnectDelay=Math.min(3e4,Math.round((this.reconnectDelay+100)*(1+Math.random()))))}disconnected(){this.socket&&(this.socket=null,this.lastReceived=0,this.socketLastSent=0,this.stalledSince=0,this.connectHasBeenCalled=!1,this.controller.connectionInterrupted())}send(a){this.socketLastSent=Date.now(),this.socket.send(a),Bt.addNetworkTraffic("reflector_out",a.length)}receive(a){this.lastReceived=Date.now();const{id:Y,action:K,args:P}=JSON.parse(a);if(Y)try{this.controller.receive(K,P)}catch(a){this.closeConnectionWithError("receive",a)}else if("PONG"===K){if(xl.pong&&console.log("PONG after",Date.now()-P,"ms"),this.pongHook)try{this.pongHook(P)}catch(a){console.error(a)}}else console.warn("Unknown action",K)}dormantDisconnect(){this.connected&&(xl.session&&console.log(this.id,"dormant; disconnecting from reflector"),this.closeConnection(4110,"Going dormant"))}closeConnectionWithError(a,Y){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;console.error(Y),console.warn("closing socket"),K>=4100&&4110!==K&&(this.controller.leaving=()=>{}),this.closeConnection(K,`Error in ${a}: ${Y.message||Y}`)}closeConnection(a,Y){this.socket&&(this.socket.onclose=null,this.socket.close(a,Y),this.socketClosed(a,Y))}PULSE(a){this.connected&&(0===this.socket.bufferedAmount?(this.send(JSON.stringify({action:"PULSE"})),this.stalledSince=0):this.stalledSince&&a-this.stalledSince>500?console.log(`${this.id} Reflector connection stalled: ${this.socket.bufferedAmount} bytes unsent for ${a-this.stalledSince} ms`):this.stalledSince=Date.now())}keepAlive(a){0!==this.lastReceived&&(a-this.socketLastSent>25e3?this.PULSE(a):a-this.lastReceived>5e4?this.closeConnectionWithError("connection",Error("Reflector has gone away")):a-this.lastReceived>this.missingTickThreshold&&this.PULSE(a))}PING(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.connected&&this.send(JSON.stringify({action:"PING",args:a}))}}globalThis.setInterval((()=>{for(const a of Hl)a.connected&&a.vm&&a.connection.keepAlive(Date.now())}),100);const Ml=Symbol("hash"),Il=Symbol("key"),Fl=Symbol("url"),Nl=new Map;function Ua(a){return I.has("debug",a,!1)}function Da(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oa(a){return a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+3&-4,"=")}function Ba(a,Y){return Y.replace(/[\s\S]/g,(Y=>String.fromCharCode(Y.charCodeAt(0)^a.charCodeAt(0))))}class Aa{static async store(a,Y){let K=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("object"==typeof a&&(console.warn("Deprecated: Croquet.Data.store(sessionId, data) called without sessionId"),Y=a),hl.hasCurrent())throw Error("Croquet.Data.store() called from Model code");const{appId:P,persistentId:R,uploadEncrypted:v}=Na(a),H=A.random(32).toString(yi),M=`apps/${P}/${R}/data/%HASH%`,I=await v({path:M,content:Y,key:H,keep:K,debug:Ua("data"),what:"data"}),z=function(a){return a.replace(/.*\//,"")}(I);return new Aa(z,H,I)}static async fetch(a,Y){if("object"==typeof a&&(console.warn("Deprecated: Croquet.Data.fetch(sessionId, handle) called without sessionId"),Y=a),hl.hasCurrent())throw Error("Croquet.Data.fetch() called from Model code");const{downloadEncrypted:K}=Na(a),P=Y&&Y[Ml],R=Y&&Y[Il],v=Y&&Y[Fl];if("string"!=typeof P||"string"!=typeof R||"string"!=typeof v)throw Error("Croquet.Data.fetch() called with invalid handle");return K({url:v,key:R,debug:Ua("data"),what:"data"})}static hash(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64url";"function"==typeof a&&(a=Function.prototype.toString.call(a)),"string"==typeof a?a=(new TextEncoder).encode(a):a&&a.constructor===DataView?a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength):a&&a.constructor===ArrayBuffer?a=new Uint8Array(a):ArrayBuffer.isView(a)||(a=(new TextEncoder).encode(y(a)));const K=st(A.create(a));switch(Y){case"hex":return K.toString();case"base64":return K.toString(yi);case"base64url":return Da(K.toString(yi));default:throw Error(`Croquet.Data: unknown hash output "${Y}", expected "hex"/"base64"/"base64url"`)}}static fromId(a){const Y=a.slice(0,1);let K,P,R,v;switch(Y){case"0":K=a.slice(1,44),P=a.slice(44),R=`https://files.croquet.io/sessiondata/${K}`;break;case"1":K=a.slice(1,44),P=a.slice(44,87)+"=",v=a.slice(87),R=`https://files.croquet.io/apps/${v}/data/${K}`;break;case"2":K=a.slice(1,44),P=Oa(a.slice(44,87)),v=Ba(P,atob(Oa(a.slice(87)))),R=`https://files.croquet.io/apps/${v}/data/${K}`;break;case"3":P=Oa(a.slice(1,44)),R=Ba(P,atob(Oa(a.slice(44)))),K=R.slice(-43);break;default:throw Error(`Croquet.Data expected handle v0-v3 got v${Y}`)}return new this(K,P,R)}static toId(a){if(!a)return"";const Y=a[Ml],K=a[Il],P=a[Fl];if(P.slice(-43)!==Y)throw Error("Croquet Data: malformed URL");return`3${Da(K)}${Da(btoa(Ba(K,P)))}`}constructor(a,Y,K){const P=Nl.get(a);if(P)return Ua("data")&&console.log(`Croquet.Data: using cached handle for ${a}`),P;if(K.slice(-43)!==a)throw Error("Croquet Data: malformed URL");Object.defineProperty(this,Ml,{value:a}),Object.defineProperty(this,Il,{value:Y}),Object.defineProperty(this,Fl,{value:K}),Nl.set(a,this),Ua("data")&&console.log(`Croquet.Data: created new handle for ${a}`)}}const Ql={cls:Aa,write:a=>Aa.toId(a),read:a=>Aa.fromId(a)};let Jl=null,jl=null;class el extends Error{}function sl(){if(!globalThis.CroquetViewMath){globalThis.CroquetMath.random=()=>Jl.random(),globalThis.CroquetViewMath={...Math};for(const[a,Y]of Object.entries(globalThis.CroquetMath)){const K=Math[a];Math[a]=1===Y.length?a=>Jl?Y(a):K(a):(a,P)=>Jl?Y(a,P):K(a,P)}}if(!globalThis.CroquetViewDate){const P=globalThis.Date;let R=!1;function o(a,Y){return R||(R=!0,console.warn(new el(`${a} used in Model code`))),Y}function r(a,Y,K,R,v,H,M){const I=this instanceof r,z=[a,Y,K,R,v,H,M];if(z.length=arguments.length,Jl)switch(o(I?"new Date()":"Date()"),arguments.length){case 0:z.push(Jl.time);break;case 1:break;default:z[0]=P.UTC(...z),z.length=1}const F=new P(...z);return I?F:""+F}r.prototype=P.prototype,r.UTC=P.UTC,r.now=()=>Jl?o("Date.now()",Jl.time):P.now(),r.parse=function(){return Jl?o("Date.parse()",0):P.parse(...arguments)},globalThis.CroquetViewDate=P,globalThis.Date=r}}Object.defineProperty(el.prototype,"name",{value:"CroquetWarning"});const Ul={};function nl(a,Y){const{qPara:K,qArgs:P,qFn:R}=JSON.parse(atob(a.slice(1,-1))),v=JSON.stringify(K),H=Ul[v]||(Ul[v]=new Function(...K));return"number"==typeof R&&(P[R]=H),H.call(Y,...P).bind(Y)}function ol(a,Y){if(Jl)throw Error("VirtualMachine confusion");if(!(a instanceof hl))throw Error("not a VM: "+a);const K=Jl;try{Jl=a,globalThis.CROQUETVM=a,Y()}finally{Jl=K}}const Dl=["handleModelEventInModel","handleBundledEvents","publishFromModelOnly","handlePollForSnapshot","handleTuttiResult","handleTuttiDivergence","handleSnapshotVote","handlePersistVote","handleModelEventInView","noop"],El={};for(let a=0;a<Dl.length;a++)El[Dl[a]]=a;const Bl=new WeakMap;function cl(a){Bl.set(a,null)}class dl{random(){throw Error("Math.random() cannot be used in Model.evaluate()")}}class hl{static current(){return Jl||console.warn("VirtualMachine.current() called from outside the vm!"),Jl}static hasCurrent(){return!!Jl}static evaluate(a){if(Jl)return a();sl();const Y=Jl;try{return Jl=new dl,a()}finally{Jl=Y}}constructor(a,Y){sl(),jl={snapshot:I.has("debug","snapshot",!1),session:I.has("debug","session",!1)},cl(this),ol(this,(()=>{Nt(this,(()=>{if(this.modelsById={},this.modelsByName={},this.messages=new dn(((a,Y)=>a.before(Y))),this.subscriptions={},this.subscribers=new Map,this.views={},this._random=()=>{throw Error("You must not use random when applying state!")},this.id=a.id,this.time=0,this.seq=4294967280,this.externalTime=0,this.externalSeq=this.seq,this.futureSeq=0,this.lastSnapshotPoll=0,this.lastPersistencePoll=0,this.inPersistenceCoolOff=!1,this.persisted="",this.modelsId=0,this.controller=null,a.modelsById){const Y=wl.newOrRecycled(this).readVM(a,"vm");let K=[];for(const a of Object.keys(Y))a in this||"meta"===a?"_random"===a?this[a]=new E(null,{state:Y[a]}):"messages"===a?K=Y.messages:this[a]=Y[a]:console.warn(`Ignoring property snapshot.${a}`);for(const a of K)this.messages.add(a);for(const[a,Y]of Object.entries(this.subscriptions))for(const K of Y){const[Y]=K.split(".");let P=this.subscribers.get(Y);P||this.subscribers.set(Y,P=new Set),P.add(a)}}else this._random=new E(a.id,{state:!0}),this.addSubscription(this,"__VM__","__peers__",this.generateJoinExit),Y(this)}))}))}registerModel(a,Y){if(Jl!==this)throw Error("You can only create models from model code!");return Y||(Y="M"+ ++this.modelsId),this.modelsById[Y]=a,Y}deregisterModel(a){if(Jl!==this)throw Error("You can only destroy models from model code!");const Y=this.modelsById;delete this.modelsById[a];for(const[a,K]of Object.entries(this.modelsByName))Y===K&&delete this.modelsByName[a];this.messages.removeMany((Y=>Y.hasReceiver(a)))}lookUpModel(a){if("_"===a)return this;let Y=this.modelsById[a];if(Y)return Y;const[K,P,R]=a.match(/^([^#]+)#(.*)$/)||[];return Y=this.modelsById[P],Y&&Y.lookUp(R)}get(a){return this.modelsByName[a]}set(a,Y){if(Jl!==this)throw Error("You can only make a model well-known from model code!");this.modelsByName[a]=Y}noop(){}generateJoinExit(a){let{entered:Y,exited:K,count:P}=a;const R={};for(const a of Y){if(!Array.isArray(a))continue;const Y=a[1]||{};Y.region&&(Y.country=Y.region.slice(0,2),Y.region=Y.region.slice(2)),R[a[0]]={loc:Y}}if(Y=Y.map((a=>Array.isArray(a)?a[0]:a)),K=K.map((a=>Array.isArray(a)?a[0]:a)),Y.length===P){K=Object.keys(this.views);for(const a of K)this.views[a].extraConnections=0}if(0!==Y.length&&0!==K.length){const a=Y.filter((a=>K.includes(a)));if(0!==a.length&&(Y=Y.filter((Y=>!a.includes(Y))),K=K.filter((Y=>!a.includes(Y))),0===Y.length&&0===K.length))return}for(const a of K)if(this.views[a]){if(this.views[a].extraConnections){this.views[a].extraConnections--,jl.session&&console.log(`${this.id} @${this.time}#${this.seq} view ${a} closed extra connection`);continue}delete this.views[a],this.publishFromModelOnly(this.id,"view-exit",a)}else{const{time:Y,seq:K}=this;console.error(`${this.id} @${Y}#${K} view ${a} exited without being present - this should not happen`),Promise.resolve().then((()=>{this.controller.sendLog(`view-exit-mismatch @${Y}#${K} ${a} left without being present`)}))}for(const a of Y)this.views[a]?(jl.session&&console.log(`${this.id} @${this.time}#${this.seq} view ${a} opened another connection`),this.views[a].extraConnections=(this.views[a].extraConnections||0)+1):(this.views[a]=R[a]||{},this.publishFromModelOnly(this.id,"view-join",a));const v=Object.values(this.views).reduce(((a,Y)=>a+1+(Y.extraConnections||0)),0);if(P!==v){const{time:a,seq:Y}=this;console.error(`@${a}#${Y} view count mismatch (model: ${v}, reflector: ${P}) - this should not happen`),Promise.resolve().then((()=>{this.controller.sendLog(`view-exit-mismatch @${a}#${Y} connections model: ${v} reflector: ${P}`)}))}}scheduleExternalMessage(a){const Y=pl.fromState(a,this);if(Y.time<this.time)throw Error("past message from reflector "+a);const K=this.externalSeq+1>>>0;if(Y.seq!==K)throw Error(`External message error. Expected message #${K} got #${Y.seq}`);return this.externalTime=Y.time,this.externalSeq=Y.seq,Y.seq=2*Y.seq+1,this.verifyExternal(Y),this.messages.add(Y),Y}verifyExternal(a){if("_"!==a.receiver)throw Error(`invalid receiver in external message: ${a}`);if(!(a.selector in El))throw Error(`unexpected external message: ${a.selector}`)}futureSend(a,Y,K,P){if(a.every)return this.futureRepeat(a.every,Y,K,P);if(a<0)throw Error("attempt to send future message into the past");this.futureSeq=this.futureSeq+1>>>0;const R=new pl(this.time+a,2*this.futureSeq,Y,K,P);return this.messages.add(R),{time:R.time,seq:R.seq}}cancelFuture(a,Y){const K=this.messages;let P;if("number"==typeof Y.time){const{time:a,seq:R}=Y;P=K.removeOne((Y=>Y.time===a&&Y.seq===R))}else{if("*"===Y)return P=K.removeMany((Y=>Y.receiver===a.id)),P.length>0;{const R=this.asQFunc(a,Y,"cancelFuture message"),v=a.id;P=K.removeOne((a=>a.receiver===v&&a.selector===R||"_"===a.receiver&&"futureExecAndRepeat"===a.selector&&a.args[1]===v&&a.args[2]===R))}}return void 0!==P}futureRepeat(a,Y,K,P){this.futureSend(a,"_","futureExecAndRepeat",[a,Y,K,P])}futureExecAndRepeat(a,Y,K,P){const R=this.lookUpModel(Y);if(R){if("function"==typeof R[K])try{R[K](...P)}catch(a){yt(`future message ${R}.${K}`,a)}else{const a=nl(K,R);try{a(...P)}catch(Y){yt(`future message ${R} ${a}`,Y)}}this.futureRepeat(a,Y,K,P)}}future(a,Y,K,P){if(!this.lookUpModel(a.id))throw Error(`future send to unregistered model ${a}`);if(void 0===K){const K=this;return new Proxy(a,{get:(P,R)=>function(){for(var P=arguments.length,v=new Array(P),H=0;H<P;H++)v[H]=arguments[H];return K.future(a,Y,R,v)}})}const R=this.asQFunc(a,K,"future message");if("string"!=typeof R)throw Error(`future message to ${a} ${R} is not a string`);if("function"!=typeof a[R]&&R.indexOf(".")<0&&"{"!==R[0])throw Error(`future send to ${a} with unknown method ${R}()`);return this.futureSend(Y,a.id,R,P)}advanceTo(a,Y){if(Jl)throw Error("cannot advance time from model code");let K;for(;(K=this.messages.peek())&&K.time<=a;){const{time:a,seq:P}=K;if(a<this.time)throw Error("past message encountered: "+K);if(1&P&&(this.seq=this.seq+1>>>0,P/2>>>0!==this.seq))throw Error(`Sequence error: expected ${this.seq} got ${P/2>>>0} in ${K}`);if(this.messages.poll(),this.time=K.time,K.executeOn(this),globalThis.CroquetViewDate.now()>=Y)return!1}return this.time=a,!0}asQFunc(a,Y){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"subscription handler";if("string"==typeof Y)return Y;if("function"==typeof Y){if(a[Y.name]===Y)return Y.name;let P=a;for(;null!==P;){for(const[a,K]of Object.entries(Object.getOwnPropertyDescriptors(P)))if(K.value===Y)return a;P=Object.getPrototypeOf(P)}ft(`${K} is not a method of ${a}: ${Y}\n`,{only:"once"});const R=/^\(?([a-z][a-z0-9]*)?\)? *=> *this\.([a-z][a-z0-9]*) *\( *([a-z][a-z0-9]*)? *\) *$/i,v=Y.toString().match(R);return!v||v[3]&&v[3]!==v[1]?function(a,Y){"function"==typeof a&&(Y=a,a={});const K=Object.keys(a).concat(["return "+Y]),P=Object.values(a),R={qPara:K,qArgs:P},v=P.indexOf(Y);return v>=0&&(P[v]=K[v],R.qFn=v),`{${btoa(JSON.stringify(R))}}`}(Y):v[2]}return null}addSubscription(a,Y,K,P){if(Jl!==this)throw Error("Cannot add a model subscription from outside model code");const R=this.asQFunc(a,P);if("string"!=typeof R)throw Error(`Subscription handler for "${K}" must be a method name`);if(R.indexOf(".")<0&&"function"!=typeof a[R]&&"{"!==R[0])throw Error(`Subscriber method for "${K}" not found: ${a}.${R}()`);const v=Y+":"+K,H=a===this?"_":a.id,M=H+"."+R;if(this.subscriptions[v]){if(-1!==this.subscriptions[v].indexOf(M))throw Error(`${a}.${R} already subscribed to ${K}`)}else this.subscriptions[v]=[];this.subscriptions[v].push(M);let I=this.subscribers.get(H);I||this.subscribers.set(H,I=new Set),I.add(v)}removeSubscription(a,Y,K){let P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";if(Jl!==this)throw Error("Cannot remove a model subscription from outside model code");const R=Y+":"+K,v=this.subscriptions[R];if(v){const Y=a.id+".";if("*"===P){for(let a=v.length-1;a>=0;a--)v[a].startsWith(Y)&&v.splice(a,1);0===v.length&&delete this.subscriptions[R]}else{const H=this.asQFunc(a,P);if("string"!=typeof H)throw Error(`Invalid unsubscribe args for "${K}" in ${a}: ${P}`);const M=Y+H,I=v.indexOf(M);if(-1!==I&&(v.splice(I,1),0===v.length&&delete this.subscriptions[R]),v.find((a=>a.startsWith(Y))))return}const H=this.subscribers.get(a.id);H.delete(R),0===H.size&&this.subscribers.delete(a.id)}}removeAllSubscriptionsFor(a){const Y=this.subscribers.get(a.id);if(Y){const K=a.id+".";for(const a of Y){const Y=this.subscriptions[a];for(let a=Y.length-1;a>=0;a--)Y[a].startsWith(K)&&Y.splice(a,1);0===Y.length&&delete this.subscriptions[a]}this.subscribers.delete(a.id)}}publishFromModel(a,Y,K){if(Jl!==this)throw Error("Cannot publish a model event from outside model code");const P=Y.endsWith("#reflected");P&&(Y=Y.slice(0,Y.length-10));const R=a+":"+Y;this.handleModelEventInModel(R,K,P),this.handleModelEventInView(R,K)}publishFromModelOnly(a,Y,K){if(Jl!==this)throw Error("Cannot publish a model event from outside model code");const P=a+":"+Y;this.handleModelEventInModel(P,K)}publishFromView(a,Y,K){if(Jl)throw Error("Cannot publish a view event from model code");const P=a+":"+Y;this.handleViewEventInModel(P,K),this.handleViewEventInView(P,K)}handleBundledEvents(a){for(const Y of a){const a=pl.fromState(Y,this);this.verifyExternal(a),a.executeOn(this,!0)}}handleModelEventInModel(a,Y){let K=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Jl!==this)throw Error("handleModelEventInModel called from outside model code");if(K){if(!0!==this.controller.synced)return;const K=a+"#__vote",P=a+"#divergence",R=!!he.subscriptions[K],v=!!this.subscriptions[a],H=!!this.subscriptions[P];R&&H&&console.log(`divergence subscription for ${a} overridden by vote subscription`);const M=v?new pl(this.time,0,"_","handleModelEventInModel",[a,Y]):null;let I;I=R?["handleModelEventInView",K]:["handleTuttiDivergence",P],Promise.resolve().then((()=>this.controller.sendTutti({time:this.time,topic:a,data:Y,firstMessage:M,wantsVote:R,tallyTarget:I})))}else if(this.subscriptions[a]){const K=this.subscriptions[a],P=K.slice();for(let R=0;R<P.length;R++){const v=P[R];if(v!==K[R]&&!K.includes(v))continue;const[H,...M]=v.split("."),I=M.join("."),z=this.lookUpModel(H);if(z)if("{"!==I[0])if(I.indexOf(".")>=0){const K=I.indexOf("."),P=I.slice(0,K),R=I.slice(K+1);try{z.call(P,R,Y)}catch(Y){yt(`event ${a} ${z}.call(${JSON.stringify(P)}, ${JSON.stringify(R)})`,Y)}}else if("function"==typeof z[I])try{z[I](Y)}catch(Y){yt(`event ${a} ${z}.${I}()`,Y)}else yt(`event ${a} ${z}.${I}(): method not found`);else{const K=nl(I,z);try{K(Y)}catch(Y){yt(`event ${a} ${z} ${K}`,Y)}}else ft(`event ${a} .${I}(): subscriber not found`)}}}handleViewEventInModel(a,Y){if(this.subscriptions[a]){const K=[a];void 0!==Y&&K.push(Y);const P=new pl(this.time,0,"_","handleModelEventInModel",K);this.controller.sendMessage(P)}}handleModelEventInView(a,Y){he.handleEvent(a,Y,(a=>function(a){if(!Jl)throw Error("VirtualMachine confusion");const Y=Jl;try{Jl=null,a()}finally{Jl=Y}}((()=>Ft(this,a,!0)))))}handleViewEventInView(a,Y){he.handleEvent(a,Y)}handleTuttiDivergence(a,Y){if(this.subscriptions[a])this.handleModelEventInModel(a,Y);else{const K=a.split(":").slice(-1)[0];console.warn(`uncaptured divergence in ${K}:`,Y)}}processModelViewEvents(a){if(Jl)throw Error("cannot process view events in model code");return Ft(this,(()=>he.processFrameEvents(a,!!this.controller.synced)))}handlePollForSnapshot(){const a=this.time,Y=a-this.lastSnapshotPoll;Y<5e3?console.log(`rejecting snapshot poll ${Y}ms after previous`):(this.lastSnapshotPoll=a,this.controller.handlePollForSnapshot(a))}handleTuttiResult(a){this.controller.handleTuttiResult(a)}handleSnapshotVote(a){this.controller.handleSnapshotVote(a)}handlePersistVote(a){this.controller.handlePersistVote(a)}snapshot(){return yl.newOrRecycled(this).snapshot(this,"_")}getSummaryHash(){return y((new bl).getHash(this))}persist(a,Y){this.controller&&"no.appId"===this.controller.sessionSpec.appId&&console.warn("Croquet: appId should be provided in Session.join() to not overwrite another apps's persistent data");const K=Bt.begin("snapshot"),P="function"==typeof Y?Y.call(a):Y;if("object"!=typeof P)throw Error(`Croquet: persistSession() can only persist objects (got ${typeof P})`);const R=y(P),v=Aa.hash(R),H=Bt.end("snapshot")-K,M=this.persisted===v,I=this.time;var z;if(jl.snapshot&&console.log(`${this.id} persistent data @${I} collected, stringified and hashed in ${Math.ceil(H)}ms${M?" (unchanged, ignoring)":""}`),!M)if(this,z={persistTime:I,persistentString:R,persistentHash:v,ms:H},Bl.set(this,z),this.persisted=v,this.inPersistenceCoolOff)jl.snapshot&&console.log(`${this.id} persistence poll postponed by cooloff`);else{const a=this.lastPersistencePoll?this.lastPersistencePoll+25e3-this.time:0;a>0?(jl.snapshot&&console.log(`${this.id} postponing persistence poll by ${a}ms`),this.futureSend(a,"_","triggerPersistencePoll",[]),this.inPersistenceCoolOff=!0):this.triggerPersistencePoll()}}triggerPersistencePoll(){this.inPersistenceCoolOff=!1,this.lastPersistencePoll=this.controller?this.time:0;const a=(this,Bl.get(this));if(!a)return;const{persistTime:Y,persistentString:K,persistentHash:P,ms:R}=a;if(cl(this),this.controller&&this.controller.synced){jl.snapshot&&console.log(`${this.id} asking controller to poll for persistence @${Y}`);const a=this.time;Promise.resolve().then((()=>this.controller.pollForPersist(a,Y,K,P,R)))}}random(){if(Jl!==this)throw Error("synchronized random accessed from outside the model");return this._random()}randomID(){if(Jl!==this)throw Error("synchronized random accessed from outside the model");let a="";for(let Y=0;Y<4;Y++)a+=(this._random.int32()>>>0).toString(16).padStart(8,"0");return a}toString(){return`VirtualMachine[${this.id}]`}[Symbol.toPrimitive](){return this.toString()}}function ul(a,Y,K){let P;if("_"===a){const a=El[Y];"number"==typeof a&&(P=a.toString(36))}if(void 0===P&&(P=`${a}>${Y}`),K.length>0){const a=Zl.newOrRecycled();P+=JSON.stringify(a.encode(K))}return P}function ml(a,Y){return(Y-a|0)>=0}class pl{constructor(a,Y,K,P,R){this.time=a,this.seq=Y,this.receiver=K,this.selector=P,this.args=R}before(a){return this.time!==a.time?this.time<a.time:this.isExternal()!==a.isExternal()?a.isExternal():this.isExternal()?ml(this.externalSeq,a.externalSeq):ml(this.internalSeq,a.internalSeq)}hasReceiver(a){return this.receiver===a}isExternal(){return 1&this.seq}get externalSeq(){return this.seq/2>>>0}set externalSeq(a){this.seq=2*a+1}get internalSeq(){return this.seq/2>>>0}set internalSeq(a){this.seq=2*a}asState(){return[this.time,this.seq,ul(this.receiver,this.selector,this.args)]}static fromState(a,Y){const[K,P,R]=a,{receiver:v,selector:H,args:M}=function(a,Y){let K,P,R;if(1===a.length||"["===a[1]){const Y=parseInt(a[0],36);K="_",P=Dl[Y],R=a.slice(1)}else{const Y=a.indexOf(">");let v=a.indexOf("[");-1===v&&(v=a.length),K=a.slice(0,Y),P=a.slice(Y+1,v),R=a.slice(v)}let v=[];return R&&(v=Xl.newOrRecycled(Y).decode(JSON.parse(R))),{receiver:K,selector:P,args:v}}(R,Y);return new pl(K,P,v,H,M)}executeOn(a){const Y=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?a=>a():Y=>ol(a,(()=>Nt(a,Y))),{receiver:K,selector:P,args:R}=this,v=a.lookUpModel(K);if(v)if("{"===P[0]){const a=nl(P,v);Y((()=>{try{a(...R)}catch(Y){yt(`${this.shortString()} ${a}`,Y)}}))}else P.indexOf(".")>=0?Y((()=>{const a=P.indexOf("."),Y=P.slice(0,a),K=P.slice(a+1);try{v.call(Y,K,...R)}catch(a){yt(`${this.shortString()} ${v}.call(${JSON.stringify(Y)}, ${JSON.stringify(K)})`,a)}})):"function"!=typeof v[P]?ft(`${this.shortString()} ${v}.${P}(): method not found`):Y((()=>{try{v[P](...R)}catch(a){yt(`${this.shortString()} ${v}.${P}()`,a)}}));else ft(`${this.shortString()} ${P}(): receiver not found`)}shortString(){return(this.isExternal()?"External":"Future")+"Message"}toString(){const{receiver:a,selector:Y,args:K}=this,P=this.isExternal(),R=P?this.externalSeq:this.internalSeq;return`${P?"External":"Future"}Message[${this.time}${":#"[+P]}${R} ${a}.${Y}(${K.map(JSON.stringify).join(", ")})]`}[Symbol.toPrimitive](){return this.toString()}}const Ol=(()=>{const a=new ArrayBuffer(8),Y=new DataView(a);return a=>(Y.setFloat64(0,a,!0),Y.getInt32(0,!0)+Y.getInt32(4,!0))})();class bl{constructor(){this.done=new Set,this.todo=[],this.hashers=new Map,this.addHasher("Teatime:Message",pl),this.addHasher("Teatime:Data",Ql);for(const[a,Y]of kl.allClassTypes())this.addHasher(a,Y)}addHasher(a,Y){const{cls:K,write:P}=Object.getPrototypeOf(Y)===Object.prototype?Y:{cls:Y,write:a=>({...a})};this.hashers.set(K,(a=>this.hashStructure(a,P(a))))}getHash(a){this.hashState={oC:0,mC:0,nanC:0,infC:0,zC:0,nC:0,nH:0,sC:0,sL:0,fC:0};for(const[Y,K]of Object.entries(a))if("controller"!==Y&&"meta"!==Y)if("_random"===Y)this.hash(K.state(),!1);else if("messages"===Y){const a=K.asArray();(this.hashState.fC=a.length)&&this.hash(a,!1)}else this.hashEntry(Y,K);return this.hashDeferred(),this.hashState}hashDeferred(){let a=0;for(;a<this.todo.length;){const{key:Y,value:K}=this.todo[a++];this.hashEntry(Y,K,!1)}this.todo.length=0}hash(a){let Y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof a){case"number":return void(Number.isNaN(a)?this.hashState.nanC++:Number.isFinite(a)?0===a?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=Ol(a)):this.hashState.infC++);case"string":return this.hashState.sC++,void(this.hashState.sL+=a.length);case"boolean":case"undefined":return;case"bigint":if(0n===a)this.hashState.zC++;else{this.hashState.nC++;const Y=a<0?-1n:0n;for(;a!==Y;)this.hashState.nH+=Number(0xFFFFFFFFn&a),a>>=32n}return;default:{if(this.done.has(a))return;if(null===a)return;if(this.hashers.has(a.constructor))return void this.hashers.get(a.constructor)(a);const K=Object.prototype.toString.call(a).slice(8,-1);if(this.hashers.has(K))return void this.hashers.get(K)(a);switch(K){case"Array":return void this.hashArray(a,Y);case"ArrayBuffer":return void this.hashIntArray(new Uint8Array(a));case"Set":return void this.hashStructure(a,[...a]);case"Map":return void this.hashStructure(a,[...a],!1);case"DataView":return void this.hashIntArray(new Uint8Array(a.buffer,a.byteOffset,a.byteLength));case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":return void this.hashIntArray(a);case"Float32Array":case"Float64Array":return void this.hashArray(a,!1);case"Object":a instanceof kl?this.hashModel(a):a.constructor===Object&&this.hashObject(a,Y)}}}}hashModel(a){this.hashState.mC++,this.done.add(a);for(const[Y,K]of Object.entries(a))"__realm"!==Y&&void 0!==K&&this.hashEntry(Y,K)}hashObject(a){let Y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.hashState.oC++,this.done.add(a);for(const[K,P]of Object.entries(a))void 0!==P&&this.hashEntry(K,P,Y)}hashArray(a){let Y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.done.add(a);for(let K=0;K<a.length;K++)this.hashEntry(K,a[K],Y)}hashIntArray(a){this.done.add(a);for(let Y=0;Y<a.length;Y++){const K=a[Y];0===K?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=K)}}hashStructure(a,Y){let K=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];void 0!==Y&&(this.done.add(a),this.hash(Y,K))}hashEntry(a,Y){let K=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"$"!==a[0]&&(K&&"object"==typeof Y?this.todo.push({key:a,value:Y}):this.hash(Y,K))}}class yl{static newOrRecycled(a){let Y=this.reusableInstance;return Y?(Y.vm=a,Y.nextRef=1,Y.refs=new Map,Y.todo=[]):Y=this.reusableInstance=new this(a),Y}static get reusableInstance(){return this[this.name+"-instance"]}static set reusableInstance(a){this[this.name+"-instance"]=a}static resetInstance(){this.reusableInstance=null}constructor(a){this.vm=a,this.nextRef=1,this.refs=new Map,this.todo=[],this.writers=new Map,this.addWriter("Teatime:Message",pl),this.addWriter("Teatime:Data",Ql);for(const[a,Y]of kl.allClassTypes())this.addWriter(a,Y);this.okayToIgnore={};for(const a of kl.allClasses())if(Object.prototype.hasOwnProperty.call(a,"okayToIgnore")){const Y=a.okayToIgnore();if(!Array.isArray(Y))throw new Error("okayToIgnore() must return an array");for(const a of Y){if("$"!==a[0])throw Error(`okayToIgnore: ignored prop "${a}" must start with '$'`);this.okayToIgnore[a]=!0}}}addWriter(a,Y){const{cls:K,write:P}=Object.getPrototypeOf(Y)===Object.prototype?Y:{cls:Y,write:a=>({...a})};this.writers.set(K,((Y,K)=>this.writeAs(a,Y,P(Y),K)))}snapshot(a){const Y={_random:a._random.state(),messages:this.write(a.messages.asArray(),"vm.messages"),subscribers:void 0,controller:void 0};for(const[K,P]of Object.entries(a))K in Y||this.writeInto(Y,K,P,`vm.${K}`);return this.writeDeferred(),Y}writeDeferred(){let a=0;for(;a<this.todo.length;){const{state:Y,key:K,value:P,path:R}=this.todo[a++];this.writeInto(Y,K,P,R,!1)}this.todo.length=0}write(a,Y){let K=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(typeof a){case"number":return Object.is(a,-0)?{$class:"NegZero"}:Number.isFinite(a)?a:Number.isNaN(a)?{$class:"NaN"}:{$class:"Infinity",$value:Math.sign(a)};case"string":case"boolean":return a;case"undefined":return{$class:"Undefined"};case"bigint":return{$class:"BigInt",$value:a.toString()};default:{if(this.refs.has(a))return this.writeRef(a);if(null===a)return a;if(this.writers.has(a.constructor))return this.writers.get(a.constructor)(a,Y);const P=Object.prototype.toString.call(a).slice(8,-1);if(this.writers.has(P))return this.writers.get(P)(a,Y);switch(P){case"Array":return this.writeArray(a,Y,K);case"ArrayBuffer":return this.writeArrayBuffer(a);case"Set":return this.writeAs(P,a,[...a],Y);case"Map":return this.writeAs(P,a,[...a].flat(),Y);case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return this.writeTypedArray(P,a);case"Object":if(a instanceof kl)return this.writeModel(a,Y);if(a.constructor===Object||"function"!=typeof a.constructor)return this.writeObject(a,Y,K);throw console.error(`Croquet: unknown class at ${Y}:`,a),Error(`Croquet: class not registered in Model.types(): ${a.constructor.name}`);default:throw console.error(`Croquet: unsupported property at ${Y}:`,a),Error(`Croquet: serialization of ${P}s is not supported`)}}}}writeModel(a,Y){const K={};this.refs.set(a,K);try{K.$model=kl.classToID(a.constructor)}catch(K){throw console.error(`unregistered model class at ${Y}:`,a),K}for(const P of Object.keys(a).sort()){if("__realm"===P)continue;const R=a[P];("number"==typeof R&&Number.isFinite(R)&&!Object.is(R,-0)||"string"==typeof R||"boolean"==typeof R)&&"$"!==P[0]?K[P]=R:this.writeInto(K,P,R,Y)}return K}writeObject(a,Y){let K=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const P={};this.refs.set(a,P);for(const R of Object.keys(a).sort()){const v=a[R];("number"==typeof v&&Number.isFinite(v)&&!Object.is(v,-0)||"string"==typeof v||"boolean"==typeof v)&&"$"!==R[0]?P[R]=v:this.writeInto(P,R,v,Y,K)}return P}writeArray(a,Y){let K=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const P=[];this.refs.set(a,P);for(let R=0;R<a.length;R++){const v=a[R];"number"==typeof v&&Number.isFinite(v)&&!Object.is(v,-0)||"string"==typeof v||"boolean"==typeof v?P[R]=v:this.writeInto(P,R,v,Y,K)}return P}writeArrayBuffer(a){const Y={$class:"ArrayBuffer",$value:Ll(a)};return this.refs.set(a,Y),Y}writeTypedArray(a,Y){const K={$class:a,$value:[this.writeArrayBuffer(Y.buffer),Y.byteOffset,"DataView"===a?Y.byteLength:Y.length]};return this.refs.set(Y,K),K}writeAs(a,Y,K,P){if(void 0===K)return K;const R={$class:a};this.refs.set(Y,R);const v=this.write(K,P,!1);return"object"!=typeof v||v.$class||Array.isArray(v)?R.$value=v:Object.assign(R,v),R}writeRef(a){const Y=this.refs.get(a);if("object"!=typeof Y)throw Error("Non-object in refs: "+a);return Array.isArray(Y)&&(Y.toJSON=function(){return{$id:this.$id,$class:"Array",$value:[...this]}}),{$ref:Y.$id||(Y.$id=this.nextRef++)}}writeInto(a,Y,K,P){let R=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if("$"===Y[0])return void(this.okayToIgnore[Y]||(ft(`snapshot: ignoring property ${Y} (declare as okayToIgnore to suppress warning)`,{only:"once"}),this.okayToIgnore[Y]=!0));if(R&&"object"==typeof K)return void this.todo.push({state:a,key:Y,value:K,path:P});const v=P+("string"==typeof Y&&Y.match(/^[_a-z][_a-z0-9]*$/i)?`.${Y}`:`[${JSON.stringify(Y)}]`),H=this.write(K,v);void 0!==H&&(a[Y]=H)}}const _l=Symbol("croquet:unresolved");class wl{static newOrRecycled(a){let Y=this.reusableInstance;return Y?(Y.vm=a,Y.refs=new Map,Y.todo=[],Y.unresolved=[],Y.postprocess=[]):Y=this.reusableInstance=new this(a),Y}static get reusableInstance(){return this[this.name+"-instance"]}static set reusableInstance(a){this[this.name+"-instance"]=a}static resetInstance(){this.reusableInstance=null}constructor(a){this.vm=a,this.refs=new Map,this.todo=[],this.unresolved=[],this.postprocess=[],this.readers=new Map,this.addReader("Teatime:Message",pl),this.addReader("Teatime:Data",Ql),this.readers.set("Undefined",(()=>{})),this.readers.set("NaN",(()=>NaN)),this.readers.set("Infinity",(a=>a*(1/0))),this.readers.set("NegZero",(()=>-0)),this.readers.set("BigInt",(a=>BigInt(a))),this.readers.set("ArrayBuffer",(a=>function(a){const Y=globalThis.atob(a),K=Y.length,P=new Uint8Array(K);for(let a=0;a<K;a++)P[a]=Y.charCodeAt(a);return P.buffer}(a))),this.readers.set("DataView",(a=>new DataView(...a))),this.readers.set("Int8Array",(a=>new Int8Array(...a))),this.readers.set("Uint8Array",(a=>new Uint8Array(...a))),this.readers.set("Uint8ClampedArray",(a=>new Uint8ClampedArray(...a))),this.readers.set("Int16Array",(a=>new Int16Array(...a))),this.readers.set("Uint16Array",(a=>new Uint16Array(...a))),this.readers.set("Int32Array",(a=>new Int32Array(...a))),this.readers.set("Uint32Array",(a=>new Uint32Array(...a))),this.readers.set("Float32Array",(a=>new Float32Array(...a))),this.readers.set("Float64Array",(a=>new Float64Array(...a)));for(const[a,Y]of kl.allClassTypes())this.addReader(a,Y)}addReader(a,Y){const K="object"==typeof Y?Y.read:a=>Object.assign(Object.create(Y.prototype),a);this.readers.set(a,K)}readVM(a,Y){if("vm"!==Y)throw Error("VirtualMachine must be root object");const K=this.read(a,Y,!1);return this.readDeferred(),this.resolveRefs(),this.doPostprocess(),K}readDeferred(){let a=0;for(;a<this.todo.length;){const{object:Y,key:K,value:P,path:R}=this.todo[a++];this.readInto(Y,K,P,R,!1)}this.todo.length=0}resolveRefs(){for(const{object:a,key:Y,ref:K,path:P}of this.unresolved){if(!this.refs.has(K))throw Error(`Unresolved ref: ${K} at ${P}[${JSON.stringify(Y)}]`);a[Y]=this.refs.get(K)}this.unresolved.length=0,this.refs.clear()}doPostprocess(){for(const a of this.postprocess)a();this.postprocess.length=0}read(a,Y){let K=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(typeof a){case"number":case"string":case"boolean":return a;default:{const P=Object.prototype.toString.call(a).slice(8,-1);switch(P){case"Array":return this.readArray(a,Y,K);case"Null":return null;case"Object":{const{$class:P,$model:R,$ref:v}=a;if(v)throw Error("refs should have been handled in readInto()");return R?this.readModel(a,Y):P?this.readAs(P,a,Y):this.readObject(Object,a,Y,K)}default:throw Error(`Don't know how to deserialize ${P} at ${Y}`)}}}}readModel(a,Y){const K=kl.instantiateClassID(a.$model,a.id);a.$id&&this.refs.set(a.$id,K);for(const[P,R]of Object.entries(a))"id"!==P&&"$"!==P[0]&&this.readInto(K,P,R,Y);return K}readObject(a,Y,K){let P=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const R=new a;Y.$id&&this.refs.set(Y.$id,R);for(const[a,v]of Object.entries(Y))"$"!==a[0]&&this.readInto(R,a,v,K,P);return R}readArray(a,Y){let K=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const P=[];a.$id&&this.refs.set(a.$id,P);for(let R=0;R<a.length;R++)void 0!==a[R]&&this.readInto(P,R,a[R],Y,K);return P}readAsArray(a,Y){let K=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const P=a.$value;return a.$id&&(P.$id=a.$id),this.readArray(P,Y,K)}readAsSet(a,Y){const K=new Set;a.$id&&this.refs.set(a.$id,K);const P=this.unresolved.length,R=this.read(a.$value,Y,!1),o=()=>{for(const a of R)K.add(a)};return this.unresolved.length===P?o():this.postprocess.push(o),K}readAsMap(a,Y){const K=new Map;a.$id&&this.refs.set(a.$id,K);const P=this.unresolved.length,R=this.read(a.$value,Y,!1),o=()=>{for(let a=0;a<R.length;a+=2)K.set(R[a],R[a+1])};return this.unresolved.length===P?o():this.postprocess.push(o),K}readAsClass(a,Y,K){let P={};const R=new Map;if("$value"in Y)P=this.read(Y.$value,K,!1);else for(const[a,v]of Object.entries(Y)){if("$"===a[0])continue;const Y=v&&v.$ref;Y?this.refs.has(Y)?P[a]=this.refs.get(Y):(P[a]=_l,R.set(Y,a)):this.readInto(P,a,v,K,!1)}const v=this.readers.get(a)(P,K);v||"Undefined"===a||"BigInt"===a||"NaN"===a||"NegZero"===a||console.warn(`Reading "${a}" returned ${v} at ${K}`),Y.$id&&this.refs.set(Y.$id,v);for(const[a,Y]of R.entries())this.unresolved.push({object:v,key:Y,ref:a,path:K});return v}readAs(a,Y,K){switch(a){case"Array":return this.readAsArray(Y,K);case"Set":return this.readAsSet(Y,K);case"Map":return this.readAsMap(Y,K);default:return this.readAsClass(a,Y,K)}}readRef(a,Y,K,P){if(!K||!K.$ref)return!1;const R=K.$ref;return this.refs.has(R)?a[Y]=this.refs.get(R):(a[Y]=_l,this.unresolved.push({object:a,key:Y,ref:R,path:P})),!0}readInto(a,Y,K,P){let R=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.readRef(a,Y,K,P))return;if(R&&"object"==typeof K)return void this.todo.push({object:a,key:Y,value:K,path:P});const v=P+("string"==typeof Y&&Y.match(/^[_a-z][_a-z0-9]*$/i)?`.${Y}`:`[${JSON.stringify(Y)}]`);a[Y]=this.read(K,v)}}class Zl extends yl{encode(a){const Y=this.writeArray(a,"args");return this.writeDeferred(),Y}writeModel(a){return{$ref:a.id}}}class Xl extends wl{decode(a){const Y=this.readArray(a,"args");return this.readDeferred(),this.resolveRefs(),this.doPostprocess(),Y}resolveRefs(){for(const{object:a,key:Y,ref:K,path:P}of this.unresolved)if(this.refs.has(K))a[Y]=this.refs.get(K);else{const R=this.vm.lookUpModel(K);if(!R)throw Error(`Unresolved ref: ${K} at ${P}[${JSON.stringify(Y)}]`);a[Y]=R}}}function vl(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;const R=Object.values(a).filter((a=>{const Y=Object.prototype.toString.call(a).slice(8,-1);return("Object"===Y||"Array"===Y)&&!P.has(a)}));for(const a of R){P.add(a);const R=Y+"."+a.constructor.name;if(K[R]){if(K[R]!==a.constructor)throw new Error("Class with name "+R+" already gathered, but new one has different identity")}else K[R]=a.constructor}for(const a of R)vl(a,Y,K,P)}function Ll(a){const Y=new Uint8Array(a),K=[];for(let a=0;a<Y.byteLength;a+=4096){const P=Y.subarray(a,a+4096);K.push(String.fromCharCode.apply(null,P))}return globalThis.btoa(K.join(""))}const Al=I.has("debug","classes",!1);let $l=Symbol("SECRET");const ql=new WeakSet;class kl{static create(a,Y,K){if(!Vl(this))throw Error(`Model class "${this.name}" not registered`);const P=zt(),R=new this($l);return Object.defineProperty(R,"__realm",{value:P}),Object.defineProperty(R,"id",{value:P.register(R),enumerable:!0}),ql.add(R),"string"==typeof Y&&(console.warn(`Croquet: Model.create(..., "${Y}") with a well-known name argument is deprecated!`),R.beWellKnownAs(Y),Y=void 0),K&&R.beWellKnownAs(K),R.init(a,Y),ql.has(R)&&(ql.delete(R),Object.getPrototypeOf(this)!==kl&&console.warn(`${R} did not call super.init(options)`)),R}static createNoInit(a){const Y=zt(),K=new this($l);return Object.defineProperty(K,"__realm",{value:Y}),Object.defineProperty(K,"id",{value:a,enumerable:!0}),K}static allowConstructors(){$l=void 0,console.warn("disabling error reporting for Model constructors")}static register(a){return a||(a=this.name,console.warn(`Deprecation warning: ${this.name}.register(classId) called without classId. See https://croquet.io/docs/croquet/Model.html#.register`)),wl.resetInstance(),yl.resetInstance(),Zl.resetInstance(),Xl.resetInstance(),function(a,Y){const K=S(a),P=V(`${Y}:${K}`);rt.push(P),W()&&P.then((a=>{ot[a].what=`Class ${Y}`}))}(this,a),function(a,Y){const K=tr[Y];if(K&&K!==a)throw Error(`Registering model class ${a.name} failed, id "${Y}" already used by ${K.name}`);Vl(a)?Al&&!K&&console.warn(`ignoring re-exported model class ${Y}`):(Al&&console.log(`registering model class ${Y}`),a[nr]=Y),tr[Y]=a}(this,a),kl.lastRegistered=this,this}static wellKnownModel(a){if(!hl.hasCurrent())throw Error("static Model.wellKnownModel() called from outside model");return hl.current().get(a)}static evaluate(a){return hl.evaluate(a)}static types(){return{}}static okayToIgnore(){return[]}static classToID(a){return function(a){if(Vl(a))return a[nr];const Y=a.name||"ClassName";throw Error(`Model class not registered, did you call ${Y}.register("${Y}")?`)}(a)}static classFromID(a){return Pl(a)}static allClasses(){return Cl()}static allClassTypes(){return function(){const a={};for(const Y of Cl())Object.assign(a,Y.types());return Object.entries(a)}()}static instantiateClassID(a,Y){return Pl(a).createNoInit(Y)}constructor(a){if(a!==$l)throw Error('You must create Croquet Models using create() not "new"!')}init(a,Y){ql.delete(this)}destroy(){zt().unsubscribeAll(this),zt().deregister(this)}publish(a,Y,K){this.__realm||this.__realmError(),this.__realm.publish(Y,K,a)}subscribe(a,Y,K){return this.__realm||this.__realmError(),this.__realm.subscribe(this,a,Y,K)}unsubscribe(a,Y){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";this.__realm||this.__realmError(),this.__realm.unsubscribe(this,a,Y,K)}unsubscribeAll(){this.__realm||this.__realmError(),this.__realm.unsubscribeAll(this)}__realmError(){if(!this.id)throw Error(`${this} has no ID, did you call super.init(options)?`)}future(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,Y=arguments.length>1?arguments[1]:void 0;this.__realm||this.__realmError();for(var K=arguments.length,P=new Array(K>2?K-2:0),R=2;R<K;R++)P[R-2]=arguments[R];return this.__realm.future(this,a,Y,P)}cancelFuture(a){return this.__realm||this.__realmError(),this.__realm.cancelFuture(this,a)}random(){return zt().random()}now(){return zt().now()}beWellKnownAs(a){zt().vm.set(a,this)}getModel(a){return this.__realm.vm.lookUpModel(a)}wellKnownModel(a){return this.__realm.vm.get(a)}modelOnly(a){if(hl.current()===this.__realm.vm)return!0;const Y=Error(a||`${this}.modelOnly() called from outside a model!`);throw yt("view code",Y),Y}get sessionId(){return this.__realm.vm.id}get viewCount(){return Object.keys(this.__realm.vm.views).length}persistSession(a){if(this!==this.wellKnownModel("modelRoot"))throw Error("persistSession() must only be called on the root model");this.__realm.vm.persist(this,a)}[Symbol.toPrimitive](){return`${this.constructor[nr]||this.constructor.name}#${this.id}`}}const tr={},nr=Symbol("CLASS_ID");function Cl(){return Object.values(tr)}function Vl(a){return Object.prototype.hasOwnProperty.call(a,nr)}function Pl(a){if(tr[a])return tr[a];throw Error(`Model class "${a}" in snapshot, but not registered?`)}kl[nr]="Croquet.Model",tr["Croquet.Model"]=kl;class Rl{static displayStatus(a,Y){return bt(a,Y)}static displayWarning(a,Y){return ft(a,Y)}static displayError(a,Y){return function(a){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a&&ce.showMessage(a,{...Y,level:"error"})}(a,Y)}constructor(a){"object"==typeof a&&"__realm"in a||console.warn("Croquet: argument to View constructor needs to be a Model");let Y=zt("");Y&&Y.isViewRealm()||(Y=Ft(a.__realm.vm,(()=>zt()),!0)),Object.defineProperty(this,"realm",{value:Y}),Object.defineProperty(this,"id",{value:Y.register(this),configurable:!0});const K=Y.vm.controller.session;K.view||(K.view=this)}detach(){this.unsubscribeAll(),this.realm.deregister(this),Object.defineProperty(this,"id",{value:""})}reattach(){Object.defineProperty(this,"id",{value:this.realm.register(this)})}publish(a,Y,K){this.realm.publish(Y,K,a)}subscribe(a,Y,K){"string"==typeof K&&(K=this[K]);const P=K;(K=P.bind(this)).unbound=P;const{event:R,handling:v}=Y.event?Y:{event:Y};this.realm.subscribe(R,this.id,K,a,v)}unsubscribe(a,Y){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"string"==typeof K&&(K=this[K]),this.realm.unsubscribe(Y,this.id,K,a)}unsubscribeAll(){this.realm.unsubscribeAll(this.id)}future(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.realm.future(this,a)}random(){return zt().random()}now(){return this.realm.now()}externalNow(){return this.realm.externalNow()}extrapolatedNow(){return this.realm.extrapolatedNow()}update(a){}wellKnownModel(a){return this.realm.vm.get(a)}get sessionId(){return this.realm.vm.id}get session(){return this.realm.vm.controller.session}get viewId(){return this.realm.vm.controller.viewId}[Symbol.toPrimitive](){const a=this.constructor.name;return a.includes("View")?a:`${a}[View]`}}const or=new class{constructor(){this.ready=!1,this.isInIframe=window.top!==window,this.subscriptions={},this.enumerator=null}setReceiver(a){this.receiver=a,this.ready=!0}setIframeEnumerator(a){this.enumerator=a}on(a,Y){if(!this.receiver)throw Error("setReceiver() has not been called");if("string"==typeof Y&&(Y=this.receiver[Y]),!Y)throw Error("Messenger.on: the second argument must be a method name or a function");if(this.subscriptions[a]){if(this.findIndex(this.subscriptions[a],Y)>=0)throw Error(`${Y} is already subscribed`)}else this.subscriptions[a]=[];this.subscriptions[a].push(Y),this.listener||(this.listener=a=>this.receive(a),window.addEventListener("message",this.listener))}detach(){this.listener&&(window.removeEventListener("message",this.listener),this.listener=null),this.stopPublishingPointerMove(),this.receiver=null,this.subscriptions={},this.enumerator=null,this.ready=!1}removeSubscription(a,Y){"string"==typeof Y&&(Y=this.receiver[Y]);const K=this.subscriptions[a];if(K){const P=this.findIndex(K,Y);K.splice(P,1),0===K.length&&delete this.subscriptions[a]}}removeAllSubscriptions(){this.subscriptions={}}receive(a){const{event:Y,data:K}=a.data,P=a.source;this.handleEvent(Y,K,P)}handleEvent(a,Y,K){const P=this.subscriptions[a];P&&P.forEach((a=>{a.call(this.receiver,Y,K)}))}send(a,Y,K){this.isInIframe?window.top.postMessage({event:a,data:Y},"*"):K?K.postMessage({event:a,data:Y},"*"):this.enumerator&&this.enumerator().forEach((K=>{K.contentWindow.postMessage({event:a,data:Y},"*")}))}findIndex(a,Y){const K=Y.name;return a.findIndex((a=>{const P=a.name;return K||P?K===P:Y===a}))}startPublishingPointerMove(){this._moveHandler||(this._moveHandler=a=>this.send("pointerPosition",{x:a.clientX,y:a.clientY,type:a.type}),window.document.addEventListener("pointermove",this._moveHandler,!0))}stopPublishingPointerMove(){this._moveHandler&&(window.document.removeEventListener("pointermove",this._moveHandler,!0),this._moveHandler=null)}},dr="node"===R.CROQUET_PLATFORM;let hr=60;class Kl{static async join(a){try{return await this.join_impl(a)}catch(a){throw ce.showMessage(a.message||a,{level:"fatal"}),a}}static async join_impl(a){if("object"!=typeof a)throw Error("Croquet: please use new Session.join( {apiKey, ...} ) API. See https://croquet.io/docs/croquet/Session.html#.join");a.appId||(a.appId="no.appId"),a.name||(a.name=ce.autoSession(),a.password||(a.password=ce.autoPassword())),a.model||(a.model=kl.lastRegistered),a.view||(a.view=Rl);for(const[j,U]of Object.entries(a))U instanceof Promise&&(a[j]=await U);function e(a,Y){return a===Y||a.prototype instanceof Y}if("string"!=typeof a.apiKey)throw Error("Croquet: no apiKey provided in Session.join()!");if(a.apiKey.length>128)throw Error("Croquet: apiKey > 128 characters in Session.join()!");if("string"!=typeof a.name)throw Error("Croquet: no session name provided in Session.join()!");if(a.name.length>128)throw Error("Croquet: session name > 128 characters in Session.join()!");const Y=a.model;if("function"!=typeof Y||!e(Y,kl))throw Error("Croquet: bad model class in Session.join()");const K=a.view||Rl;if("function"!=typeof K||!e(K,Rl))throw Error("Croquet: bad view class in Session.join()");if("string"!=typeof a.appId)throw Error("Croquet: no appId provided in Session.join()");if(!a.appId.length>128)throw Error("Croquet: appId > 128 characters in Session.join()");if(!a.appId.match(/^[a-z](-?[a-z0-9_])*(\.[a-z0-9_](-?[a-z0-9_])*)+$/i))throw Error("Croquet: malformed appId in Session.join()");if("string"!=typeof a.password||!a.password)throw Error("Croquet: no password provided in Session.join()");const P=I.reflector||a.reflector;P&&(I.reflector=P);const R=I.files||a.files;R&&(I.files=R);const v=I.backend||a.backend;if(v&&(I.backend=v),dr&&"manual"!==a.step)throw Error("stepping must be manual in a Node.js app");if("rejoinLimit"in a){if("number"!=typeof a.rejoinLimit||a.rejoinLimit<0||a.rejoinLimit>6e4)throw Error("rejoinLimit range: 0-60000")}else a.rejoinLimit=1e3;if("eventRateLimit"in a){if("number"!=typeof a.eventRateLimit||a.eventRateLimit<1||a.eventRateLimit>60)throw Error("eventRateLimit range: 1-60")}else a.eventRateLimit=20;if(a.heraldUrl){if(a.heraldUrl.length>256)throw Error("heraldUrl can only be 256 characters");if(!a.heraldUrl.startsWith("https://"))throw Error("heraldUrl needs to be https")}if(a.hashOverride){if(43!==a.hashOverride.length)throw Error("hashOverride must be 43 characters");if(-1!==a.hashOverride.search(/[^-_a-zA-Z0-9]/))throw Error("hashOverride must be base64url encoded")}if(a.debug){function g(a){return"string"==typeof a&&(a=a.split(",")),a?Array.isArray(a)?a:[a]:[]}I.debug=[...g(a.debug),...g(I.debug)].join(",")}if("autoSleep"in a){const D=a.autoSleep,E=typeof D;if("number"===E){if(D<0)throw Error("an autoSleep value must be >= 0")}else{if("boolean"!==E)throw Error("autoSleep must be numeric or boolean");a.autoSleep=D?10:0}}else a.autoSleep=10;if(a.flags){let B=a.flags;"string"==typeof B&&(B=B.split(",")),B=B?Array.isArray(B)?B:[B]:[],B=B.filter((a=>"object"!=typeof a)),B.length?(a.flags={},B.forEach((Y=>a.flags[Y]=!0))):a.flags=null}"expectedSimFPS"in a&&(hr=Math.min(a.expectedSimFPS,120));const H=["name","password","apiKey","appId","tps","autoSleep","heraldUrl","rejoinLimit","eventRateLimit","optionsFromUrl","viewOptions","viewIdDebugSuffix","hashOverride","location","flags","progressReporter"];Object.isFrozen(ur)||(zl(ur),function(a){const Y=JSON.stringify(a,((a,Y)=>"function"==typeof Y?S(Y):Y));if("{}"===Y)return;const K=JSON.parse(Y),P=V(y(K));rt.push(P),W()&&P.then((a=>{ot[a].what="Croquet Constants"}))}(ur));const M=new Fa,z=JSON.parse(JSON.stringify({...a.options})),F={id:"",persistentId:"",versionId:"",name:a.name,model:null,view:null,step(a){M.stepSession("animation",{frameTime:a,view:F.view,expectedSimFPS:hr})},leave:()=>Kl.leave(F.id),get latency(){return M.latency},get latencies(){return M.latencies}},N={options:z,initFn:(a,K)=>Y.create(a,K,"modelRoot"),rebootModelView:p};for(const[O,_]of Object.entries(a))H.includes(O)&&(N[O]=_);await M.initFromSessionSpec(N);let Q=!1;return await p(),"manual"!==a.step&&M.startStepping(F.step),F;async function p(){F.model=null,F.view&&(I.has("debug","session",!1)&&console.log(F.id,"detaching root view"),F.view.detach(),""!==F.view.id&&console.warn(`Croquet: ${F.view} did not call super.detach()`),F.view=null),ce.clearSessionMoniker(),or.ready&&or.detach(),M.leaving?M.leaving(!0):Q||(Q=!0,await M.establishSession(N),Q=!1,F.model=M.vm.get("modelRoot"),F.id=M.id,F.persistentId=M.persistentId,F.versionId=M.versionId,M.session=F,ce.makeSessionWidgets(F.id),M.inViewRealm((()=>{I.has("debug","session",!1)&&console.log(F.id,"creating root view"),new K(F.model,N.viewOptions)})))}}static async leave(a){const Y=function(a){for(const Y of Hl)if(Y.id===a)return Y;return null}(a);if(!Y)return!1;Y.reconnectTimeout&&(clearTimeout(Y.reconnectTimeout),delete Y.reconnectTimeout);const K=new Promise((a=>Y.leaving=a)),P=Y.connection;return!!P.connected&&(P.closeConnection(1e3),K)}static thisSession(){const a=hl.current();return a?a.id:""}}const ur={};function zl(a){if(!Object.isFrozen(a)){Object.freeze(a);for(const Y of Object.values(a))!Y||"object"!=typeof Y&&"function"!=typeof Y||zl(Y)}}Y.App=ce,Y.Constants=ur,Y.Data=Aa,Y.Messenger=or,Y.Model=kl,Y.Session=Kl,Y.View=Rl,Y.gatherInternalClassTypes=function(a,Y){const K={};return vl({root:a},Y,K,new Set),K},Y.startSession=function(){return ce.showMessage("Croquet.startSession() is deprecated, please use Croquet.Session.join()",{level:"warning",only:"once"}),Kl.join(...arguments)}}}]);